<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/bnoguchi/everyauth/"

    >everyauth (v0.4.9)</a>
</h1>
<h4>Auth solution (password, facebook, & more) for your node.js Connect & Express apps</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth">module everyauth</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">everyauth.</span>debug</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.addRequestGetter">
            function <span class="apidocSignatureSpan">everyauth.</span>addRequestGetter
            <span class="apidocSignatureSpan">(name, fn, isAsync)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.addRequestMethod">
            function <span class="apidocSignatureSpan">everyauth.</span>addRequestMethod
            <span class="apidocSignatureSpan">(name, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.helpExpress">
            function <span class="apidocSignatureSpan">everyauth.</span>helpExpress
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.middleware">
            function <span class="apidocSignatureSpan">everyauth.</span>middleware
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.promise">
            function <span class="apidocSignatureSpan">everyauth.</span>promise
            <span class="apidocSignatureSpan">(_module, values)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.routeTriggeredSequence">
            function <span class="apidocSignatureSpan">everyauth.</span>routeTriggeredSequence
            <span class="apidocSignatureSpan">(name, _module)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.step">
            function <span class="apidocSignatureSpan">everyauth.</span>step
            <span class="apidocSignatureSpan">(name, _module)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stepSequence">
            function <span class="apidocSignatureSpan">everyauth.</span>stepSequence
            <span class="apidocSignatureSpan">(name, module)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>37signals</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>500px</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>_req</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>angellist</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>azureacs</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>box</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>box2</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>dropbox</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>dwolla</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>enabled</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>evernote</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>everymodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>facebook</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>foursquare</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>github</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>google</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>google1</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>googlehybrid</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>gowalla</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>guest</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>instagram</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>justintv</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>linkedin</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>mailchimp</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>mailru</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>mendeley</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>mixi</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>modules</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>oauth</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>oauth2</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>openid</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>osm</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>password</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>promise.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>readability</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>routeTriggeredSequence.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>salesforce</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>shopify</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>skyrock</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>soundcloud</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>step.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>stepSequence.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>stripe</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>tripit</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>tumblr</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>twitter</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>utils</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>vimeo</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>vkontakte</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.</span>yahoo</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.37signals">module everyauth.37signals</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.37signals._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.37signals.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.37signals._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.37signals.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.37signals.scope">
            function <span class="apidocSignatureSpan">everyauth.37signals.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.37signals.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.37signals.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.37signals.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.37signals.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.37signals.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.37signals.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.37signals.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.37signals.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.37signals.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.37signals.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.37signals.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.37signals.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.37signals.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.500px">module everyauth.500px</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.500px._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.500px.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.500px.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.500px.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.500px.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.500px.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.500px.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.500px.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.500px.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.500px.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.500px.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.angellist">module everyauth.angellist</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.angellist._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.angellist.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.angellist._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.angellist.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.angellist.scope">
            function <span class="apidocSignatureSpan">everyauth.angellist.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.angellist.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.angellist.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.angellist.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.angellist.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.angellist.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.angellist.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.angellist.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.angellist.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.angellist.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.angellist.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.angellist.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.angellist.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.azureacs">module everyauth.azureacs</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._addToSession">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_addToSession
            <span class="apidocSignatureSpan">(sess, acsUser, token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._fetchUser">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_fetchUser
            <span class="apidocSignatureSpan">(claims)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._getSession">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_getSession
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._getToken">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_getToken
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._handleNotValidTokenCallbackError">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_handleNotValidTokenCallbackError
            <span class="apidocSignatureSpan">(token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._handleProtocolNotImplementedError">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_handleProtocolNotImplementedError
            <span class="apidocSignatureSpan">(tokenFormat)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._parseToken">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_parseToken
            <span class="apidocSignatureSpan">(token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._redirectToIdentityProviderSelector">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_redirectToIdentityProviderSelector
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs._sendResponse">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_sendResponse
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.addToSession">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>addToSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>authCallbackDidErr
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.authCallbackErrorSteps">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>authCallbackErrorSteps
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.callbackPath">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>callbackPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.entryPath">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>entryPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.fetchUser">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>fetchUser
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.findOrCreateUser">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>findOrCreateUser
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.getSession">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>getSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.getToken">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>getToken
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>handleAuthCallbackError
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.handleNotValidTokenCallbackError">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>handleNotValidTokenCallbackError
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.handleProtocolNotImplementedError">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>handleProtocolNotImplementedError
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.homeRealm">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>homeRealm
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.identityProviderUrl">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>identityProviderUrl
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.init">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.notValidTokenCallbackErrorSteps">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>notValidTokenCallbackErrorSteps
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.parseToken">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>parseToken
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.protocolNotImplementedErrorSteps">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>protocolNotImplementedErrorSteps
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.realm">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>realm
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.redirectPath">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>redirectPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.redirectToIdentityProviderSelector">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>redirectToIdentityProviderSelector
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.sendResponse">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>sendResponse
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.signingKey">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>signingKey
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.azureacs.tokenFormat">
            function <span class="apidocSignatureSpan">everyauth.azureacs.</span>tokenFormat
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.azureacs.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.azureacs.</span>_currSeq</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.azureacs.</span>_currentStep</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.azureacs.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.azureacs.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.azureacs.</span>cloneOnSubmodule</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.box">module everyauth.box</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.box._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.box.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.box._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.box.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.box.scope">
            function <span class="apidocSignatureSpan">everyauth.box.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.box2">module everyauth.box2</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.box2._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.box2.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.box2._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.box2.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.box2._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.box2.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.box2._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.box2.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box2.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box2.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box2.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box2.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box2.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.box2.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box2.</span>_accessTokenHttpMethod</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box2.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box2.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box2.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box2.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box2.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box2.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.box2.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.dropbox">module everyauth.dropbox</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.dropbox._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.dropbox.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.dropbox._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.dropbox.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.dropbox._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.dropbox.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.dropbox._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.dropbox.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dropbox.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dropbox.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dropbox.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dropbox.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dropbox.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.dropbox.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.dropbox.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.dropbox.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.dropbox.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.dwolla">module everyauth.dwolla</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.dwolla._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.dwolla.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.dwolla._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.dwolla.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.dwolla.scope">
            function <span class="apidocSignatureSpan">everyauth.dwolla.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dwolla.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dwolla.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dwolla.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dwolla.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dwolla.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.dwolla.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.dwolla.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.dwolla.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.dwolla.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.dwolla.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.dwolla.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.dwolla.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.evernote">module everyauth.evernote</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.evernote._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.evernote.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.evernote.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.evernote.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.evernote.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.evernote.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.evernote.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.evernote.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.evernote.</span>_authorizePath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.evernote.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.evernote.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.evernote.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.evernote.</span>_requestTokenPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.everymodule">module everyauth.everymodule</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule._handleLogout">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>_handleLogout
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule._performRedirect">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>_performRedirect
            <span class="apidocSignatureSpan">(res, location)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule.findUserById">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>findUserById
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule.handleLogout">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>handleLogout
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule.logoutPath">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>logoutPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule.logoutRedirectPath">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>logoutRedirectPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule.moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>moduleErrback
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule.moduleTimeout">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>moduleTimeout
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule.performRedirect">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>performRedirect
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.everymodule.userPkey">
            function <span class="apidocSignatureSpan">everyauth.everymodule.</span>userPkey
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">everyauth.everymodule.</span>_moduleTimeout</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.everymodule.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.everymodule.</span>_currSeq</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.everymodule.</span>_currentStep</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.everymodule.</span>_middleware</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.everymodule.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.everymodule.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.everymodule.</span>submodules</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.everymodule.</span>_logoutPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.everymodule.</span>_logoutRedirectPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.everymodule.</span>_userPkey</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.facebook">module everyauth.facebook</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.facebook._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.facebook.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.facebook._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.facebook.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.facebook._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.facebook.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.facebook._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.facebook.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.facebook.fields">
            function <span class="apidocSignatureSpan">everyauth.facebook.</span>fields
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.facebook.mobile">
            function <span class="apidocSignatureSpan">everyauth.facebook.</span>mobile
            <span class="apidocSignatureSpan">(isMobile)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.facebook.popup">
            function <span class="apidocSignatureSpan">everyauth.facebook.</span>popup
            <span class="apidocSignatureSpan">(isPopup)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.facebook.scope">
            function <span class="apidocSignatureSpan">everyauth.facebook.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.facebook.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.facebook.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.facebook.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.facebook.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.facebook.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.facebook.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.facebook.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.facebook.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.facebook.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.facebook.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.facebook.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.foursquare">module everyauth.foursquare</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.foursquare._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.foursquare.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.foursquare._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.foursquare.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.foursquare.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.foursquare.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.foursquare.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.foursquare.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.foursquare.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.foursquare.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.foursquare.</span>_accessTokenHttpMethod</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.foursquare.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.foursquare.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.foursquare.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.foursquare.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.foursquare.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.foursquare.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.github">module everyauth.github</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.github._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.github.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.github._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.github.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.github._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.github.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.github._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.github.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.github.scope">
            function <span class="apidocSignatureSpan">everyauth.github.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.github.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.github.</span>_customHeaders</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.github.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.github.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.github.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.github.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.github.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.github.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.github.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.github.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.github.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.github.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.github.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.google">module everyauth.google</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.google._addToSession">
            function <span class="apidocSignatureSpan">everyauth.google.</span>_addToSession
            <span class="apidocSignatureSpan">(sess, auth)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.google._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.google.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.google._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.google.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.google._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.google.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.google._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.google.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.google.refreshToken">
            function <span class="apidocSignatureSpan">everyauth.google.</span>refreshToken
            <span class="apidocSignatureSpan">(params, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.google.scope">
            function <span class="apidocSignatureSpan">everyauth.google.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google.</span>_accessTokenHttpMethod</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.google1">module everyauth.google1</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.google1._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.google1.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.google1._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.google1.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.google1.scope">
            function <span class="apidocSignatureSpan">everyauth.google1.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google1.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google1.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google1.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google1.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.google1.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google1.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google1.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google1.</span>_authorizePath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google1.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google1.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google1.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.google1.</span>_requestTokenPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.googlehybrid">module everyauth.googlehybrid</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.googlehybrid._sendToAuthenticationUri">
            function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>_sendToAuthenticationUri
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.googlehybrid._verifyAttributes">
            function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>_verifyAttributes
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.googlehybrid.consumerKey">
            function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>consumerKey
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.googlehybrid.consumerSecret">
            function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>consumerSecret
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.googlehybrid.init">
            function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.googlehybrid.scope">
            function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>_entryPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.gowalla">module everyauth.gowalla</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.gowalla._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.gowalla.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.gowalla._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.gowalla.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.gowalla.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.gowalla.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.gowalla.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.gowalla.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.gowalla.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.gowalla.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.gowalla.</span>_accessTokenHttpMethod</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.gowalla.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.gowalla.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.gowalla.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.gowalla.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.gowalla.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.gowalla.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.gowalla.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.guest">module everyauth.guest</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest._addToSession">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>_addToSession
            <span class="apidocSignatureSpan">(sess, user, errors)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest._getGuestId">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>_getGuestId
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest._getSession">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>_getSession
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest._interpretUserOrErrors">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>_interpretUserOrErrors
            <span class="apidocSignatureSpan">(userOrErrors)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest._maybeLoginFail">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>_maybeLoginFail
            <span class="apidocSignatureSpan">(req, res, errors, login)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest._maybeLoginSucceed">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>_maybeLoginSucceed
            <span class="apidocSignatureSpan">(res, user)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest.addToSession">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>addToSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest.createOrVerifyGuest">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>createOrVerifyGuest
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest.entryPath">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>entryPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest.getGuestId">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>getGuestId
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest.getSession">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>getSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest.interpretUserOrErrors">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>interpretUserOrErrors
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest.maybeLoginFail">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>maybeLoginFail
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest.maybeLoginSucceed">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>maybeLoginSucceed
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.guest.redirectPath">
            function <span class="apidocSignatureSpan">everyauth.guest.</span>redirectPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.guest.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.guest.</span>_currSeq</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.guest.</span>_currentStep</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.guest.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.guest.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.guest.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.guest.</span>_entryPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.instagram">module everyauth.instagram</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.instagram._convertErr">
            function <span class="apidocSignatureSpan">everyauth.instagram.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.instagram._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.instagram.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.instagram.display">
            function <span class="apidocSignatureSpan">everyauth.instagram.</span>display
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.instagram.scope">
            function <span class="apidocSignatureSpan">everyauth.instagram.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.instagram.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.instagram.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.instagram.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.instagram.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.instagram.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.instagram.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.instagram.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.instagram.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.instagram.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.instagram.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.instagram.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.justintv">module everyauth.justintv</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.justintv._convertErr">
            function <span class="apidocSignatureSpan">everyauth.justintv.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.justintv._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.justintv.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.justintv.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.justintv.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.justintv.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.justintv.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.justintv.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.justintv.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.justintv.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.justintv.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.justintv.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.linkedin">module everyauth.linkedin</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.linkedin._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.linkedin.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.linkedin._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.linkedin.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.linkedin._redirectToProviderAuth">
            function <span class="apidocSignatureSpan">everyauth.linkedin.</span>_redirectToProviderAuth
            <span class="apidocSignatureSpan">(res, token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.linkedin.fields">
            function <span class="apidocSignatureSpan">everyauth.linkedin.</span>fields
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.linkedin.init">
            function <span class="apidocSignatureSpan">everyauth.linkedin.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.linkedin.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.linkedin.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.linkedin.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.linkedin.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.linkedin.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.linkedin.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.linkedin.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.linkedin.</span>_authorizePath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.linkedin.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.linkedin.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.linkedin.</span>_fields</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.linkedin.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.linkedin.</span>_requestTokenPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.mailchimp">module everyauth.mailchimp</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mailchimp._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mailchimp._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mailchimp.metadataPath">
            function <span class="apidocSignatureSpan">everyauth.mailchimp.</span>metadataPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailchimp.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailchimp.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailchimp.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_metadataPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.mailru">module everyauth.mailru</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mailru._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.mailru.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mailru._convertErr">
            function <span class="apidocSignatureSpan">everyauth.mailru.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mailru._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.mailru.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, http)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mailru.display">
            function <span class="apidocSignatureSpan">everyauth.mailru.</span>display
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mailru.scope">
            function <span class="apidocSignatureSpan">everyauth.mailru.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailru.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailru.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailru.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailru.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailru.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mailru.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailru.</span>_accessTokenHttpMethod</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailru.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailru.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailru.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailru.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailru.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mailru.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.mendeley">module everyauth.mendeley</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">everyauth.mendeley.</span>_sendCallbackWithAuthorize</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mendeley._convertErr">
            function <span class="apidocSignatureSpan">everyauth.mendeley.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mendeley._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.mendeley.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mendeley.init">
            function <span class="apidocSignatureSpan">everyauth.mendeley.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mendeley.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mendeley.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mendeley.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mendeley.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mendeley.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mendeley.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mendeley.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mendeley.</span>_authorizePath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mendeley.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mendeley.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mendeley.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mendeley.</span>_requestTokenPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.mixi">module everyauth.mixi</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mixi._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.mixi.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mixi._convertErr">
            function <span class="apidocSignatureSpan">everyauth.mixi.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mixi._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.mixi.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mixi._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.mixi.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mixi.display">
            function <span class="apidocSignatureSpan">everyauth.mixi.</span>display
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mixi.mobile">
            function <span class="apidocSignatureSpan">everyauth.mixi.</span>mobile
            <span class="apidocSignatureSpan">(isMobile)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.mixi.scope">
            function <span class="apidocSignatureSpan">everyauth.mixi.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mixi.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mixi.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mixi.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mixi.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mixi.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.mixi.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mixi.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mixi.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mixi.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mixi.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mixi.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.mixi.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.oauth">module everyauth.oauth</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">everyauth.oauth.</span>_sendCallbackWithAuthorize</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._addToSession">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_addToSession
            <span class="apidocSignatureSpan">(sess, auth)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._assignOAuthUserToSession">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_assignOAuthUserToSession
            <span class="apidocSignatureSpan">(oauthUser, session)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._compileAuth">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_compileAuth
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, oauthUser, user)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._extractTokenAndVerifier">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_extractTokenAndVerifier
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._getAccessToken">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_getAccessToken
            <span class="apidocSignatureSpan">(reqToken, reqTokenSecret, verifier)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._getRequestToken">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_getRequestToken
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._getSession">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_getSession
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._redirectToProviderAuth">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_redirectToProviderAuth
            <span class="apidocSignatureSpan">(res, token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._rememberTokenSecret">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_rememberTokenSecret
            <span class="apidocSignatureSpan">(sess)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._sendResponse">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_sendResponse
            <span class="apidocSignatureSpan">(res, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._storeRequestToken">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_storeRequestToken
            <span class="apidocSignatureSpan">(req, token, tokenSecret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth._waitForPriorRequestToWriteSession">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>_waitForPriorRequestToWriteSession
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.accessTokenPath">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>accessTokenPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.addToSession">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>addToSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.alwaysDetectHostname">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>alwaysDetectHostname
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.apiHost">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>apiHost
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.assignOAuthUserToSession">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>assignOAuthUserToSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>authCallbackDidErr
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.authCallbackErrorSteps">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>authCallbackErrorSteps
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.authorizePath">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>authorizePath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.callbackPath">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>callbackPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.compileAuth">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>compileAuth
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.consumerKey">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>consumerKey
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.consumerSecret">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>consumerSecret
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.convertErr">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>convertErr
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.entryPath">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>entryPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.extractTokenAndVerifier">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>extractTokenAndVerifier
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>fetchOAuthUser
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.findOrCreateUser">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>findOrCreateUser
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.getAccessToken">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>getAccessToken
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.getRequestToken">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>getRequestToken
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.getSession">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>getSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>handleAuthCallbackError
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.handleDuplicateCallbackRequest">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>handleDuplicateCallbackRequest
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.init">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.myHostname">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>myHostname
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.oauthHost">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>oauthHost
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.redirectPath">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>redirectPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.redirectToProviderAuth">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>redirectToProviderAuth
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.rememberTokenSecret">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>rememberTokenSecret
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.requestTokenPath">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>requestTokenPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.requestTokenQueryParam">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>requestTokenQueryParam
            <span class="apidocSignatureSpan">(key, val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.sendCallbackWithAuthorize">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>sendCallbackWithAuthorize
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.sendResponse">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>sendResponse
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.storeRequestToken">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>storeRequestToken
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth.waitForPriorRequestToWriteSession">
            function <span class="apidocSignatureSpan">everyauth.oauth.</span>waitForPriorRequestToWriteSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth.</span>_currSeq</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth.</span>_currentStep</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.oauth.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.oauth.</span>_authorizePath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.oauth.</span>_requestTokenPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.oauth2">module everyauth.oauth2</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2._addToSession">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_addToSession
            <span class="apidocSignatureSpan">(sess, auth)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2._compile">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_compile
            <span class="apidocSignatureSpan">(accessToken, extra, oauthUser, user)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2._getAccessToken">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_getAccessToken
            <span class="apidocSignatureSpan">(code, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2._getAuthUri">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_getAuthUri
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2._getCode">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_getCode
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2._getSession">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_getSession
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2._requestAuthUri">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_requestAuthUri
            <span class="apidocSignatureSpan">(res, authUri)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2._sendResponse">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_sendResponse
            <span class="apidocSignatureSpan">(res, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.accessTokenHttpMethod">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>accessTokenHttpMethod
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.accessTokenParam">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>accessTokenParam
            <span class="apidocSignatureSpan">(key, val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.accessTokenPath">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>accessTokenPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.addToSession">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>addToSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.alwaysDetectHostname">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>alwaysDetectHostname
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.apiHost">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>apiHost
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.appId">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>appId
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.appSecret">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>appSecret
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>authCallbackDidErr
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.authCallbackErrorSteps">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>authCallbackErrorSteps
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.authPath">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>authPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.authQueryParam">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>authQueryParam
            <span class="apidocSignatureSpan">(key, val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.callbackPath">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>callbackPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.compile">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>compile
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.convertErr">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>convertErr
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.customHeaders">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>customHeaders
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.entryPath">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>entryPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>fetchOAuthUser
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.findOrCreateUser">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>findOrCreateUser
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.getAccessToken">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>getAccessToken
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.getAuthUri">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>getAuthUri
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.getCode">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>getCode
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.getSession">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>getSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>handleAuthCallbackError
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.init">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.myHostname">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>myHostname
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.oauthHost">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>oauthHost
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.postAccessTokenParamsVia">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>postAccessTokenParamsVia
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.redirectPath">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>redirectPath
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.requestAuthUri">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>requestAuthUri
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.oauth2.sendResponse">
            function <span class="apidocSignatureSpan">everyauth.oauth2.</span>sendResponse
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth2.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth2.</span>_currSeq</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth2.</span>_currentStep</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth2.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth2.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth2.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth2.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.oauth2.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.oauth2.</span>_accessTokenHttpMethod</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.oauth2.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.oauth2.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.oauth2.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.openid">module everyauth.openid</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid._addToSession">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>_addToSession
            <span class="apidocSignatureSpan">(sess, user)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid._getSession">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>_getSession
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid._sendResponse">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>_sendResponse
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid._sendToAuthenticationUri">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>_sendToAuthenticationUri
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid._verifyAttributes">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>_verifyAttributes
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.addToSession">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>addToSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.alwaysDetectHostname">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>alwaysDetectHostname
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.attributeExchange">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>attributeExchange
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.callbackPath">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>callbackPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.entryPath">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>entryPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.findOrCreateUser">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>findOrCreateUser
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.getSession">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>getSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.init">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.myHostname">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>myHostname
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.openidURLField">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>openidURLField
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.redirectPath">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>redirectPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.sendResponse">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>sendResponse
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.sendToAuthenticationUri">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>sendToAuthenticationUri
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.simpleRegistration">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>simpleRegistration
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.openid.verifyAttributes">
            function <span class="apidocSignatureSpan">everyauth.openid.</span>verifyAttributes
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.openid.</span>_attributeExchange</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.openid.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.openid.</span>_currSeq</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.openid.</span>_currentStep</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.openid.</span>_simpleRegistration</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.openid.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.openid.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.openid.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.openid.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.openid.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.openid.</span>_openidURLField</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.openid.</span>_redirectPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.osm">module everyauth.osm</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.osm._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.osm.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.osm._convertErr">
            function <span class="apidocSignatureSpan">everyauth.osm.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.osm._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.osm.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.osm._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.osm.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.osm.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.osm.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.osm.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.osm.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.osm.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.osm.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.osm.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.osm.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.osm.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.password">module everyauth.password</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._addToSession">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_addToSession
            <span class="apidocSignatureSpan">(sess, user, errors)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._aggregateParams">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_aggregateParams
            <span class="apidocSignatureSpan">(login, password, extraParams)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._displayLogin">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_displayLogin
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._displayRegister">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_displayRegister
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._extractExtraRegistrationParams">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_extractExtraRegistrationParams
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._extractLoginPassword">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_extractLoginPassword
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._extractUserOrHandleErrors">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_extractUserOrHandleErrors
            <span class="apidocSignatureSpan">(req, res, userOrErrors, newUserAttributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._getSession">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_getSession
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._interpretUserOrErrors">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_interpretUserOrErrors
            <span class="apidocSignatureSpan">(userOrErrors)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._maybeBreakToRegistrationFailSteps">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_maybeBreakToRegistrationFailSteps
            <span class="apidocSignatureSpan">(req, res, errors, newUserAttributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._respondToLoginFail">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_respondToLoginFail
            <span class="apidocSignatureSpan">(req, res, errors, login)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._respondToLoginSucceed">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_respondToLoginSucceed
            <span class="apidocSignatureSpan">(res, user)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._respondToRegistrationFail">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_respondToRegistrationFail
            <span class="apidocSignatureSpan">(req, res, errors, newUserAttributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._respondToRegistrationSucceed">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_respondToRegistrationSucceed
            <span class="apidocSignatureSpan">(req, res, user)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._validateRegistration">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_validateRegistration
            <span class="apidocSignatureSpan">(newUserAttributes, baseErrors)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password._validateRegistrationBase">
            function <span class="apidocSignatureSpan">everyauth.password.</span>_validateRegistrationBase
            <span class="apidocSignatureSpan">(newUserAttributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.addToSession">
            function <span class="apidocSignatureSpan">everyauth.password.</span>addToSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.aggregateParams">
            function <span class="apidocSignatureSpan">everyauth.password.</span>aggregateParams
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.authenticate">
            function <span class="apidocSignatureSpan">everyauth.password.</span>authenticate
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.displayLogin">
            function <span class="apidocSignatureSpan">everyauth.password.</span>displayLogin
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.displayRegister">
            function <span class="apidocSignatureSpan">everyauth.password.</span>displayRegister
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.extractExtraRegistrationParams">
            function <span class="apidocSignatureSpan">everyauth.password.</span>extractExtraRegistrationParams
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.extractLoginPassword">
            function <span class="apidocSignatureSpan">everyauth.password.</span>extractLoginPassword
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.extractUserOrHandleErrors">
            function <span class="apidocSignatureSpan">everyauth.password.</span>extractUserOrHandleErrors
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.getLoginPath">
            function <span class="apidocSignatureSpan">everyauth.password.</span>getLoginPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.getRegisterPath">
            function <span class="apidocSignatureSpan">everyauth.password.</span>getRegisterPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.getSession">
            function <span class="apidocSignatureSpan">everyauth.password.</span>getSession
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.interpretUserOrErrors">
            function <span class="apidocSignatureSpan">everyauth.password.</span>interpretUserOrErrors
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.loginFormFieldName">
            function <span class="apidocSignatureSpan">everyauth.password.</span>loginFormFieldName
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.loginHumanName">
            function <span class="apidocSignatureSpan">everyauth.password.</span>loginHumanName
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.loginKey">
            function <span class="apidocSignatureSpan">everyauth.password.</span>loginKey
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.loginLayout">
            function <span class="apidocSignatureSpan">everyauth.password.</span>loginLayout
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.loginLocals">
            function <span class="apidocSignatureSpan">everyauth.password.</span>loginLocals
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.loginSuccessRedirect">
            function <span class="apidocSignatureSpan">everyauth.password.</span>loginSuccessRedirect
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.loginView">
            function <span class="apidocSignatureSpan">everyauth.password.</span>loginView
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.loginWith">
            function <span class="apidocSignatureSpan">everyauth.password.</span>loginWith
            <span class="apidocSignatureSpan">(loginType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.maybeBreakToRegistrationFailSteps">
            function <span class="apidocSignatureSpan">everyauth.password.</span>maybeBreakToRegistrationFailSteps
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.passwordFormFieldName">
            function <span class="apidocSignatureSpan">everyauth.password.</span>passwordFormFieldName
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.postLoginPath">
            function <span class="apidocSignatureSpan">everyauth.password.</span>postLoginPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.postRegisterPath">
            function <span class="apidocSignatureSpan">everyauth.password.</span>postRegisterPath
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.registerLayout">
            function <span class="apidocSignatureSpan">everyauth.password.</span>registerLayout
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.registerLocals">
            function <span class="apidocSignatureSpan">everyauth.password.</span>registerLocals
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.registerSuccessRedirect">
            function <span class="apidocSignatureSpan">everyauth.password.</span>registerSuccessRedirect
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.registerUser">
            function <span class="apidocSignatureSpan">everyauth.password.</span>registerUser
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.registerView">
            function <span class="apidocSignatureSpan">everyauth.password.</span>registerView
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.registrationFailSteps">
            function <span class="apidocSignatureSpan">everyauth.password.</span>registrationFailSteps
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.respondToLoginFail">
            function <span class="apidocSignatureSpan">everyauth.password.</span>respondToLoginFail
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.respondToLoginSucceed">
            function <span class="apidocSignatureSpan">everyauth.password.</span>respondToLoginSucceed
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.respondToRegistrationFail">
            function <span class="apidocSignatureSpan">everyauth.password.</span>respondToRegistrationFail
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.respondToRegistrationSucceed">
            function <span class="apidocSignatureSpan">everyauth.password.</span>respondToRegistrationSucceed
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.validLoginTypes">
            function <span class="apidocSignatureSpan">everyauth.password.</span>validLoginTypes
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.validateRegistration">
            function <span class="apidocSignatureSpan">everyauth.password.</span>validateRegistration
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.password.validateRegistrationBase">
            function <span class="apidocSignatureSpan">everyauth.password.</span>validateRegistrationBase
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.password.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.password.</span>_currSeq</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.password.</span>_currentStep</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.password.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.password.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.password.</span>_validLoginTypes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.password.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.password.</span>_loginFormFieldName</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.password.</span>_loginHumanName</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.password.</span>_loginKey</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.password.</span>_loginType</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.password.</span>_passwordFormFieldName</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.promise">module everyauth.promise</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.promise.promise">
            function <span class="apidocSignatureSpan">everyauth.</span>promise
            <span class="apidocSignatureSpan">(_module, values)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.promise.prototype">module everyauth.promise.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.promise.prototype.breakTo">
            function <span class="apidocSignatureSpan">everyauth.promise.prototype.</span>breakTo
            <span class="apidocSignatureSpan">(seqName)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.readability">module everyauth.readability</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.readability._convertErr">
            function <span class="apidocSignatureSpan">everyauth.readability.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.readability._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.readability.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.readability.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.readability.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.readability.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.readability.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.readability.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.readability.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.readability.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.readability.</span>_authorizePath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.readability.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.readability.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.readability.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.readability.</span>_requestTokenPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.routeTriggeredSequence">module everyauth.routeTriggeredSequence</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.routeTriggeredSequence.routeTriggeredSequence">
            function <span class="apidocSignatureSpan">everyauth.</span>routeTriggeredSequence
            <span class="apidocSignatureSpan">(name, _module)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.routeTriggeredSequence.super_">
            function <span class="apidocSignatureSpan">everyauth.routeTriggeredSequence.</span>super_
            <span class="apidocSignatureSpan">(name, module)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.routeTriggeredSequence.prototype">module everyauth.routeTriggeredSequence.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.routeTriggeredSequence.prototype.routeHandler">
            function <span class="apidocSignatureSpan">everyauth.routeTriggeredSequence.prototype.</span>routeHandler
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.salesforce">module everyauth.salesforce</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.salesforce._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.salesforce.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.salesforce._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.salesforce.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, authResponse)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.salesforce._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.salesforce.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.salesforce._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.salesforce.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.salesforce.scope">
            function <span class="apidocSignatureSpan">everyauth.salesforce.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.salesforce.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.salesforce.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.salesforce.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.salesforce.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.salesforce.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.salesforce.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.salesforce.</span>_accessTokenHttpMethod</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.salesforce.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.salesforce.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.salesforce.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.salesforce.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.salesforce.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.salesforce.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.salesforce.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.shopify">module everyauth.shopify</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.shopify._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.shopify.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.shopify._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.shopify.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.shopify.apiHost">
            function <span class="apidocSignatureSpan">everyauth.shopify.</span>apiHost
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.shopify.appId">
            function <span class="apidocSignatureSpan">everyauth.shopify.</span>appId
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.shopify.appSecret">
            function <span class="apidocSignatureSpan">everyauth.shopify.</span>appSecret
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.shopify.oauthHost">
            function <span class="apidocSignatureSpan">everyauth.shopify.</span>oauthHost
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.shopify.scope">
            function <span class="apidocSignatureSpan">everyauth.shopify.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.shopify.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.shopify.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.shopify.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.shopify.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.shopify.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.shopify.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.shopify.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.shopify.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.shopify.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.shopify.</span>_entryPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.skyrock">module everyauth.skyrock</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">everyauth.skyrock.</span>_sendCallbackWithAuthorize</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.skyrock._convertErr">
            function <span class="apidocSignatureSpan">everyauth.skyrock.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.skyrock._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.skyrock.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.skyrock.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.skyrock.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.skyrock.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.skyrock.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.skyrock.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.skyrock.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.skyrock.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.skyrock.</span>_authorizePath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.skyrock.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.skyrock.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.skyrock.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.skyrock.</span>_requestTokenPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.soundcloud">module everyauth.soundcloud</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.soundcloud._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.soundcloud.display">
            function <span class="apidocSignatureSpan">everyauth.soundcloud.</span>display
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.soundcloud.scope">
            function <span class="apidocSignatureSpan">everyauth.soundcloud.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.soundcloud.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.soundcloud.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.soundcloud.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_accessTokenHttpMethod</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_postAccessTokenParamsVia</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.step">module everyauth.step</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.step.step">
            function <span class="apidocSignatureSpan">everyauth.</span>step
            <span class="apidocSignatureSpan">(name, _module)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.step.prototype">module everyauth.step.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.step.prototype._unwrapArgs">
            function <span class="apidocSignatureSpan">everyauth.step.prototype.</span>_unwrapArgs
            <span class="apidocSignatureSpan">(seq)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.step.prototype.clone">
            function <span class="apidocSignatureSpan">everyauth.step.prototype.</span>clone
            <span class="apidocSignatureSpan">(name, _module)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.step.prototype.exec">
            function <span class="apidocSignatureSpan">everyauth.step.prototype.</span>exec
            <span class="apidocSignatureSpan">(seq)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.stepSequence">module everyauth.stepSequence</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stepSequence.stepSequence">
            function <span class="apidocSignatureSpan">everyauth.</span>stepSequence
            <span class="apidocSignatureSpan">(name, module)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.stepSequence.prototype">module everyauth.stepSequence.prototype</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>isSeq</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stepSequence.prototype._bind">
            function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>_bind
            <span class="apidocSignatureSpan">(priorPromise, nextStep)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stepSequence.prototype._transposeArgs">
            function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>_transposeArgs
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stepSequence.prototype.clone">
            function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>clone
            <span class="apidocSignatureSpan">(submodule)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stepSequence.prototype.materialize">
            function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>materialize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stepSequence.prototype.start">
            function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>start
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stepSequence.prototype.validateSteps">
            function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>validateSteps
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>_propertiesToMaterialize</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.stripe">module everyauth.stripe</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stripe._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.stripe.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stripe._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.stripe.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, authResponse)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stripe._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.stripe.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stripe._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.stripe.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stripe.landing">
            function <span class="apidocSignatureSpan">everyauth.stripe.</span>landing
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.stripe.scope">
            function <span class="apidocSignatureSpan">everyauth.stripe.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.stripe.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.stripe.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.stripe.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.stripe.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.stripe.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.stripe.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.stripe.</span>_accessTokenHttpMethod</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.stripe.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.stripe.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.stripe.</span>_authPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.stripe.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.stripe.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.stripe.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.tripit">module everyauth.tripit</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.tripit._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.tripit.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.tripit._convertErr">
            function <span class="apidocSignatureSpan">everyauth.tripit.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.tripit._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.tripit.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.tripit._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.tripit.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.tripit._redirectToProviderAuth">
            function <span class="apidocSignatureSpan">everyauth.tripit.</span>_redirectToProviderAuth
            <span class="apidocSignatureSpan">(res, token)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.tripit.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.tripit.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.tripit.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.tripit.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.tripit.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.tripit.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.tripit.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.tripit.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.tripit.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.tumblr">module everyauth.tumblr</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">everyauth.tumblr.</span>_sendCallbackWithAuthorize</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.tumblr._convertErr">
            function <span class="apidocSignatureSpan">everyauth.tumblr.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.tumblr._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.tumblr.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.tumblr.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.tumblr.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.tumblr.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.tumblr.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.tumblr.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.tumblr.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.tumblr.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.tumblr.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.tumblr.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.twitter">module everyauth.twitter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.twitter._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.twitter.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.twitter._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.twitter.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.twitter._handleAuthCallbackError">
            function <span class="apidocSignatureSpan">everyauth.twitter.</span>_handleAuthCallbackError
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.twitter._moduleErrback">
            function <span class="apidocSignatureSpan">everyauth.twitter.</span>_moduleErrback
            <span class="apidocSignatureSpan">(err, seqValues)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.twitter.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.twitter.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.twitter.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.twitter.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.twitter.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.twitter.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.twitter.</span>_authorizePath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.twitter.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.twitter.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.twitter.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.utils">module everyauth.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.utils.clone">
            function <span class="apidocSignatureSpan">everyauth.utils.</span>clone
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.utils.extractHostname">
            function <span class="apidocSignatureSpan">everyauth.utils.</span>extractHostname
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.utils.merge">
            function <span class="apidocSignatureSpan">everyauth.utils.</span>merge
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.vimeo">module everyauth.vimeo</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.vimeo._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.vimeo.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vimeo.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vimeo.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vimeo.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vimeo.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vimeo.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.vimeo.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.vimeo.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.vimeo.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.vimeo.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.vkontakte">module everyauth.vkontakte</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.vkontakte._authCallbackDidErr">
            function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_authCallbackDidErr
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.vkontakte._convertErr">
            function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_convertErr
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.vkontakte._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, http)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.vkontakte.display">
            function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>display
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.vkontakte.fields">
            function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>fields
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.vkontakte.scope">
            function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>scope
            <span class="apidocSignatureSpan">(setTo)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vkontakte.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vkontakte.</span>moreAccessTokenParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.vkontakte.</span>moreAuthQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_oauthHost</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.everyauth.yahoo">module everyauth.yahoo</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.yahoo._fetchOAuthUser">
            function <span class="apidocSignatureSpan">everyauth.yahoo.</span>_fetchOAuthUser
            <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.everyauth.yahoo.init">
            function <span class="apidocSignatureSpan">everyauth.yahoo.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.yahoo.</span>_configurable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.yahoo.</span>_stepSequences</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.yahoo.</span>_steps</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.yahoo.</span>cloneOnSubmodule</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">everyauth.yahoo.</span>moreRequestTokenQueryParams</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.yahoo.</span>_accessTokenPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.yahoo.</span>_apiHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.yahoo.</span>_authorizePath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.yahoo.</span>_callbackPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.yahoo.</span>_entryPath</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.yahoo.</span>_oauthHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">everyauth.yahoo.</span>_requestTokenPath</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth" id="apidoc.module.everyauth">module everyauth</a></h1>




    <h2>
        <a href="#apidoc.element.everyauth.addRequestGetter" id="apidoc.element.everyauth.addRequestGetter">
        function <span class="apidocSignatureSpan">everyauth.</span>addRequestGetter
        <span class="apidocSignatureSpan">(name, fn, isAsync)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addRequestGetter = function (name, fn, isAsync) {
  this._req._getters[name] = fn;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

everyauth
  .addRequestMethod(&#x27;logout&#x27;, function () {
    var req = this;
    delete req.session.auth;
  })
  .<span class="apidocCodeKeywordSpan">addRequestGetter</span>(&#x27;loggedIn&#x27;, function () {
    var req = this;
    return !!(req.session &#x26;&#x26; req.session.auth &#x26;&#x26; req.session.auth.loggedIn);
  });

everyauth.modules = {};
everyauth.enabled = {};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.addRequestMethod" id="apidoc.element.everyauth.addRequestMethod">
        function <span class="apidocSignatureSpan">everyauth.</span>addRequestMethod
        <span class="apidocSignatureSpan">(name, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addRequestMethod = function (name, fn) {
  this._req._methods[name] = fn;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

everyauth.addRequestGetter = function (name, fn, isAsync) {
this._req._getters[name] = fn;
return this;
};

everyauth
.<span class="apidocCodeKeywordSpan">addRequestMethod</span>(&#x27;logout&#x27;, function () {
  var req = this;
  delete req.session.auth;
})
.addRequestGetter(&#x27;loggedIn&#x27;, function () {
  var req = this;
  return !!(req.session &#x26;&#x26; req.session.auth &#x26;&#x26; req.session.auth.loggedIn);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.helpExpress" id="apidoc.element.everyauth.helpExpress">
        function <span class="apidocSignatureSpan">everyauth.</span>helpExpress
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">helpExpress = function () {
  console.warn(&#x27;everyauth.helpExpress is being deprecated. helpExpress is now automatically invoked when it detects express. So
remove everyauth.helpExpress from your code&#x27;);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
To enable them:

```javascript
var express = require(&#x27;express&#x27;)
  , everyauth = require(&#x27;everyauth&#x27;)
  , app = express.createServer();

everyauth.<span class="apidocCodeKeywordSpan">helpExpress</span>(app);
```

Then, from within your views, you will have access to the following helpers methods
attached to the helper, `everyauth`:

- `everyauth.loggedIn`
- `everyauth.user` - the User document associated with the session
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.middleware" id="apidoc.element.everyauth.middleware">
        function <span class="apidocSignatureSpan">everyauth.</span>middleware
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">middleware = function (opts) {
  opts = merge({
    autoSetupRoutes: true
  }, opts);
  var userAlias = everyauth.expressHelperUserAlias || &#x27;user&#x27;;
  var router = new ExpressRouter;

  if (opts.autoSetupRoutes) {
    var router = new ExpressRouter();
    var modules = everyauth.enabled;
    for (var _name in modules) {
      var _module = modules[_name];
      _module.validateSequences();
      _module.routeApp(router);
    }
  }

  return function (req, res, next) {
    fetchUserFromSession(req, function (err) {
      addRequestLocals(req, res, userAlias);
      registerReqGettersAndMethods(req);
      if (router) {
        router._dispatch(req, res, next);
      } else {
        next();
      }
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // Step 2 code
    var express = require(&#x27;express&#x27;);
    var app = express();
    app
      .use(express.bodyParser())
      .use(express.cookieParser(&#x27;mr ripley&#x27;))
      .use(express.session())
      .use(everyauth.<span class="apidocCodeKeywordSpan">middleware</span>(app));
    ```

## Example Application

There is an example application at [./example](https://github.com/bnoguchi/everyauth/tree/master/example)

To run it:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.promise" id="apidoc.element.everyauth.promise">
        function <span class="apidocSignatureSpan">everyauth.</span>promise
        <span class="apidocSignatureSpan">(_module, values)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">promise = function (_module, values) {
  if (values)
    Promise.call(this, values);
  else
    Promise.call(this);
  this.module = _module;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.routeTriggeredSequence" id="apidoc.element.everyauth.routeTriggeredSequence">
        function <span class="apidocSignatureSpan">everyauth.</span>routeTriggeredSequence
        <span class="apidocSignatureSpan">(name, _module)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RouteTriggeredSequence(name, _module) {
  StepSequence.call(this, name, _module);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.step" id="apidoc.element.everyauth.step">
        function <span class="apidocSignatureSpan">everyauth.</span>step
        <span class="apidocSignatureSpan">(name, _module)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Step(name, _module) {
  this.name = name;

  // defineProperty; otherwise,
  // clone will overflow when we clone a module
  Object.defineProperty(this, &#x27;module&#x27;, { value: _module });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Declares a GET route that is aliased
// as &#x27;entryPath&#x27;. The handler for this route
// triggers the series of steps that you see
// indented below it.
.get(&#x27;entryPath&#x27;,
     &#x27;the link a user follows, whereupon you redirect them to ACS url- e.g., &#x22;/auth/facebook&#x22;&#x27;)
  .<span class="apidocCodeKeywordSpan">step</span>(&#x27;redirectToIdentityProviderSelector&#x27;)
    .accepts(&#x27;req res next&#x27;)
    .promises(null)

.post(&#x27;callbackPath&#x27;,
     &#x27;the callback path that the ACS redirects to after an authorization result - e.g., &#x22;/auth/facebook/callback&#x22;&#
x27;)
  .step(&#x27;getToken&#x27;)
    .description(&#x27;retrieves a verifier code from the url query&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stepSequence" id="apidoc.element.everyauth.stepSequence">
        function <span class="apidocSignatureSpan">everyauth.</span>stepSequence
        <span class="apidocSignatureSpan">(name, module)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StepSequence(name, module) {
  this.name = name;
  this.module = module;
  this.orderedStepNames = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






































































































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.37signals" id="apidoc.module.everyauth.37signals">module everyauth.37signals</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.37signals._fetchOAuthUser" id="apidoc.element.everyauth.37signals._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.37signals.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/authorization.json&#x27;, accessToken, function (err, data) {
    if (err) return p.fail(err);
    var oauthUser = JSON.parse(data);
    p.fulfill(oauthUser);
  })
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.37signals._moduleErrback" id="apidoc.element.everyauth.37signals._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.37signals.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var _37sigResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        _37sigResponse.statusCode
      , _37sigResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.37signals.scope" id="apidoc.element.everyauth.37signals.scope">
        function <span class="apidocSignatureSpan">everyauth.37signals.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.500px" id="apidoc.module.everyauth.500px">module everyauth.500px</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.500px._fetchOAuthUser" id="apidoc.element.everyauth.500px._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.500px.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/users&#x27;, accessToken, accessTokenSecret, function (err, data) {
    if (err) { return p.fail(err); }
    var oauthUser = JSON.parse(data);
    p.fulfill(oauthUser);
  });
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.angellist" id="apidoc.module.everyauth.angellist">module everyauth.angellist</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.angellist._fetchOAuthUser" id="apidoc.element.everyauth.angellist._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.angellist.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/me&#x27;, accessToken, function (err, data) {
    if (err) return p.fail(err);
    var oauthUser = JSON.parse(data);
    p.fulfill(oauthUser);
  })
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.angellist._moduleErrback" id="apidoc.element.everyauth.angellist._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.angellist.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var angellistResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        angellistResponse.statusCode
      , angellistResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.angellist.scope" id="apidoc.element.everyauth.angellist.scope">
        function <span class="apidocSignatureSpan">everyauth.angellist.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.azureacs" id="apidoc.module.everyauth.azureacs">module everyauth.azureacs</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.azureacs._addToSession" id="apidoc.element.everyauth.azureacs._addToSession">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_addToSession
        <span class="apidocSignatureSpan">(sess, acsUser, token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addToSession = function (sess, acsUser, token) {
  var _auth = sess.auth || (sess.auth = {})
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs._authCallbackDidErr" id="apidoc.element.everyauth.azureacs._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs._fetchUser" id="apidoc.element.everyauth.azureacs._fetchUser">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_fetchUser
        <span class="apidocSignatureSpan">(claims)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchUser = function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs._getSession" id="apidoc.element.everyauth.azureacs._getSession">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_getSession
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getSession = function (req) {
  return req.session;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs._getToken" id="apidoc.element.everyauth.azureacs._getToken">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_getToken
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getToken = function (req, res) {
  var token = this.wsfederation.extractToken(res);

  if (this.tokenFormat() === &#x27;swt&#x27;) {
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this._authCallbackDidErr(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs._handleAuthCallbackError" id="apidoc.element.everyauth.azureacs._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  throw new Error(&#x22;Authorization Error&#x22;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs._handleNotValidTokenCallbackError" id="apidoc.element.everyauth.azureacs._handleNotValidTokenCallbackError">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_handleNotValidTokenCallbackError
        <span class="apidocSignatureSpan">(token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleNotValidTokenCallbackError = function (token) {
  throw new Error(&#x22;The token received is NOT valid&#x22;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs._handleProtocolNotImplementedError" id="apidoc.element.everyauth.azureacs._handleProtocolNotImplementedError">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_handleProtocolNotImplementedError
        <span class="apidocSignatureSpan">(tokenFormat)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleProtocolNotImplementedError = function (tokenFormat) {
  throw new Error(&#x22;The protocol specified is not implemented. Token format:&#x22; +tokenFormat);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs._parseToken" id="apidoc.element.everyauth.azureacs._parseToken">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_parseToken
        <span class="apidocSignatureSpan">(token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseToken = function (token) {
  if (this.tokenFormat() === &#x27;swt&#x27;) {
    var swt = new Swt(token);
    if (!swt.isValid(token, this.realm(), this.signingKey())) {
      return this.breakTo(&#x27;notValidTokenCallbackErrorSteps&#x27;, token);
    }
    return swt.claims;
  }

  return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs._redirectToIdentityProviderSelector" id="apidoc.element.everyauth.azureacs._redirectToIdentityProviderSelector">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_redirectToIdentityProviderSelector
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_redirectToIdentityProviderSelector = function (req, res) {
  var identityProviderSelectorUri = this.wsfederation.getRequestSecurityTokenUrl();
  this.redirect(res, identityProviderSelectorUri);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs._sendResponse" id="apidoc.element.everyauth.azureacs._sendResponse">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>_sendResponse
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sendResponse = function (res) {
  var redirectTo = this.redirectPath();
  if (!redirectTo)
    throw new Error(&#x27;You must configure a redirectPath&#x27;);
  this.redirect(res, redirectTo);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.addToSession" id="apidoc.element.everyauth.azureacs.addToSession">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>addToSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addToSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
})

.<span class="apidocCodeKeywordSpan">addToSession</span>( function (sess, acsUser, token) {
  var _auth = sess.auth || (sess.auth = {})
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.authCallbackDidErr" id="apidoc.element.everyauth.azureacs.authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>authCallbackDidErr
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authCallbackDidErr = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 .sendResponse( function (res) {
   var redirectTo = this.redirectPath();
   if (!redirectTo)
     throw new Error(&#x27;You must configure a redirectPath&#x27;);
   this.redirect(res, redirectTo);
 })

 .<span class="apidocCodeKeywordSpan">authCallbackDidErr</span>( function (req) {
   var parsedUrl = url.parse(req.url, true);
   return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
 })

.handleNotValidTokenCallbackError( function (token) {
   throw new Error(&#x22;The token received is NOT valid&#x22;);
 })
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.authCallbackErrorSteps" id="apidoc.element.everyauth.azureacs.authCallbackErrorSteps">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>authCallbackErrorSteps
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authCallbackErrorSteps = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.callbackPath" id="apidoc.element.everyauth.azureacs.callbackPath">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>callbackPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">callbackPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .<span class="apidocCodeKeywordSpan">callbackPath</span>(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.entryPath" id="apidoc.element.everyauth.azureacs.entryPath">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>entryPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">entryPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .<span class="apidocCodeKeywordSpan">entryPath</span>(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.fetchUser" id="apidoc.element.everyauth.azureacs.fetchUser">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>fetchUser
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fetchUser = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
})

.getSession( function (req) {
  return req.session;
})

.<span class="apidocCodeKeywordSpan">fetchUser</span>( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
})

.addToSession( function (sess, acsUser, token) {
  var _auth = sess.auth || (sess.auth = {})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.findOrCreateUser" id="apidoc.element.everyauth.azureacs.findOrCreateUser">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>findOrCreateUser
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findOrCreateUser = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // If a user denies your app, Facebook will redirect the user to
    // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
    // This configurable route handler defines how you want to respond to
    // that.
    // If you do not configure this, everyauth renders a default fallback
    // view notifying the user that their authentication failed and why.
  })
  .<span class="apidocCodeKeywordSpan">findOrCreateUser</span>( function (session, accessToken, accessTokExtra, fbUserMetadata) {
    // find or create user logic goes here
  })
  .redirectPath(&#x27;/&#x27;);

var routes = function (app) {
  // Define your routes here
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.getSession" id="apidoc.element.everyauth.azureacs.getSession">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>getSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    return swt.claims;
  }

  return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
})

.<span class="apidocCodeKeywordSpan">getSession</span>( function (req) {
  return req.session;
})

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.getToken" id="apidoc.element.everyauth.azureacs.getToken">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>getToken
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getToken = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    .promises(null)

  .redirectToIdentityProviderSelector( function (req, res) {
var identityProviderSelectorUri = this.wsfederation.getRequestSecurityTokenUrl();
this.redirect(res, identityProviderSelectorUri);
  })

  .<span class="apidocCodeKeywordSpan">getToken</span>( function (req, res) {
var token = this.wsfederation.extractToken(res);

if (this.tokenFormat() === &#x27;swt&#x27;) {
  var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
  var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
}
else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.handleAuthCallbackError" id="apidoc.element.everyauth.azureacs.handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>handleAuthCallbackError
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleAuthCallbackError = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.facebook
.appId(&#x27;YOUR APP ID HERE&#x27;)
.appSecret(&#x27;YOUR APP SECRET HERE&#x27;)
.<span class="apidocCodeKeywordSpan">handleAuthCallbackError</span>( function (req, res) {
  // If a user denies your app, Facebook will redirect the user to
  // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
  // This configurable route handler defines how you want to respond to
  // that.
  // If you do not configure this, everyauth renders a default fallback
  // view notifying the user that their authentication failed and why.
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.handleNotValidTokenCallbackError" id="apidoc.element.everyauth.azureacs.handleNotValidTokenCallbackError">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>handleNotValidTokenCallbackError
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleNotValidTokenCallbackError = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
})

.authCallbackDidErr( function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
})

 .<span class="apidocCodeKeywordSpan">handleNotValidTokenCallbackError</span>( function (token) {
  throw new Error(&#x22;The token received is NOT valid&#x22;);
})

.handleAuthCallbackError( function (req, res) {
  throw new Error(&#x22;Authorization Error&#x22;);
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.handleProtocolNotImplementedError" id="apidoc.element.everyauth.azureacs.handleProtocolNotImplementedError">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>handleProtocolNotImplementedError
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleProtocolNotImplementedError = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  throw new Error(&#x22;The token received is NOT valid&#x22;);
})

.handleAuthCallbackError( function (req, res) {
  throw new Error(&#x22;Authorization Error&#x22;);
})

.<span class="apidocCodeKeywordSpan">handleProtocolNotImplementedError</span>( function (tokenFormat) {
  throw new Error(&#x22;The protocol specified is not implemented. Token format:&#x22; +tokenFormat);
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.homeRealm" id="apidoc.element.everyauth.azureacs.homeRealm">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>homeRealm
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">homeRealm = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

everyauth.azureacs
.identityProviderUrl(&#x27;https://YOURNAMESPACE.accesscontrol.windows.net/v2/wsfederation/&#x27;)
.entryPath(&#x27;/auth/azureacs&#x27;)
.callbackPath(&#x27;/auth/azureacs/callback&#x27;)
.signingKey(&#x27;d0jul....YOUR_SIGNINGK=_KEY......OEvz24=&#x27;)
.realm(&#x27;YOUR_APPLICATION_REALM_IDENTIFIER&#x27;)
.<span class="apidocCodeKeywordSpan">homeRealm</span>(&#x27;&#x27;) // if you want to use a default idp (like google/liveid)
.tokenFormat(&#x27;swt&#x27;)  // only swt supported for now
.findOrCreateUser( function (session, acsUser) {
   // you could enrich the &#x22;user&#x22; entity by storing/fetching the user from a db
  return null;
});
.redirectPath(&#x27;/&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.identityProviderUrl" id="apidoc.element.everyauth.azureacs.identityProviderUrl">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>identityProviderUrl
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">identityProviderUrl = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You will need to create a [Windows Azure ACS namespace](http://msdn.microsoft.com/en-us/library/windowsazure/hh674478.aspx). The
 only caveat when creating the namespace is setting the &#x22;Return URL&#x22;. You will probably [create one Relying Party](http
://msdn.microsoft.com/en-us/library/windowsazure/gg429779.aspx) for each environment (dev, qa, prod) and each of them will have
a different &#x22;Return URL&#x22;. For instance, dev will be `http://localhost:port/auth/azureacs/callback` and prod could be `
https://myapp.com/auth/azureacs/callback` (notice the `/auth/azureacs/callback`, that&#x27;s where the module will listen the POST
 with the token from ACS)

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
  , connect = require(&#x27;connect&#x27;);

everyauth.azureacs
.<span class="apidocCodeKeywordSpan">identityProviderUrl</span>(&#x27;https://YOURNAMESPACE.accesscontrol.windows.net/v2/wsfederation
/&#x27;)
.entryPath(&#x27;/auth/azureacs&#x27;)
.callbackPath(&#x27;/auth/azureacs/callback&#x27;)
.signingKey(&#x27;d0jul....YOUR_SIGNINGK=_KEY......OEvz24=&#x27;)
.realm(&#x27;YOUR_APPLICATION_REALM_IDENTIFIER&#x27;)
.homeRealm(&#x27;&#x27;) // if you want to use a default idp (like google/liveid)
.tokenFormat(&#x27;swt&#x27;)  // only swt supported for now
.findOrCreateUser( function (session, acsUser) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.init" id="apidoc.element.everyauth.azureacs.init">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function init() {
  this._super = _super;
  fn.apply(this, arguments);
  delete this._super;

  // Do module compilation here, too
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var seqName in seqs) {
  seqs[seqName].validateSteps();
}
};

// Decorates the app with the routes required of the module
EveryModule.prototype.routeApp = function (router) {
if (this.init) this.<span class="apidocCodeKeywordSpan">init</span>();
var routes = this._routes;
var methods = [&#x27;get&#x27;, &#x27;post&#x27;];
for (var method in routes) {
  for (var routeAlias in routes[method]) {
    var middleware = this._middleware[routeAlias];
    if (middleware) continue;
    var path = this[routeAlias]();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.notValidTokenCallbackErrorSteps" id="apidoc.element.everyauth.azureacs.notValidTokenCallbackErrorSteps">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>notValidTokenCallbackErrorSteps
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">notValidTokenCallbackErrorSteps = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.parseToken" id="apidoc.element.everyauth.azureacs.parseToken">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>parseToken
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseToken = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (this._authCallbackDidErr(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.<span class="apidocCodeKeywordSpan">parseToken</span>( function (token) {
  if (this.tokenFormat() === &#x27;swt&#x27;) {
    var swt = new Swt(token);
    if (!swt.isValid(token, this.realm(), this.signingKey())) {
      return this.breakTo(&#x27;notValidTokenCallbackErrorSteps&#x27;, token);
    }
    return swt.claims;
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.protocolNotImplementedErrorSteps" id="apidoc.element.everyauth.azureacs.protocolNotImplementedErrorSteps">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>protocolNotImplementedErrorSteps
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">protocolNotImplementedErrorSteps = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.realm" id="apidoc.element.everyauth.azureacs.realm">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>realm
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">realm = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  , connect = require(&#x27;connect&#x27;);

everyauth.azureacs
.identityProviderUrl(&#x27;https://YOURNAMESPACE.accesscontrol.windows.net/v2/wsfederation/&#x27;)
.entryPath(&#x27;/auth/azureacs&#x27;)
.callbackPath(&#x27;/auth/azureacs/callback&#x27;)
.signingKey(&#x27;d0jul....YOUR_SIGNINGK=_KEY......OEvz24=&#x27;)
.<span class="apidocCodeKeywordSpan">realm</span>(&#x27;YOUR_APPLICATION_REALM_IDENTIFIER&#x27;)
.homeRealm(&#x27;&#x27;) // if you want to use a default idp (like google/liveid)
.tokenFormat(&#x27;swt&#x27;)  // only swt supported for now
.findOrCreateUser( function (session, acsUser) {
   // you could enrich the &#x22;user&#x22; entity by storing/fetching the user from a db
  return null;
});
.redirectPath(&#x27;/&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.redirectPath" id="apidoc.element.everyauth.azureacs.redirectPath">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>redirectPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">redirectPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// that.
// If you do not configure this, everyauth renders a default fallback
// view notifying the user that their authentication failed and why.
  })
  .findOrCreateUser( function (session, accessToken, accessTokExtra, fbUserMetadata) {
// find or create user logic goes here
  })
  .<span class="apidocCodeKeywordSpan">redirectPath</span>(&#x27;/&#x27;);

var routes = function (app) {
  // Define your routes here
};

connect(
connect.bodyParser()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.redirectToIdentityProviderSelector" id="apidoc.element.everyauth.azureacs.redirectToIdentityProviderSelector">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>redirectToIdentityProviderSelector
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">redirectToIdentityProviderSelector = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

.stepseq(&#x27;notValidTokenCallbackErrorSteps&#x27;)
    .step(&#x27;handleNotValidTokenCallbackError&#x27;,
         &#x27;the token is not valid&#x22;&#x27;)
      .accepts(&#x27;token&#x27;)
      .promises(null)

.<span class="apidocCodeKeywordSpan">redirectToIdentityProviderSelector</span>( function (req, res) {
  var identityProviderSelectorUri = this.wsfederation.getRequestSecurityTokenUrl();
  this.redirect(res, identityProviderSelectorUri);
})

.getToken( function (req, res) {
  var token = this.wsfederation.extractToken(res);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.sendResponse" id="apidoc.element.everyauth.azureacs.sendResponse">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>sendResponse
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendResponse = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
})

.<span class="apidocCodeKeywordSpan">sendResponse</span>( function (res) {
  var redirectTo = this.redirectPath();
  if (!redirectTo)
    throw new Error(&#x27;You must configure a redirectPath&#x27;);
  this.redirect(res, redirectTo);
})

.authCallbackDidErr( function (req) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.signingKey" id="apidoc.element.everyauth.azureacs.signingKey">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>signingKey
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">signingKey = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var everyauth = require(&#x27;everyauth&#x27;)
  , connect = require(&#x27;connect&#x27;);

everyauth.azureacs
.identityProviderUrl(&#x27;https://YOURNAMESPACE.accesscontrol.windows.net/v2/wsfederation/&#x27;)
.entryPath(&#x27;/auth/azureacs&#x27;)
.callbackPath(&#x27;/auth/azureacs/callback&#x27;)
.<span class="apidocCodeKeywordSpan">signingKey</span>(&#x27;d0jul....YOUR_SIGNINGK=_KEY......OEvz24=&#x27;)
.realm(&#x27;YOUR_APPLICATION_REALM_IDENTIFIER&#x27;)
.homeRealm(&#x27;&#x27;) // if you want to use a default idp (like google/liveid)
.tokenFormat(&#x27;swt&#x27;)  // only swt supported for now
.findOrCreateUser( function (session, acsUser) {
   // you could enrich the &#x22;user&#x22; entity by storing/fetching the user from a db
  return null;
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.azureacs.tokenFormat" id="apidoc.element.everyauth.azureacs.tokenFormat">
        function <span class="apidocSignatureSpan">everyauth.azureacs.</span>tokenFormat
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tokenFormat = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
everyauth.azureacs
.identityProviderUrl(&#x27;https://YOURNAMESPACE.accesscontrol.windows.net/v2/wsfederation/&#x27;)
.entryPath(&#x27;/auth/azureacs&#x27;)
.callbackPath(&#x27;/auth/azureacs/callback&#x27;)
.signingKey(&#x27;d0jul....YOUR_SIGNINGK=_KEY......OEvz24=&#x27;)
.realm(&#x27;YOUR_APPLICATION_REALM_IDENTIFIER&#x27;)
.homeRealm(&#x27;&#x27;) // if you want to use a default idp (like google/liveid)
.<span class="apidocCodeKeywordSpan">tokenFormat</span>(&#x27;swt&#x27;)  // only swt supported for now
.findOrCreateUser( function (session, acsUser) {
   // you could enrich the &#x22;user&#x22; entity by storing/fetching the user from a db
  return null;
});
.redirectPath(&#x27;/&#x27;);
...</pre></li>
    </ul>














</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.box" id="apidoc.module.everyauth.box">module everyauth.box</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.box._fetchOAuthUser" id="apidoc.element.everyauth.box._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.box.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
    var promise = this.Promise();
    request.get({
        url: this.apiHost() + &#x27;/users/me&#x27;
        , headers: { Authorization: &#x22;Bearer &#x22; + accessToken }
    }, function (err, res, body) {
        if (err) {
            err.extra = {res: res, data: body};
            return promise.fail(err);
        }
        if (parseInt(res.statusCode/100, 10) !== 2) {
            return promise.fail({extra: {data: body, res: res}});
        }
        var oauthUser = JSON.parse(body);
        return promise.fulfill(oauthUser);
    });
    return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.box._moduleErrback" id="apidoc.element.everyauth.box._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.box.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
    if (err instanceof Error) {
        var next = seqValues.next;
        return next(err);
    } else if (err.extra) {
        var ghResponse = err.extra.res
            , serverResponse = seqValues.res;
        serverResponse.writeHead(
            ghResponse.statusCode
            , ghResponse.headers);
        serverResponse.end(err.extra.data);
    } else if (err.statusCode) {
        var serverResponse = seqValues.res;
        serverResponse.writeHead(err.statusCode);
        serverResponse.end(err.data);
    } else {
        console.error(err);
        throw new Error(&#x27;Unsupported error type&#x27;);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.box.scope" id="apidoc.element.everyauth.box.scope">
        function <span class="apidocSignatureSpan">everyauth.box.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.box2" id="apidoc.module.everyauth.box2">module everyauth.box2</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.box2._authCallbackDidErr" id="apidoc.element.everyauth.box2._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.box2.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.box2._fetchOAuthUser" id="apidoc.element.everyauth.box2._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.box2.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var p = this.Promise();

  request.get({
    url: this.apiHost() + &#x27;/2.0/users/me&#x27;,
    headers: {&#x27;Authorization&#x27;: &#x27;Bearer &#x27; + accessToken}
  }, function(err, res, body){
    if(err) {
      return p.fail(err);
    } else {
      if(parseInt(res.statusCode/100,10) !==2){
        return p.fail({extra:{data:body, res: res}});
      }
      p.fulfill(JSON.parse(body));
    }
  });

  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.box2._handleAuthCallbackError" id="apidoc.element.everyauth.box2._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.box2.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  var parsedUrl = url.parse(req.url, true),
      errorDesc = parsedUrl.query.error + &#x22;; &#x22; + parsedUrl.query.error_description;
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: errorDesc
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.box2._moduleErrback" id="apidoc.element.everyauth.box2._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.box2.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var box2Response = err.extra.res,
        serverResponse = seqValues.res;
    serverResponse.writeHead(
        box2Response.statusCode,
        box2Response.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.dropbox" id="apidoc.module.everyauth.dropbox">module everyauth.dropbox</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.dropbox._authCallbackDidErr" id="apidoc.element.everyauth.dropbox._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.dropbox.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.not_approved;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.dropbox._fetchOAuthUser" id="apidoc.element.everyauth.dropbox._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.dropbox.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/account/info&#x27;, accessToken, accessTokenSecret, function (err, data) {
    if (err) return p.fail(err);
    var oauthUser = JSON.parse(data);
    oauthUser.id = oauthUser.uid;
    p.fulfill(oauthUser);
  });
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.dropbox._handleAuthCallbackError" id="apidoc.element.everyauth.dropbox._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.dropbox.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  var parsedUrl = url.parse(req.url, true),
      errorDesc = parsedUrl.query.error + &#x22;; &#x22; + parsedUrl.query.error_description;
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: errorDesc
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.dropbox._moduleErrback" id="apidoc.element.everyauth.dropbox._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.dropbox.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var dropboxResponse = err.extra.res,
        serverResponse = seqValues.res;
    serverResponse.writeHead(
        dropboxResponse.statusCode,
        dropboxResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>




















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.dwolla" id="apidoc.module.everyauth.dwolla">module everyauth.dwolla</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.dwolla._fetchOAuthUser" id="apidoc.element.everyauth.dwolla._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.dwolla.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var promise = this.Promise();
  request.get({
      url: this.apiHost() + &#x27;/users&#x27;
    , qs: { oauth_token: accessToken, alt: &#x27;json&#x27; }
  }, function (err, res, body) {
    if (err) {
      err.extra = {res: res, data: body};
      return promise.fail(err);
    }
    if (parseInt(res.statusCode/100, 10) !== 2) {
      return promise.fail({extra: {data: body, res: res}});
    }
    var oauthUser = JSON.parse(body).Response;
    return promise.fulfill(oauthUser);
  });

  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.dwolla._moduleErrback" id="apidoc.element.everyauth.dwolla._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.dwolla.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var dwollaResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        dwollaResponse.statusCode
      , dwollaResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.dwolla.scope" id="apidoc.element.everyauth.dwolla.scope">
        function <span class="apidocSignatureSpan">everyauth.dwolla.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.evernote" id="apidoc.module.everyauth.evernote">module everyauth.evernote</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.evernote._fetchOAuthUser" id="apidoc.element.everyauth.evernote._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.evernote.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var oauthUser = {
    shardId: params.edam_shard
  , userId: parseInt(params.edam_userId, 10)
  };
  accessToken.split(&#x27;:&#x27;).forEach(function(item) {
    item = item.split(&#x27;=&#x27;);
    if (item[0] === &#x27;A&#x27;) {
      oauthUser[&#x27;username&#x27;] = item[1];
    }
  });
  return oauthUser;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.everymodule" id="apidoc.module.everyauth.everymodule">module everyauth.everymodule</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.everymodule._handleLogout" id="apidoc.element.everyauth.everymodule._handleLogout">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>_handleLogout
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleLogout = function (req, res) {
  req.logout();
  this.redirect(res, this.logoutRedirectPath());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.everymodule._moduleErrback" id="apidoc.element.everyauth.everymodule._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (! (err instanceof Error)) {
    console.log(&#x27;Warning: Try to pass only Errors&#x27;);
    err = new Error(JSON.stringify(err));
  }
  var next = seqValues.next;
  next(err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.everymodule._performRedirect" id="apidoc.element.everyauth.everymodule._performRedirect">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>_performRedirect
        <span class="apidocSignatureSpan">(res, location)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_performRedirect = function (res, location) {
  res.writeHead(303, { &#x27;Location&#x27;: location });
  res.end();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  seq = seq.materialize();
  seq.initialArgs = args;
  throw seq;
};


EveryModule.prototype.redirect = function (req, location) {
  this.<span class="apidocCodeKeywordSpan">_performRedirect</span>(req, location);
};

var routeDescPrefix = {
    get: &#x27;ROUTE (GET)&#x27;
  , post: &#x27;ROUTE (POST)&#x27;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.everymodule.findUserById" id="apidoc.element.everyauth.everymodule.findUserById">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>findUserById
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findUserById = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- `user` as a helper accessible from your `express` views

To access the user, configure `everyauth.everymodule.findUserById` and
optionally `everyauth.everymodule.userPkey`.
For example, using [mongoose](http://github.com/LearnBoost/mongoose):

```javascript
everyauth.everymodule.<span class="apidocCodeKeywordSpan">findUserById</span>( function (userId, callback) {
  User.findById(userId, callback);
  // callback has the signature, function (err, user) {...}
});
```

If you need access to the request object the function can have three arguments:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.everymodule.handleLogout" id="apidoc.element.everyauth.everymodule.handleLogout">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>handleLogout
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleLogout = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
everyauth.everymodule.logoutRedirectPath(&#x27;/navigate/to/after/logout&#x27;);
```

To over-write the logout handler:

```javascript
everyauth.everymodule.<span class="apidocCodeKeywordSpan">handleLogout</span>( function (req, res) {
// Put you extra logic here

req.logout(); // The logout method is added for you by everyauth, too

// And/or put your extra logic here

this.redirect(res, this.logoutRedirectPath());
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.everymodule.logoutPath" id="apidoc.element.everyauth.everymodule.logoutPath">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>logoutPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logoutPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
sets up a `logoutPath` at `GET` `/logout` for your app. It also
sets a default handler for your logout route that clears your session
of auth information and redirects them to &#x27;/&#x27;.

To over-write the logout path:

```javascript
everyauth.everymodule.<span class="apidocCodeKeywordSpan">logoutPath</span>(&#x27;/bye&#x27;);
```

To over-write the logout redirect path:

```javascript
everyauth.everymodule.logoutRedirectPath(&#x27;/navigate/to/after/logout&#x27;);
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.everymodule.logoutRedirectPath" id="apidoc.element.everyauth.everymodule.logoutRedirectPath">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>logoutRedirectPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logoutRedirectPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
everyauth.everymodule.logoutPath(&#x27;/bye&#x27;);
```

To over-write the logout redirect path:

```javascript
everyauth.everymodule.<span class="apidocCodeKeywordSpan">logoutRedirectPath</span>(&#x27;/navigate/to/after/logout&#x27;);
```

To over-write the logout handler:

```javascript
everyauth.everymodule.handleLogout( function (req, res) {
// Put you extra logic here
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.everymodule.moduleErrback" id="apidoc.element.everyauth.everymodule.moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>moduleErrback
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">moduleErrback = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
By default, all modules handle errors by throwing them. That said, `everyauth` allows
you to over-ride this behavior.

You can configure error handling at the module and step level. To handle *all*
errors in the same manner across all auth modules that you use, do the following.

```javascript
everyauth.everymodule.<span class="apidocCodeKeywordSpan">moduleErrback</span>( function (err) {
  // Do something with the err -- e.g., log it, throw it
});
```

You can also configure your error handling on a per module basis. So, for example, if
you want to handle errors during the Facebook module differently than in other modules:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.everymodule.moduleTimeout" id="apidoc.element.everyauth.everymodule.moduleTimeout">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>moduleTimeout
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">moduleTimeout = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Every configuration parameter corresponds to a method of the same name
on the auth module under consideration (i.e., in this case
`ea.facebook`). To create or over-write that parameter, just
call that method with the new value as the argument:

```javascript
ea.facebook
  .<span class="apidocCodeKeywordSpan">moduleTimeout</span>( 4000 ); // Wait 4 seconds before timing out any step
                          // involved in the facebook auth process
```

Configuration parameters can be scalars. But they can be anything. For
example, they can also be functions, too. The facebook module has a
configurable step named `findOrCreateUser` that is described as
&#x22;STEP FN [findOrCreateUser] function encapsulating the logic for the step
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.everymodule.performRedirect" id="apidoc.element.everyauth.everymodule.performRedirect">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>performRedirect
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">performRedirect = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

If you are using express and want your redirects to be subject to [express
redirect mapping](http://expressjs.com/guide.html#res.redirect\(\)), you can
overwrite redirect method employed by everyauth.

```javascript
everyauth.everymodule
  .<span class="apidocCodeKeywordSpan">performRedirect</span>( function (res, location) {
    res.redirect(location, 303);
  });
```

A newly defined method will be used by everyauth to perform all redirects.

# Auth Strategy Instructions
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.everymodule.userPkey" id="apidoc.element.everyauth.everymodule.userPkey">
        function <span class="apidocSignatureSpan">everyauth.everymodule.</span>userPkey
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">userPkey = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    #user-id= user.id

`everyauth` assumes that you store your users with an `id` property. If not --
e.g, if you adopt the convention `user.uid` over `user.id` -- then just make
sure to configure the `everyauth.everymodule.userPkey` parameter:

```javascript
everyauth.everymodule.<span class="apidocCodeKeywordSpan">userPkey</span>(&#x27;uid&#x27;);
```

## Express Helpers

If you are using express, everyauth comes with some useful dynamic helpers.
To enable them:
...</pre></li>
    </ul>
























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.facebook" id="apidoc.module.everyauth.facebook">module everyauth.facebook</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.facebook._authCallbackDidErr" id="apidoc.element.everyauth.facebook._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.facebook.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.facebook._fetchOAuthUser" id="apidoc.element.everyauth.facebook._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.facebook.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var p = this.Promise();
  var fieldsQuery = &#x22;&#x22;;
  if (this._fields &#x26;&#x26; this._fields.length &#x3e; 0){
      fieldsQuery = &#x22;?fields=&#x22; + this.fields();
  }
  this.oauth.get(this.apiHost() + &#x27;/me&#x27; + fieldsQuery, accessToken, function (err, data) {
    if (err) return p.fail(err);
    var oauthUser = JSON.parse(data);
    p.fulfill(oauthUser);
  })
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.facebook._handleAuthCallbackError" id="apidoc.element.everyauth.facebook._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.facebook.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  var parsedUrl = url.parse(req.url, true)
    , errorDesc = parsedUrl.query.error_description;
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: errorDesc
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.facebook._moduleErrback" id="apidoc.element.everyauth.facebook._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.facebook.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var facebookResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        facebookResponse.statusCode
      , facebookResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.facebook.fields" id="apidoc.element.everyauth.facebook.fields">
        function <span class="apidocSignatureSpan">everyauth.facebook.</span>fields
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fields = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .<span class="apidocCodeKeywordSpan">fields</span>(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults
 to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
everyauth.facebook.scope(); // undefined
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.facebook.mobile" id="apidoc.element.everyauth.facebook.mobile">
        function <span class="apidocSignatureSpan">everyauth.facebook.</span>mobile
        <span class="apidocSignatureSpan">(isMobile)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mobile = function (isMobile) {
  if (isMobile) {
    this.authPath(&#x27;https://m.facebook.com/v2.0/dialog/oauth&#x27;);
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Facebook Mobile OAuth Dialog
If you are programming for mobile, you can bring up the facebook mobile OAuth
dialog instead of the traditional desktop browser-based one by just adding
`mobile(true)` to your configuration as seen here:

```javascript
everyauth.facebook
  .<span class="apidocCodeKeywordSpan">mobile</span>(true)
  .appId(&#x27;YOUR APP ID HERE&#x27;)
  .appSecret(&#x27;YOUR APP SECRET HERE&#x27;)
  // rest of configuration
```

## Twitter OAuth
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.facebook.popup" id="apidoc.element.everyauth.facebook.popup">
        function <span class="apidocSignatureSpan">everyauth.facebook.</span>popup
        <span class="apidocSignatureSpan">(isPopup)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">popup = function (isPopup) {
  if (isPopup) {
    this.authQueryParam(&#x27;display&#x27;, &#x27;popup&#x27;);
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.facebook.scope" id="apidoc.element.everyauth.facebook.scope">
        function <span class="apidocSignatureSpan">everyauth.facebook.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>
























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.foursquare" id="apidoc.module.everyauth.foursquare">module everyauth.foursquare</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.foursquare._fetchOAuthUser" id="apidoc.element.everyauth.foursquare._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.foursquare.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var promise = this.Promise()
    , userUrl = this.apiHost() + &#x27;/users/self&#x27;
    , queryParams = { oauth_token: accessToken, v: &#x27;20131201&#x27; }
  request.get({ url: userUrl, qs: queryParams}, function (err, res, body) {
    if (err) {
      err.extra = {res: res, data: body};
      return promise.fail(err);
    }
    if (parseInt(res.statusCode/100, 10) !== 2) {
      return promise.fail({extra: {data: body, res: res}});
    }
    var oauthUser = JSON.parse(body).response.user;
    return promise.fulfill(oauthUser);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.foursquare._moduleErrback" id="apidoc.element.everyauth.foursquare._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.foursquare.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var foursquareResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        foursquareResponse.statusCode
      , foursquareResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.github" id="apidoc.module.everyauth.github">module everyauth.github</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.github._authCallbackDidErr" id="apidoc.element.everyauth.github._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.github.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.github._fetchOAuthUser" id="apidoc.element.everyauth.github._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.github.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/user&#x27;, accessToken, function (err, data) {
    if (err) return p.fail(err);
    var oauthUser = JSON.parse(data);
    p.fulfill(oauthUser);
  });
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.github._handleAuthCallbackError" id="apidoc.element.everyauth.github._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.github.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  var parsedUrl = url.parse(req.url, true),
      errorDesc = parsedUrl.query.error + &#x22;; &#x22; + parsedUrl.query.error_description;
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: errorDesc
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.github._moduleErrback" id="apidoc.element.everyauth.github._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.github.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var ghResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        ghResponse.statusCode
      , ghResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.github.scope" id="apidoc.element.everyauth.github.scope">
        function <span class="apidocSignatureSpan">everyauth.github.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.google" id="apidoc.module.everyauth.google">module everyauth.google</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.google._addToSession" id="apidoc.element.everyauth.google._addToSession">
        function <span class="apidocSignatureSpan">everyauth.google.</span>_addToSession
        <span class="apidocSignatureSpan">(sess, auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addToSession = function (sess, auth) {
  this._super(sess, auth);
  if (auth.refresh_token) {
    sess.auth[this.name].refreshToken = auth.refresh_token;
    sess.auth[this.name].expiresInSeconds = parseInt(auth.expires_in, 10);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.google._authCallbackDidErr" id="apidoc.element.everyauth.google._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.google.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.google._fetchOAuthUser" id="apidoc.element.everyauth.google._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.google.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var promise = this.Promise()
    , userUrl = &#x27;https://www.googleapis.com/oauth2/v1/userinfo&#x27;
    , queryParams = { access_token: accessToken, alt: &#x27;json&#x27; };
  request.get({
      url: userUrl
    , qs: queryParams
  }, function (err, res, body) {
    if (err) return promise.fail(err);
    if (parseInt(res.statusCode/100, 10) !== 2) {
      return promise.fail({extra: {data: body, res: res}});
    }
    promise.fulfill(JSON.parse(body));
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.google._handleAuthCallbackError" id="apidoc.element.everyauth.google._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.google.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  var parsedUrl = url.parse(req.url, true)
    , errorDesc = parsedUrl.query.error + &#x22;; &#x22; + parsedUrl.query.error_description;
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: errorDesc
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.google._moduleErrback" id="apidoc.element.everyauth.google._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.google.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var googleResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        googleResponse.statusCode
      , googleResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.google.refreshToken" id="apidoc.element.everyauth.google.refreshToken">
        function <span class="apidocSignatureSpan">everyauth.google.</span>refreshToken
        <span class="apidocSignatureSpan">(params, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">refreshToken = function (params, cb) {
  request.post(&#x27;https://accounts.google.com/o/oauth2/token&#x27;, {
    form: {
      refresh_token: params.refreshToken
    , client_id: params.clientId
    , client_secret: params.clientSecret
    , grant_type: &#x27;refresh_token&#x27;
    }
  }, function (err, res, body) {
    // `body` should look like:
    // {
    //   &#x22;access_token&#x22;:&#x22;1/fFBGRNJru1FQd44AzqT3Zg&#x22;,
    //   &#x22;expires_in&#x22;:3920,
    //   &#x22;token_type&#x22;:&#x22;Bearer&#x22;,
    // }
    if (err) return cb(err);
    if (parseInt(res.statusCode / 100, 10) !== 2) {
      cb(null, {}, res);
    } else {
      body = JSON.parse(body);
      cb(null, {
        accessToken: body.access_token
      , expiresIn: body.expires_in
      , idToken: body.id_token
      }, res);
    }
  });
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.google.scope" id="apidoc.element.everyauth.google.scope">
        function <span class="apidocSignatureSpan">everyauth.google.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.google1" id="apidoc.module.everyauth.google1">module everyauth.google1</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.google1._fetchOAuthUser" id="apidoc.element.everyauth.google1._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.google1.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var promise = this.Promise()
    , userUrl = &#x27;https://www.google.com/m8/feeds/contacts/default/full?alt=json&#x27;;
  this.oauth.get(userUrl, accessToken, accessTokenSecret, function (err, data, res) {
    if (err) {
      err.extra = {data: data, res: res};
      return promise.fail(err);
    }
    var oauthUser = JSON.parse(data)
      , user = { gmail: oauthUser.feed.id.$t };
    promise.fulfill(user);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.google1._moduleErrback" id="apidoc.element.everyauth.google1._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.google1.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var twitterResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        twitterResponse.statusCode
      , twitterResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.google1.scope" id="apidoc.element.everyauth.google1.scope">
        function <span class="apidocSignatureSpan">everyauth.google1.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.googlehybrid" id="apidoc.module.everyauth.googlehybrid">module everyauth.googlehybrid</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.googlehybrid._sendToAuthenticationUri" id="apidoc.element.everyauth.googlehybrid._sendToAuthenticationUri">
        function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>_sendToAuthenticationUri
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sendToAuthenticationUri = function (req, res) {

  // Automatic hostname detection + assignment
  if (!this._myHostname || this._alwaysDetectHostname) {
    this.myHostname(extractHostname(req));
  }

  var self = this;

  this.relyingParty.authenticate(&#x27;http://www.google.com/accounts/o8/id&#x27;, false, function (err,authenticationUrl){
    if(err) return p.fail(err);
    self.redirect(res, authenticationUrl);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.googlehybrid._verifyAttributes" id="apidoc.element.everyauth.googlehybrid._verifyAttributes">
        function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>_verifyAttributes
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_verifyAttributes = function (req, res) {
  var p = this.Promise()
      oauth = this.oauth;
  this.relyingParty.verifyAssertion(req, function (err, userAttributes) {
    if(err) return p.fail(err);
    oauth.getOAuthAccessToken(userAttributes[&#x27;request_token&#x27;], undefined, function (err, oauthAccessToken, oauthAccessTokenSecret
) {
      if (err) return p.fail(err);
      userAttributes[&#x27;access_token&#x27;] = oauthAccessToken;
      userAttributes[&#x27;access_token_secret&#x27;] = oauthAccessTokenSecret;
      p.fulfill(userAttributes)
    });
  });
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.googlehybrid.consumerKey" id="apidoc.element.everyauth.googlehybrid.consumerKey">
        function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>consumerKey
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">consumerKey = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Twitter OAuth

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
  , connect = require(&#x27;connect&#x27;);

everyauth.twitter
  .<span class="apidocCodeKeywordSpan">consumerKey</span>(&#x27;YOUR CONSUMER ID HERE&#x27;)
  .consumerSecret(&#x27;YOUR CONSUMER SECRET HERE&#x27;)
  .findOrCreateUser( function (session, accessToken, accessTokenSecret, twitterUserMetadata) {
    // find or create user logic goes here
  })
  .redirectPath(&#x27;/&#x27;);

var routes = function (app) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.googlehybrid.consumerSecret" id="apidoc.element.everyauth.googlehybrid.consumerSecret">
        function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>consumerSecret
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">consumerSecret = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.twitter
.consumerKey(&#x27;YOUR CONSUMER ID HERE&#x27;)
.<span class="apidocCodeKeywordSpan">consumerSecret</span>(&#x27;YOUR CONSUMER SECRET HERE&#x27;)
.findOrCreateUser( function (session, accessToken, accessTokenSecret, twitterUserMetadata) {
  // find or create user logic goes here
})
.redirectPath(&#x27;/&#x27;);

var routes = function (app) {
// Define your routes here
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.googlehybrid.init" id="apidoc.element.everyauth.googlehybrid.init">
        function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function init() {
  this._super = _super;
  fn.apply(this, arguments);
  delete this._super;

  // Do module compilation here, too
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var seqName in seqs) {
  seqs[seqName].validateSteps();
}
};

// Decorates the app with the routes required of the module
EveryModule.prototype.routeApp = function (router) {
if (this.init) this.<span class="apidocCodeKeywordSpan">init</span>();
var routes = this._routes;
var methods = [&#x27;get&#x27;, &#x27;post&#x27;];
for (var method in routes) {
  for (var routeAlias in routes[method]) {
    var middleware = this._middleware[routeAlias];
    if (middleware) continue;
    var path = this[routeAlias]();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.googlehybrid.scope" id="apidoc.element.everyauth.googlehybrid.scope">
        function <span class="apidocSignatureSpan">everyauth.googlehybrid.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>














</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.gowalla" id="apidoc.module.everyauth.gowalla">module everyauth.gowalla</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.gowalla._fetchOAuthUser" id="apidoc.element.everyauth.gowalla._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.gowalla.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var promise = this.Promise();
  request.get({
      url: this._apiHost + &#x27;/users/me&#x27;
    , qs: { oauth_token: accessToken }
    , headers: {
          &#x22;X-Gowalla-API-Key&#x22;: this.appId()
        , &#x22;Accept&#x22;: &#x22;application/json&#x22;
      }
  }, function (err, res, body) {
    if (err) {
      err.extra = {res: res, data: body};
      return promise.fail(err);
    }
    if (parseInt(res.statusCode/100, 10) !== 2) {
      return promise.fail({extra: {data: body, res: res}});
    }
    var oauthUser = JSON.parse(body);
    return promise.fulfill(oauthUser);
  });

  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.gowalla._moduleErrback" id="apidoc.element.everyauth.gowalla._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.gowalla.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var gowallaResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        gowallaResponse.statusCode
      , gowallaResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.guest" id="apidoc.module.everyauth.guest">module everyauth.guest</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.guest._addToSession" id="apidoc.element.everyauth.guest._addToSession">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>_addToSession
        <span class="apidocSignatureSpan">(sess, user, errors)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addToSession = function (sess, user, errors) {
  var _auth = sess.auth || {};
  if (!sess.auth) {
    sess.auth = _auth;
  }
  if (user) {
    _auth.userId = user.id;
  }
  _auth.loggedIn = !!user;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest._getGuestId" id="apidoc.element.everyauth.guest._getGuestId">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>_getGuestId
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getGuestId = function (req, res) {
  return (req.query &#x26;&#x26; req.query.login) || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest._getSession" id="apidoc.element.everyauth.guest._getSession">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>_getSession
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getSession = function (req) {
  return req.session;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest._interpretUserOrErrors" id="apidoc.element.everyauth.guest._interpretUserOrErrors">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>_interpretUserOrErrors
        <span class="apidocSignatureSpan">(userOrErrors)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_interpretUserOrErrors = function (userOrErrors) {
  if (Array.isArray(userOrErrors)) {
    return [null, userOrErrors]; // We have an array of errors
  } else {
    return [userOrErrors, []]; // We have a user
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest._maybeLoginFail" id="apidoc.element.everyauth.guest._maybeLoginFail">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>_maybeLoginFail
        <span class="apidocSignatureSpan">(req, res, errors, login)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_maybeLoginFail = function (req, res, errors, login) {
  if (errors &#x26;&#x26; errors.length) {
    if (res.render) {
      res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
        errorDescription: errors[0]
      });
    } else {
      throw new Error(&#x22;You must configure maybeLoginFail if you are not using express&#x22;);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest._maybeLoginSucceed" id="apidoc.element.everyauth.guest._maybeLoginSucceed">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>_maybeLoginSucceed
        <span class="apidocSignatureSpan">(res, user)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_maybeLoginSucceed = function (res, user) {
  if (user) {
    this.redirect(res, this.redirectPath());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest.addToSession" id="apidoc.element.everyauth.guest.addToSession">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>addToSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addToSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
})

.<span class="apidocCodeKeywordSpan">addToSession</span>( function (sess, acsUser, token) {
  var _auth = sess.auth || (sess.auth = {})
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest.createOrVerifyGuest" id="apidoc.element.everyauth.guest.createOrVerifyGuest">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>createOrVerifyGuest
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createOrVerifyGuest = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest.entryPath" id="apidoc.element.everyauth.guest.entryPath">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>entryPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">entryPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .<span class="apidocCodeKeywordSpan">entryPath</span>(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest.getGuestId" id="apidoc.element.everyauth.guest.getGuestId">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>getGuestId
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getGuestId = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    .accepts(&#x27;res user&#x27;)
    .promises(null)
  .step(&#x27;maybeLoginFail&#x27;)
    .description(&#x27;Execute a HTTP response for a failed login&#x27;)
    .accepts(&#x27;req res errors&#x27;)
    .promises(null)
.entryPath(&#x27;/auth/guest&#x27;)
.<span class="apidocCodeKeywordSpan">getGuestId</span>(function(req, res) {
  return (req.query &#x26;&#x26; req.query.login) || null;
})
.getSession( function(req) {
  return req.session;
})
.addToSession( function (sess, user, errors) {
  var _auth = sess.auth || {};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest.getSession" id="apidoc.element.everyauth.guest.getSession">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>getSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    return swt.claims;
  }

  return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
})

.<span class="apidocCodeKeywordSpan">getSession</span>( function (req) {
  return req.session;
})

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest.interpretUserOrErrors" id="apidoc.element.everyauth.guest.interpretUserOrErrors">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>interpretUserOrErrors
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">interpretUserOrErrors = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    sess.auth = _auth;
  }
  if (user) {
    _auth.userId = user.id;
  }
  _auth.loggedIn = !!user;
})
.<span class="apidocCodeKeywordSpan">interpretUserOrErrors</span>( function (userOrErrors) {
  if (Array.isArray(userOrErrors)) {
    return [null, userOrErrors]; // We have an array of errors
  } else {
    return [userOrErrors, []]; // We have a user
  }
})
.maybeLoginSucceed( function (res, user) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest.maybeLoginFail" id="apidoc.element.everyauth.guest.maybeLoginFail">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>maybeLoginFail
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">maybeLoginFail = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
})
.maybeLoginSucceed( function (res, user) {
  if (user) {
    this.redirect(res, this.redirectPath());
  }
})
.<span class="apidocCodeKeywordSpan">maybeLoginFail</span>( function (req, res, errors, login) {
  if (errors &#x26;&#x26; errors.length) {
    if (res.render) {
      res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
        errorDescription: errors[0]
      });
    } else {
      throw new Error(&#x22;You must configure maybeLoginFail if you are not using express&#x22;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest.maybeLoginSucceed" id="apidoc.element.everyauth.guest.maybeLoginSucceed">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>maybeLoginSucceed
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">maybeLoginSucceed = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.interpretUserOrErrors( function (userOrErrors) {
  if (Array.isArray(userOrErrors)) {
    return [null, userOrErrors]; // We have an array of errors
  } else {
    return [userOrErrors, []]; // We have a user
  }
})
.<span class="apidocCodeKeywordSpan">maybeLoginSucceed</span>( function (res, user) {
  if (user) {
    this.redirect(res, this.redirectPath());
  }
})
.maybeLoginFail( function (req, res, errors, login) {
  if (errors &#x26;&#x26; errors.length) {
    if (res.render) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.guest.redirectPath" id="apidoc.element.everyauth.guest.redirectPath">
        function <span class="apidocSignatureSpan">everyauth.guest.</span>redirectPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">redirectPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// that.
// If you do not configure this, everyauth renders a default fallback
// view notifying the user that their authentication failed and why.
  })
  .findOrCreateUser( function (session, accessToken, accessTokExtra, fbUserMetadata) {
// find or create user logic goes here
  })
  .<span class="apidocCodeKeywordSpan">redirectPath</span>(&#x27;/&#x27;);

var routes = function (app) {
  // Define your routes here
};

connect(
connect.bodyParser()
...</pre></li>
    </ul>
















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.instagram" id="apidoc.module.everyauth.instagram">module everyauth.instagram</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.instagram._convertErr" id="apidoc.element.everyauth.instagram._convertErr">
        function <span class="apidocSignatureSpan">everyauth.instagram.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
  return new Error(data.error_message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.instagram._fetchOAuthUser" id="apidoc.element.everyauth.instagram._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.instagram.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/users/self&#x27;, accessToken, function (err, data) {
    if (err) return p.fail(err.error_message);
    var oauthUser = JSON.parse(data).data;
    p.fulfill(oauthUser);
  })
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.instagram.display" id="apidoc.element.everyauth.instagram.display">
        function <span class="apidocSignatureSpan">everyauth.instagram.</span>display
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">display = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
everyauth.instagram
  .entryPath(&#x27;/auth/instagram&#x27;)
  .callbackPath(&#x27;/auth/instagram/callback&#x27;)
  .scope(&#x27;basic&#x27;) // Defaults to &#x27;basic&#x27;
                  // Can be set to a combination of: &#x27;basic&#x27;, &#x27;comments&#x27;, &#x27;relationships&#x27;, &#x27;likes
&#x27;
                  // For more details, see http://instagram.com/developer/auth/#scope
  .<span class="apidocCodeKeywordSpan">display</span>(undefined); // Defaults to undefined; Set to &#x27;touch&#x27; to see a mobile
 optimized version
                       // of the instagram auth page
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.instagram.scope" id="apidoc.element.everyauth.instagram.scope">
        function <span class="apidocSignatureSpan">everyauth.instagram.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>
























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.justintv" id="apidoc.module.everyauth.justintv">module everyauth.justintv</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.justintv._convertErr" id="apidoc.element.everyauth.justintv._convertErr">
        function <span class="apidocSignatureSpan">everyauth.justintv.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
  return new Error(data.data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.justintv._fetchOAuthUser" id="apidoc.element.everyauth.justintv._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.justintv.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var promise = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/api/account/whoami.json&#x27;, accessToken, accessTokenSecret, function (err, data) {
    if (err) return promise.fail(err);
    var oauthUser = JSON.parse(data);
    return promise.fulfill(oauthUser);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.linkedin" id="apidoc.module.everyauth.linkedin">module everyauth.linkedin</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.linkedin._fetchOAuthUser" id="apidoc.element.everyauth.linkedin._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.linkedin.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var promise = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/people/~:(&#x27; + this.fields() + &#x27;)&#x27;, accessToken, accessTokenSecret, function (err, data, res) {
    if (err) {
      err.extra = {data: data, res: res}
      return promise.fail(err);
    }
    var oauthUser = JSON.parse(data);
    promise.fulfill(oauthUser);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.linkedin._moduleErrback" id="apidoc.element.everyauth.linkedin._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.linkedin.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var linkedInResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        linkedInResponse.statusCode
      , linkedInResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.linkedin._redirectToProviderAuth" id="apidoc.element.everyauth.linkedin._redirectToProviderAuth">
        function <span class="apidocSignatureSpan">everyauth.linkedin.</span>_redirectToProviderAuth
        <span class="apidocSignatureSpan">(res, token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_redirectToProviderAuth = function (res, token) {
  this.redirect(res, &#x27;https://www.linkedin.com&#x27; + this.authorizePath() + &#x27;?oauth_token=&#x27; + token);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.linkedin.fields" id="apidoc.element.everyauth.linkedin.fields">
        function <span class="apidocSignatureSpan">everyauth.linkedin.</span>fields
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fields = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .<span class="apidocCodeKeywordSpan">fields</span>(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults
 to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
everyauth.facebook.scope(); // undefined
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.linkedin.init" id="apidoc.element.everyauth.linkedin.init">
        function <span class="apidocSignatureSpan">everyauth.linkedin.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function init() {
  this._super = _super;
  fn.apply(this, arguments);
  delete this._super;

  // Do module compilation here, too
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var seqName in seqs) {
  seqs[seqName].validateSteps();
}
};

// Decorates the app with the routes required of the module
EveryModule.prototype.routeApp = function (router) {
if (this.init) this.<span class="apidocCodeKeywordSpan">init</span>();
var routes = this._routes;
var methods = [&#x27;get&#x27;, &#x27;post&#x27;];
for (var method in routes) {
  for (var routeAlias in routes[method]) {
    var middleware = this._middleware[routeAlias];
    if (middleware) continue;
    var path = this[routeAlias]();
...</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.mailchimp" id="apidoc.module.everyauth.mailchimp">module everyauth.mailchimp</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.mailchimp._fetchOAuthUser" id="apidoc.element.everyauth.mailchimp._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var promise = this.Promise();
  this.oauth._request(&#x22;GET&#x22;, this.oauthHost() + this.metadataPath(), {
    Authorization: &#x27;OAuth &#x27; + accessToken
  },&#x22;&#x22;,&#x22;&#x22;, function (err, data){
    if (err) return promise.fail(err);

    var metadata = JSON.parse(data)
      , apikey = accessToken + &#x22;-&#x22;+ metadata.dc;

    request.post({
        url: metadata.api_endpoint + &#x27;/1.3/?method=getAccountDetails&#x27;
      , form: {apikey: apikey}
    }, function (err, res, body) {
      if (err) {
        err.extra = {res: res, data: body};
        return promise.fail(err);
      }
      if (parseInt(res.statusCode/100, 10) !== 2) {
        return promise.fail({extra: {data: body, res: res}});
      }
      var oauthUser = JSON.parse(body);
      oauthUser.apikey = apikey;
      return promise.fulfill(oauthUser);
    });
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mailchimp._moduleErrback" id="apidoc.element.everyauth.mailchimp._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.mailchimp.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var mailchimpResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        mailchimpResponse.statusCode
      , mailchimpResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mailchimp.metadataPath" id="apidoc.element.everyauth.mailchimp.metadataPath">
        function <span class="apidocSignatureSpan">everyauth.mailchimp.</span>metadataPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">metadataPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
oauthModule.submodule(&#x27;mailchimp&#x27;)
.configurable({
  metadataPath: &#x22;Although this shouldn&#x27;t be changed, this is where we get the datacenter for building the API key.&#x22
;
})
.oauthHost(&#x27;https://login.mailchimp.com&#x27;)
.authPath(&#x27;/oauth2/authorize&#x27;)
.accessTokenPath(&#x27;/oauth2/token&#x27;)
.<span class="apidocCodeKeywordSpan">metadataPath</span>(&#x27;/oauth2/metadata&#x27;)

.entryPath(&#x27;/auth/mailchimp&#x27;)
.callbackPath(&#x27;/auth/mailchimp/callback&#x27;)
.fetchOAuthUser( function (accessToken) {
  var promise = this.Promise();
  this.oauth._request(&#x22;GET&#x22;, this.oauthHost() + this.metadataPath(), {
    Authorization: &#x27;OAuth &#x27; + accessToken
...</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.mailru" id="apidoc.module.everyauth.mailru">module everyauth.mailru</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.mailru._authCallbackDidErr" id="apidoc.element.everyauth.mailru._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.mailru.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
    var parsedUrl = url.parse(req.url, true);
    return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mailru._convertErr" id="apidoc.element.everyauth.mailru._convertErr">
        function <span class="apidocSignatureSpan">everyauth.mailru.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
    return new Error(JSON.parse(data).error.error_msg);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mailru._fetchOAuthUser" id="apidoc.element.everyauth.mailru._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.mailru.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, http)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, http) {
    var promise = this.Promise(),
    extradata = http.extra;

    if(typeof accessToken === &#x27;undefined&#x27;){
        if(typeof extradata.access_token === &#x27;undefined&#x27;) {
            var strextra = JSON.stringify(extradata).replace(/^\{&#x22;(.*)&#x22;:&#x22;&#x22;\}$/,&#x27;&#x22;$1&#x22;&#x27;),
            extra = eval(&#x27;(&#x27; + JSON.parse(strextra) + &#x27;)&#x27;);
            accessToken = extra.access_token;
        } else {
            accessToken = extra.access_token;
        }
    }

    var query = {
        app_id: this.appId(),
        method: &#x27;users.getInfo&#x27;,
        secure:1,
        session_key: accessToken
    },
    data = &#x27;&#x27;,
    fields = [];

    for ( key in query ) {
        data += key + &#x27;=&#x27; + query[key];
    }
    data += this.appSecret();
    query.sig = crypto.createHash(&#x27;md5&#x27;).update(data).digest(&#x22;hex&#x22;);

    for ( key in query ) {
        fields.push(key + &#x27;=&#x27; + query[key]);
    }

    this.oauth.get(this.apiHost() + &#x27;?&#x27; + fields.join(&#x27;&#x26;&#x27;), accessToken, function (err, data) {
        if (err) {
            if (err.error) {
                promise.fail(err.error.error_msg)
            }
            else {
                promise.fail(err.error_message);
            }
        }
        var data = JSON.parse(data);
        if (data.error) {
            promise.fail(data.error.error_msg)
        }
        else {
            var oauthUser = data[0];
            promise.fulfill(oauthUser);
        }
    });
    return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mailru.display" id="apidoc.element.everyauth.mailru.display">
        function <span class="apidocSignatureSpan">everyauth.mailru.</span>display
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">display = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
everyauth.instagram
  .entryPath(&#x27;/auth/instagram&#x27;)
  .callbackPath(&#x27;/auth/instagram/callback&#x27;)
  .scope(&#x27;basic&#x27;) // Defaults to &#x27;basic&#x27;
                  // Can be set to a combination of: &#x27;basic&#x27;, &#x27;comments&#x27;, &#x27;relationships&#x27;, &#x27;likes
&#x27;
                  // For more details, see http://instagram.com/developer/auth/#scope
  .<span class="apidocCodeKeywordSpan">display</span>(undefined); // Defaults to undefined; Set to &#x27;touch&#x27; to see a mobile
 optimized version
                       // of the instagram auth page
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mailru.scope" id="apidoc.element.everyauth.mailru.scope">
        function <span class="apidocSignatureSpan">everyauth.mailru.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.mendeley" id="apidoc.module.everyauth.mendeley">module everyauth.mendeley</a></h1>




    <h2>
        <a href="#apidoc.element.everyauth.mendeley._convertErr" id="apidoc.element.everyauth.mendeley._convertErr">
        function <span class="apidocSignatureSpan">everyauth.mendeley.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
  return new Error(data.error_message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mendeley._fetchOAuthUser" id="apidoc.element.everyauth.mendeley._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.mendeley.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/profiles/info/me/&#x27;, accessToken, accessTokenSecret, function (err, data) {
    if (err) return p.fail(err.error_message);
    var oauthUser = JSON.parse(data);
    p.fulfill(oauthUser);
  })
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mendeley.init" id="apidoc.element.everyauth.mendeley.init">
        function <span class="apidocSignatureSpan">everyauth.mendeley.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function init() {
  this._super = _super;
  fn.apply(this, arguments);
  delete this._super;

  // Do module compilation here, too
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var seqName in seqs) {
  seqs[seqName].validateSteps();
}
};

// Decorates the app with the routes required of the module
EveryModule.prototype.routeApp = function (router) {
if (this.init) this.<span class="apidocCodeKeywordSpan">init</span>();
var routes = this._routes;
var methods = [&#x27;get&#x27;, &#x27;post&#x27;];
for (var method in routes) {
  for (var routeAlias in routes[method]) {
    var middleware = this._middleware[routeAlias];
    if (middleware) continue;
    var path = this[routeAlias]();
...</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.mixi" id="apidoc.module.everyauth.mixi">module everyauth.mixi</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.mixi._authCallbackDidErr" id="apidoc.element.everyauth.mixi._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.mixi.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mixi._convertErr" id="apidoc.element.everyauth.mixi._convertErr">
        function <span class="apidocSignatureSpan">everyauth.mixi.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
  return new Error(JSON.parse(data.data).error.message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mixi._fetchOAuthUser" id="apidoc.element.everyauth.mixi._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.mixi.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var p = this.Promise();
  this.oauth.setAccessTokenName(&#x27;oauth_token&#x27;);
  this.oauth.get(this.apiHost() + &#x27;/people/@me/@self&#x27;, accessToken, function (err, data) {
    if (err){
      return p.fail(err);
    }
    var oauthUser = JSON.parse(data);
    p.fulfill(oauthUser);
  })
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mixi._handleAuthCallbackError" id="apidoc.element.everyauth.mixi._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.mixi.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  var parsedUrl = url.parse(req.url, true)
    , errorDesc = parsedUrl.query.error_description;
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: errorDesc
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mixi.display" id="apidoc.element.everyauth.mixi.display">
        function <span class="apidocSignatureSpan">everyauth.mixi.</span>display
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">display = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
everyauth.instagram
  .entryPath(&#x27;/auth/instagram&#x27;)
  .callbackPath(&#x27;/auth/instagram/callback&#x27;)
  .scope(&#x27;basic&#x27;) // Defaults to &#x27;basic&#x27;
                  // Can be set to a combination of: &#x27;basic&#x27;, &#x27;comments&#x27;, &#x27;relationships&#x27;, &#x27;likes
&#x27;
                  // For more details, see http://instagram.com/developer/auth/#scope
  .<span class="apidocCodeKeywordSpan">display</span>(undefined); // Defaults to undefined; Set to &#x27;touch&#x27; to see a mobile
 optimized version
                       // of the instagram auth page
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mixi.mobile" id="apidoc.element.everyauth.mixi.mobile">
        function <span class="apidocSignatureSpan">everyauth.mixi.</span>mobile
        <span class="apidocSignatureSpan">(isMobile)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mobile = function (isMobile) {
  if (isMobile) {
    this.authPath(&#x27;https://m.mixi.jp/connect_authorize.pl&#x27;);
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Facebook Mobile OAuth Dialog
If you are programming for mobile, you can bring up the facebook mobile OAuth
dialog instead of the traditional desktop browser-based one by just adding
`mobile(true)` to your configuration as seen here:

```javascript
everyauth.facebook
  .<span class="apidocCodeKeywordSpan">mobile</span>(true)
  .appId(&#x27;YOUR APP ID HERE&#x27;)
  .appSecret(&#x27;YOUR APP SECRET HERE&#x27;)
  // rest of configuration
```

## Twitter OAuth
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.mixi.scope" id="apidoc.element.everyauth.mixi.scope">
        function <span class="apidocSignatureSpan">everyauth.mixi.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.oauth" id="apidoc.module.everyauth.oauth">module everyauth.oauth</a></h1>




    <h2>
        <a href="#apidoc.element.everyauth.oauth._addToSession" id="apidoc.element.everyauth.oauth._addToSession">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_addToSession
        <span class="apidocSignatureSpan">(sess, auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addToSession = function (sess, auth) {
  var promise = this.Promise()
    , _auth = sess.auth
    , mod = _auth[this.name];
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = auth.user[this._userPkey]);
  mod.user = auth.oauthUser;
  mod.accessToken = auth.accessToken;
  mod.accessTokenSecret = auth.accessTokenSecret;
  // this._super() ?
  sess.save( function (err) {
    if (err) return promise.fail(err);
    promise.fulfill();
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._assignOAuthUserToSession" id="apidoc.element.everyauth.oauth._assignOAuthUserToSession">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_assignOAuthUserToSession
        <span class="apidocSignatureSpan">(oauthUser, session)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_assignOAuthUserToSession = function (oauthUser, session) {
  session.auth[this.name].user = oauthUser;
  return session;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._compileAuth" id="apidoc.element.everyauth.oauth._compileAuth">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_compileAuth
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, oauthUser, user)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_compileAuth = function (accessToken, accessTokenSecret, oauthUser, user) {
  return {
      accessToken: accessToken
    , accessTokenSecret: accessTokenSecret
    , oauthUser: oauthUser
    , user: user
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._extractTokenAndVerifier" id="apidoc.element.everyauth.oauth._extractTokenAndVerifier">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_extractTokenAndVerifier
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_extractTokenAndVerifier = function (req, res, next) {
  if (this._authCallbackDidErr &#x26;&#x26; this._authCallbackDidErr(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }
  var parsedUrl = url.parse(req.url, true)
    , query = parsedUrl.query
    , requestToken = query &#x26;&#x26; query.oauth_token
    , verifier = query &#x26;&#x26; query.oauth_verifier

    , sess = req.session
    , promise
    , _auth = sess.auth || (sess.auth = {})
    , name = this.name
    , mod = _auth[name] || (_auth[name] = {});
  if ((name === &#x27;twitter&#x27;) &#x26;&#x26; (mod.token === requestToken) &#x26;&#x26; (mod.verifier === verifier)) {
    return this.breakTo(&#x27;handleDuplicateCallbackRequest&#x27;, req, res);
  }

  promise = this.Promise();
  mod.verifier = verifier;
  sess.save( function (err) {
    if (err) return promise.fail(err);
    promise.fulfill(requestToken, verifier);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._getAccessToken" id="apidoc.element.everyauth.oauth._getAccessToken">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_getAccessToken
        <span class="apidocSignatureSpan">(reqToken, reqTokenSecret, verifier)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getAccessToken = function (reqToken, reqTokenSecret, verifier) {
  var promise = this.Promise();
  this.oauth.getOAuthAccessToken(reqToken, reqTokenSecret, verifier, function (err, accessToken, accessTokenSecret, params) {
    if (err) return promise.fail(err);
    promise.fulfill(accessToken, accessTokenSecret, params);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._getRequestToken" id="apidoc.element.everyauth.oauth._getRequestToken">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_getRequestToken
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getRequestToken = function (req, res, next) {

  // Automatic hostname detection + assignment
  if (!this._myHostname || this._alwaysDetectHostname) {
    this.myHostname(extractHostname(req));
  }

  var p = this.Promise()
    , params = {oauth_callback: this._myHostname + this._callbackPath}
    , additionalParams = this.moreRequestTokenQueryParams
    , param;

  if (additionalParams) for (var k in additionalParams) {
    param = additionalParams[k];
    if (&#x27;function&#x27; === typeof param) {
      // e.g., for facebook module, param could be
      // function () {
      //   return this._scope &#x26;&#x26; this.scope();
      // }
      additionalParams[k] = // cache the function call
        param = param.call(this);
    }
    if (&#x27;function&#x27; === typeof param) {
      // this.scope() itself could be a function
      // to allow for dynamic scope determination - e.g.,
      // function (req, res) {
      //   return req.session.onboardingPhase; // =&#x3e; &#x22;email&#x22;
      // }
      param = param.call(this, req, res);
    }
    params[k] = param;
  }
  this.oauth.getOAuthRequestToken(params, function (err, token, tokenSecret, params) {
    if (err) {
      return p.fail(err);
    }
    p.fulfill(token, tokenSecret);
  });
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._getSession" id="apidoc.element.everyauth.oauth._getSession">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_getSession
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getSession = function (req) {
  return req.session;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._handleAuthCallbackError" id="apidoc.element.everyauth.oauth._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res, next) {
  next(new Error(&#x22;You must configure handleAuthCallbackError in this module&#x22;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._redirectToProviderAuth" id="apidoc.element.everyauth.oauth._redirectToProviderAuth">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_redirectToProviderAuth
        <span class="apidocSignatureSpan">(res, token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_redirectToProviderAuth = function (res, token) {
  // Note: Not all oauth modules need oauth_callback as a uri query parameter. As far as I know, only readability&#x27;s
  // module needs it as a uri query parameter. However, in cases such as twitter, it allows you to over-ride
  // the callback url settings at dev.twitter.com from one place, your app code, rather than in two places -- i.e.,
  // your app code + dev.twitter.com app settings.
  var redirectTo = this._oauthHost + this._authorizePath + &#x27;?oauth_token=&#x27; + token;
  if (this._sendCallbackWithAuthorize) {
    redirectTo += &#x27;&#x26;oauth_callback=&#x27; + this._myHostname + this._callbackPath;
  }
  this.redirect(res, redirectTo);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._rememberTokenSecret" id="apidoc.element.everyauth.oauth._rememberTokenSecret">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_rememberTokenSecret
        <span class="apidocSignatureSpan">(sess)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_rememberTokenSecret = function (sess) {
  return sess &#x26;&#x26; sess.auth &#x26;&#x26; sess.auth[this.name] &#x26;&#x26; sess.auth[this.name].tokenSecret;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._sendResponse" id="apidoc.element.everyauth.oauth._sendResponse">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_sendResponse
        <span class="apidocSignatureSpan">(res, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sendResponse = function (res, data) {
  var redirectTo = this.redirectPath();
  if (!redirectTo)
    throw new Error(&#x27;You must configure a redirectPath&#x27;);
  this.redirect(res, redirectTo);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._storeRequestToken" id="apidoc.element.everyauth.oauth._storeRequestToken">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_storeRequestToken
        <span class="apidocSignatureSpan">(req, token, tokenSecret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_storeRequestToken = function (req, token, tokenSecret) {
  var sess = req.session
    , _auth = sess.auth || (sess.auth = {})
    , _provider = _auth[this.name] || (_auth[this.name] = {});
  _provider.token = token;
  _provider.tokenSecret = tokenSecret;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth._waitForPriorRequestToWriteSession" id="apidoc.element.everyauth.oauth._waitForPriorRequestToWriteSession">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>_waitForPriorRequestToWriteSession
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_waitForPriorRequestToWriteSession = function (req, res, next) {
  var promise = this.Promise();
  function check (self, sess, res, promise) {
    if (sess.auth[self.name].accessToken) {
      return promise.fulfill();
    }

    setTimeout(function () {
      sess.reload( function (err) {
        if (err) return promise.fail(err);
        check(self, req.session, res, promise);
      });
    }, 100);
  }
  check(this, req.session, res, promise);
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.accessTokenPath" id="apidoc.element.everyauth.oauth.accessTokenPath">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>accessTokenPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">accessTokenPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

.oauthHost(&#x27;https://launchpad.37signals.com&#x27;)
.apiHost(&#x27;https://launchpad.37signals.com&#x27;)

.authPath(&#x27;/authorization/new&#x27;)
.authQueryParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.<span class="apidocCodeKeywordSpan">accessTokenPath</span>(&#x27;/authorization/token&#x27;)
.accessTokenParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.postAccessTokenParamsVia(&#x27;data&#x27;)

.entryPath(&#x27;/auth/37signals&#x27;)
.callbackPath(&#x27;/auth/37signals/callback&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.addToSession" id="apidoc.element.everyauth.oauth.addToSession">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>addToSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addToSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
})

.<span class="apidocCodeKeywordSpan">addToSession</span>( function (sess, acsUser, token) {
  var _auth = sess.auth || (sess.auth = {})
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.alwaysDetectHostname" id="apidoc.element.everyauth.oauth.alwaysDetectHostname">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>alwaysDetectHostname
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">alwaysDetectHostname = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.apiHost" id="apidoc.element.everyauth.oauth.apiHost">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>apiHost
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">apiHost = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var everyauth = require(&#x27;../index&#x27;) //require(&#x27;everyauth&#x27;)
  , express = require(&#x27;express&#x27;);

everyauth
  .shopify
.<span class="apidocCodeKeywordSpan">apiHost</span>(&#x27;https://SHOPNAME.myshopify.com&#x27;)
.oauthHost(&#x27;https://SHOPNAME.myshopify.com&#x27;)
.appId(&#x27;YOUR APP API KEY&#x27;)
.appSecret(&#x27;YOUR APP SHARED SECRET&#x27;)

//Shopify requires scope, even if you only want to use default scope
.scope(&#x27;read_products,write_themes&#x27;)
.findOrCreateUser( function (sess, accessToken, accessSecret, shopifyUser) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.assignOAuthUserToSession" id="apidoc.element.everyauth.oauth.assignOAuthUserToSession">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>assignOAuthUserToSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">assignOAuthUserToSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var promise = this.Promise();
  this.oauth.getOAuthAccessToken(reqToken, reqTokenSecret, verifier, function (err, accessToken, accessTokenSecret, params) {
    if (err) return promise.fail(err);
    promise.fulfill(accessToken, accessTokenSecret, params);
  });
  return promise;
})
.<span class="apidocCodeKeywordSpan">assignOAuthUserToSession</span>( function (oauthUser, session) {
  session.auth[this.name].user = oauthUser;
  return session;
})
.compileAuth( function (accessToken, accessTokenSecret, oauthUser, user) {
  return {
      accessToken: accessToken
    , accessTokenSecret: accessTokenSecret
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.authCallbackDidErr" id="apidoc.element.everyauth.oauth.authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>authCallbackDidErr
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authCallbackDidErr = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 .sendResponse( function (res) {
   var redirectTo = this.redirectPath();
   if (!redirectTo)
     throw new Error(&#x27;You must configure a redirectPath&#x27;);
   this.redirect(res, redirectTo);
 })

 .<span class="apidocCodeKeywordSpan">authCallbackDidErr</span>( function (req) {
   var parsedUrl = url.parse(req.url, true);
   return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
 })

.handleNotValidTokenCallbackError( function (token) {
   throw new Error(&#x22;The token received is NOT valid&#x22;);
 })
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.authCallbackErrorSteps" id="apidoc.element.everyauth.oauth.authCallbackErrorSteps">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>authCallbackErrorSteps
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authCallbackErrorSteps = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.authorizePath" id="apidoc.element.everyauth.oauth.authorizePath">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>authorizePath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authorizePath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
, url = require(&#x27;url&#x27;);

var evernote = module.exports =
oauthModule.submodule(&#x27;evernote&#x27;)
.oauthHost(&#x27;https://www.evernote.com&#x27;)
.entryPath(&#x27;/auth/evernote&#x27;)
.callbackPath(&#x27;/auth/evernote/callback&#x27;)
.<span class="apidocCodeKeywordSpan">authorizePath</span>(&#x27;/OAuth.action&#x27;)
.requestTokenPath(&#x27;/oauth&#x27;)
.accessTokenPath(&#x27;/oauth&#x27;)
.fetchOAuthUser( function (accessToken, accessTokenSecret, params) {
  var oauthUser = {
    shardId: params.edam_shard
  , userId: parseInt(params.edam_userId, 10)
  };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.callbackPath" id="apidoc.element.everyauth.oauth.callbackPath">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>callbackPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">callbackPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .<span class="apidocCodeKeywordSpan">callbackPath</span>(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.compileAuth" id="apidoc.element.everyauth.oauth.compileAuth">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>compileAuth
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compileAuth = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
  return promise;
})
.assignOAuthUserToSession( function (oauthUser, session) {
  session.auth[this.name].user = oauthUser;
  return session;
})
.<span class="apidocCodeKeywordSpan">compileAuth</span>( function (accessToken, accessTokenSecret, oauthUser, user) {
  return {
      accessToken: accessToken
    , accessTokenSecret: accessTokenSecret
    , oauthUser: oauthUser
    , user: user
  };
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.consumerKey" id="apidoc.element.everyauth.oauth.consumerKey">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>consumerKey
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">consumerKey = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Twitter OAuth

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
  , connect = require(&#x27;connect&#x27;);

everyauth.twitter
  .<span class="apidocCodeKeywordSpan">consumerKey</span>(&#x27;YOUR CONSUMER ID HERE&#x27;)
  .consumerSecret(&#x27;YOUR CONSUMER SECRET HERE&#x27;)
  .findOrCreateUser( function (session, accessToken, accessTokenSecret, twitterUserMetadata) {
    // find or create user logic goes here
  })
  .redirectPath(&#x27;/&#x27;);

var routes = function (app) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.consumerSecret" id="apidoc.element.everyauth.oauth.consumerSecret">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>consumerSecret
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">consumerSecret = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.twitter
.consumerKey(&#x27;YOUR CONSUMER ID HERE&#x27;)
.<span class="apidocCodeKeywordSpan">consumerSecret</span>(&#x27;YOUR CONSUMER SECRET HERE&#x27;)
.findOrCreateUser( function (session, accessToken, accessTokenSecret, twitterUserMetadata) {
  // find or create user logic goes here
})
.redirectPath(&#x27;/&#x27;);

var routes = function (app) {
// Define your routes here
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.convertErr" id="apidoc.element.everyauth.oauth.convertErr">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>convertErr
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">convertErr = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.oauth.get(this.apiHost() + &#x27;/users/self&#x27;, accessToken, function (err, data) {
    if (err) return p.fail(err.error_message);
    var oauthUser = JSON.parse(data).data;
    p.fulfill(oauthUser);
  })
  return p;
})
.<span class="apidocCodeKeywordSpan">convertErr</span>( function (data) {
  return new Error(data.error_message);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.entryPath" id="apidoc.element.everyauth.oauth.entryPath">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>entryPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">entryPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .<span class="apidocCodeKeywordSpan">entryPath</span>(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.extractTokenAndVerifier" id="apidoc.element.everyauth.oauth.extractTokenAndVerifier">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>extractTokenAndVerifier
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extractTokenAndVerifier = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (this._sendCallbackWithAuthorize) {
    redirectTo += &#x27;&#x26;oauth_callback=&#x27; + this._myHostname + this._callbackPath;
  }
  this.redirect(res, redirectTo);
})

// Steps for GET `callbackPath`
.<span class="apidocCodeKeywordSpan">extractTokenAndVerifier</span>( function (req, res, next) {
  if (this._authCallbackDidErr &#x26;&#x26; this._authCallbackDidErr(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }
  var parsedUrl = url.parse(req.url, true)
    , query = parsedUrl.query
    , requestToken = query &#x26;&#x26; query.oauth_token
    , verifier = query &#x26;&#x26; query.oauth_verifier
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.fetchOAuthUser" id="apidoc.element.everyauth.oauth.fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>fetchOAuthUser
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fetchOAuthUser = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.accessTokenParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.postAccessTokenParamsVia(&#x27;data&#x27;)

.entryPath(&#x27;/auth/37signals&#x27;)
.callbackPath(&#x27;/auth/37signals/callback&#x27;)

.<span class="apidocCodeKeywordSpan">fetchOAuthUser</span>( function (accessToken) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/authorization.json&#x27;, accessToken, function (err, data) {
    if (err) return p.fail(err);
    var oauthUser = JSON.parse(data);
    p.fulfill(oauthUser);
  })
  return p;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.findOrCreateUser" id="apidoc.element.everyauth.oauth.findOrCreateUser">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>findOrCreateUser
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findOrCreateUser = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // If a user denies your app, Facebook will redirect the user to
    // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
    // This configurable route handler defines how you want to respond to
    // that.
    // If you do not configure this, everyauth renders a default fallback
    // view notifying the user that their authentication failed and why.
  })
  .<span class="apidocCodeKeywordSpan">findOrCreateUser</span>( function (session, accessToken, accessTokExtra, fbUserMetadata) {
    // find or create user logic goes here
  })
  .redirectPath(&#x27;/&#x27;);

var routes = function (app) {
  // Define your routes here
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.getAccessToken" id="apidoc.element.everyauth.oauth.getAccessToken">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>getAccessToken
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAccessToken = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  if (!parsedUrl.query || !parsedUrl.query.code) {
    console.error(&#x22;Missing code in querystring. The url looks like &#x22; + req.url);
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res, next);
  }
  return parsedUrl.query &#x26;&#x26; parsedUrl.query.code;
})
.<span class="apidocCodeKeywordSpan">getAccessToken</span>( function (code, data) {
  var p = this.Promise()
    , params = {
          client_id: this._appId
        , redirect_uri: this._myHostname + this._callbackPath
        , code: code
        , client_secret: this._appSecret
      }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.getRequestToken" id="apidoc.element.everyauth.oauth.getRequestToken">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>getRequestToken
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getRequestToken = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  .stepseq(&#x27;authCallbackErrorSteps&#x27;)
  .step(&#x27;handleAuthCallbackError&#x27;,
       &#x27;a request handler that intercepts a failed authorization message sent from the OAuth provider to your service. e.g.,
the request handler for &#x22;/auth/twitter/callback?denied=blahblahblahblahblah&#x22;&#x27;)
    .accepts(&#x27;req res next&#x27;)
    .promises(null)

  .<span class="apidocCodeKeywordSpan">getRequestToken</span>( function (req, res, next) {

// Automatic hostname detection + assignment
if (!this._myHostname || this._alwaysDetectHostname) {
  this.myHostname(extractHostname(req));
}

var p = this.Promise()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.getSession" id="apidoc.element.everyauth.oauth.getSession">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>getSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    return swt.claims;
  }

  return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
})

.<span class="apidocCodeKeywordSpan">getSession</span>( function (req) {
  return req.session;
})

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.handleAuthCallbackError" id="apidoc.element.everyauth.oauth.handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>handleAuthCallbackError
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleAuthCallbackError = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.facebook
.appId(&#x27;YOUR APP ID HERE&#x27;)
.appSecret(&#x27;YOUR APP SECRET HERE&#x27;)
.<span class="apidocCodeKeywordSpan">handleAuthCallbackError</span>( function (req, res) {
  // If a user denies your app, Facebook will redirect the user to
  // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
  // This configurable route handler defines how you want to respond to
  // that.
  // If you do not configure this, everyauth renders a default fallback
  // view notifying the user that their authentication failed and why.
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.handleDuplicateCallbackRequest" id="apidoc.element.everyauth.oauth.handleDuplicateCallbackRequest">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>handleDuplicateCallbackRequest
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleDuplicateCallbackRequest = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.init" id="apidoc.element.everyauth.oauth.init">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function init() {
  this._super = _super;
  fn.apply(this, arguments);
  delete this._super;

  // Do module compilation here, too
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var seqName in seqs) {
  seqs[seqName].validateSteps();
}
};

// Decorates the app with the routes required of the module
EveryModule.prototype.routeApp = function (router) {
if (this.init) this.<span class="apidocCodeKeywordSpan">init</span>();
var routes = this._routes;
var methods = [&#x27;get&#x27;, &#x27;post&#x27;];
for (var method in routes) {
  for (var routeAlias in routes[method]) {
    var middleware = this._middleware[routeAlias];
    if (middleware) continue;
    var path = this[routeAlias]();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.myHostname" id="apidoc.element.everyauth.oauth.myHostname">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>myHostname
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">myHostname = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.mailchimp
.appId(&#x27;YOUR CLIENT KEY HERE&#x27;)
.appSecret(&#x27;YOUR CLIENT SECRET HERE&#x27;)
.<span class="apidocCodeKeywordSpan">myHostname</span>(process.env.HOSTNAME || &#x22;http://127.0.0.1:3000&#x22;)//MC requires 127
.0.0.1 for dev
.findOrCreateUser( function (session, accessToken, accessTokenExtra, mailchimpUserData) {
  // find or create user logic goes here
  // Return a user or Promise that promises a user
  // Promises are created via
  //     var promise = this.Promise();
  // The mailchimpUserData object contains everything from the API method getAccountDetails and an apikey.
  // You&#x27;ll want to work with mailchimpUserData.user_id for queries
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.oauthHost" id="apidoc.element.everyauth.oauth.oauthHost">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>oauthHost
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">oauthHost = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.evernote
  .<span class="apidocCodeKeywordSpan">oauthHost</span>(&#x27;https://sandbox.evernote.com&#x27;)
  .entryPath(&#x27;/auth/evernote&#x27;)
  .callbackPath(&#x27;/auth/evernote/callback&#x27;);
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.redirectPath" id="apidoc.element.everyauth.oauth.redirectPath">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>redirectPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">redirectPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// that.
// If you do not configure this, everyauth renders a default fallback
// view notifying the user that their authentication failed and why.
  })
  .findOrCreateUser( function (session, accessToken, accessTokExtra, fbUserMetadata) {
// find or create user logic goes here
  })
  .<span class="apidocCodeKeywordSpan">redirectPath</span>(&#x27;/&#x27;);

var routes = function (app) {
  // Define your routes here
};

connect(
connect.bodyParser()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.redirectToProviderAuth" id="apidoc.element.everyauth.oauth.redirectToProviderAuth">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>redirectToProviderAuth
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">redirectToProviderAuth = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.authorizePath(&#x27;/uas/oauth/authenticate&#x27;)
.accessTokenPath(&#x27;/uas/oauth/accessToken&#x27;)
.fields(&#x27;id,first-name,last-name,headline,location:(name,country:(code)),industry,num-connections,num-connections-capped,summary
,specialties,proposal-comments,associations,honors,interests,positions,publications,patents,languages,skills,certifications,educations
,three-current-positions,three-past-positions,num-recommenders,recommendations-received,phone-numbers,im-accounts,twitter-accounts
,date-of-birth,main-address,member-url-resources,picture-url,site-standard-profile-request:(url),api-standard-profile-request:(url
,headers),public-profile-url&#x27;)

.entryPath(&#x27;/auth/linkedin&#x27;)
.callbackPath(&#x27;/auth/linkedin/callback&#x27;)

.<span class="apidocCodeKeywordSpan">redirectToProviderAuth</span>( function (res, token) {
  this.redirect(res, &#x27;https://www.linkedin.com&#x27; + this.authorizePath() + &#x27;?oauth_token=&#x27; + token);
})

.fetchOAuthUser( function (accessToken, accessTokenSecret, params) {
  var promise = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/people/~:(&#x27; + this.fields() + &#x27;)&#x27;, accessToken, accessTokenSecret, function
 (err, data, res) {
    if (err) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.rememberTokenSecret" id="apidoc.element.everyauth.oauth.rememberTokenSecret">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>rememberTokenSecret
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rememberTokenSecret = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    promise.fulfill(requestToken, verifier);
  });
  return promise;
})
.getSession( function(req) {
  return req.session;
})
.<span class="apidocCodeKeywordSpan">rememberTokenSecret</span>( function (sess) {
  return sess &#x26;&#x26; sess.auth &#x26;&#x26; sess.auth[this.name] &#x26;&#x26; sess.auth[this.name].tokenSecret;
})
.getAccessToken( function (reqToken, reqTokenSecret, verifier) {
  var promise = this.Promise();
  this.oauth.getOAuthAccessToken(reqToken, reqTokenSecret, verifier, function (err, accessToken, accessTokenSecret, params) {
    if (err) return promise.fail(err);
    promise.fulfill(accessToken, accessTokenSecret, params);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.requestTokenPath" id="apidoc.element.everyauth.oauth.requestTokenPath">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>requestTokenPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">requestTokenPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var evernote = module.exports =
oauthModule.submodule(&#x27;evernote&#x27;)
.oauthHost(&#x27;https://www.evernote.com&#x27;)
.entryPath(&#x27;/auth/evernote&#x27;)
.callbackPath(&#x27;/auth/evernote/callback&#x27;)
.authorizePath(&#x27;/OAuth.action&#x27;)
.<span class="apidocCodeKeywordSpan">requestTokenPath</span>(&#x27;/oauth&#x27;)
.accessTokenPath(&#x27;/oauth&#x27;)
.fetchOAuthUser( function (accessToken, accessTokenSecret, params) {
  var oauthUser = {
    shardId: params.edam_shard
  , userId: parseInt(params.edam_userId, 10)
  };
  accessToken.split(&#x27;:&#x27;).forEach(function(item) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.requestTokenQueryParam" id="apidoc.element.everyauth.oauth.requestTokenQueryParam">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>requestTokenQueryParam
        <span class="apidocSignatureSpan">(key, val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">requestTokenQueryParam = function (key, val) {
  if (arguments.length === 1 &#x26;&#x26; key.constructor == Object) {
    for (var k in key) {
      this.requestTokenQueryParam(k, key[k]);
    }
    return this;
  }
  if (val)
    this.moreRequestTokenQueryParams[key] = val;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.entryPath(&#x27;/auth/google1&#x27;)
.callbackPath(&#x27;/auth/google1/callback&#x27;)

.requestTokenPath(&#x27;/accounts/OAuthGetRequestToken&#x27;)
.authorizePath(&#x27;/accounts/OAuthAuthorizeToken&#x27;)
.accessTokenPath(&#x27;/accounts/OAuthGetAccessToken&#x27;)

.<span class="apidocCodeKeywordSpan">requestTokenQueryParam</span>({
    access_type: &#x27;offline&#x27;
  , approval_prompt: &#x27;force&#x27;
  , scope: function () {
      return this._scope &#x26;&#x26; this.scope();
    }
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.sendCallbackWithAuthorize" id="apidoc.element.everyauth.oauth.sendCallbackWithAuthorize">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>sendCallbackWithAuthorize
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendCallbackWithAuthorize = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.oauthHost(&#x27;http://www.mendeley.com/oauth&#x27;)

.requestTokenPath(&#x27;/request_token/&#x27;)
	.accessTokenPath(&#x27;/access_token/&#x27;)
.authorizePath(&#x27;/authorize/&#x27;)

// oauth_callback not allowed
.<span class="apidocCodeKeywordSpan">sendCallbackWithAuthorize</span>(false)

.entryPath(&#x27;/auth/mendeley&#x27;)
.callbackPath(&#x27;/auth/mendeley/callback&#x27;)
.definit( function () {
  this.oauth = new OAuth(
      this.oauthHost() + this.requestTokenPath()
    , this.oauthHost() + this.accessTokenPath()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.sendResponse" id="apidoc.element.everyauth.oauth.sendResponse">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>sendResponse
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendResponse = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
})

.<span class="apidocCodeKeywordSpan">sendResponse</span>( function (res) {
  var redirectTo = this.redirectPath();
  if (!redirectTo)
    throw new Error(&#x27;You must configure a redirectPath&#x27;);
  this.redirect(res, redirectTo);
})

.authCallbackDidErr( function (req) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.storeRequestToken" id="apidoc.element.everyauth.oauth.storeRequestToken">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>storeRequestToken
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">storeRequestToken = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (err) {
      return p.fail(err);
    }
    p.fulfill(token, tokenSecret);
  });
  return p;
})
.<span class="apidocCodeKeywordSpan">storeRequestToken</span>( function (req, token, tokenSecret) {
  var sess = req.session
    , _auth = sess.auth || (sess.auth = {})
    , _provider = _auth[this.name] || (_auth[this.name] = {});
  _provider.token = token;
  _provider.tokenSecret = tokenSecret;
})
.redirectToProviderAuth( function (res, token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth.waitForPriorRequestToWriteSession" id="apidoc.element.everyauth.oauth.waitForPriorRequestToWriteSession">
        function <span class="apidocSignatureSpan">everyauth.oauth.</span>waitForPriorRequestToWriteSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">waitForPriorRequestToWriteSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  })
  .sendResponse( function (res, data) {
    var redirectTo = this.redirectPath();
    if (!redirectTo)
throw new Error(&#x27;You must configure a redirectPath&#x27;);
    this.redirect(res, redirectTo);
  })
  .<span class="apidocCodeKeywordSpan">waitForPriorRequestToWriteSession</span>( function (req, res, next) {
    var promise = this.Promise();
    function check (self, sess, res, promise) {
if (sess.auth[self.name].accessToken) {
  return promise.fulfill();
}

setTimeout(function () {
...</pre></li>
    </ul>






















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.oauth2" id="apidoc.module.everyauth.oauth2">module everyauth.oauth2</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.oauth2._addToSession" id="apidoc.element.everyauth.oauth2._addToSession">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_addToSession
        <span class="apidocSignatureSpan">(sess, auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addToSession = function (sess, auth) {
  var _auth = sess.auth || (sess.auth = {})
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = auth.user[this._userPkey]);
  mod.user = auth.oauthUser;
  mod.accessToken = auth.accessToken;
  // this._super() ?
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2._authCallbackDidErr" id="apidoc.element.everyauth.oauth2._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req, res) {
  return false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2._compile" id="apidoc.element.everyauth.oauth2._compile">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_compile
        <span class="apidocSignatureSpan">(accessToken, extra, oauthUser, user)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_compile = function (accessToken, extra, oauthUser, user) {
  var compiled = {
      accessToken: accessToken
    , oauthUser: oauthUser
    , user: user
  };
  // extra is any extra params returned by the
  // oauth provider in response to the access token
  // POST request
  for (var k in extra) {
    // avoid clobbering any of the properties we set just above (user, accessToken, oauthUser)
    // instagram in particular sends a &#x22;user&#x22; which can break your code in strange ways if it&#x27;s overwritten
    if (compiled[k]) {
      compiled.extra || (compiled.extra = {});
      compiled.extra[k] = extra[k];
    } else {
      compiled[k] = extra[k];
    }
  }
  return compiled;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2._getAccessToken" id="apidoc.element.everyauth.oauth2._getAccessToken">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_getAccessToken
        <span class="apidocSignatureSpan">(code, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getAccessToken = function (code, data) {
  var p = this.Promise()
    , params = {
          client_id: this._appId
        , redirect_uri: this._myHostname + this._callbackPath
        , code: code
        , client_secret: this._appSecret
      }
    , url = this._oauthHost + this._accessTokenPath
    , additionalParams = this.moreAccessTokenParams
    , param;

  if (this._accessTokenPath.indexOf(&#x22;://&#x22;) != -1) {
    // Just in case the access token url uses a different subdomain
    // than than the other urls involved in the oauth2 process.
    // * cough * ... gowalla
    url = this._accessTokenPath;
  }

  if (additionalParams) for (var k in additionalParams) {
    param = additionalParams[k];
    if (&#x27;function&#x27; === typeof param) {
      additionalParams[k] = // cache the fn call
        param = param.call(this, data.req, data.res);
    }
    if (&#x27;function&#x27; === typeof param) {
      param = param.call(this, data.req, data.res);
    }
    params[k] = param;
  }

  var opts = { url: url }
    , paramsVia = this._postAccessTokenParamsVia;
  switch (paramsVia) {
    case &#x27;query&#x27;: // Submit as a querystring
      opts.headers || (opts.headers = {});
      opts.headers[&#x27;Content-Length&#x27;] = 0;
      paramsVia = &#x27;qs&#x27;;
      break;
    case &#x27;data&#x27;: // Submit via application/x-www-form-urlencoded
      paramsVia = &#x27;form&#x27;;
      break;
    default:
      throw new Error(&#x27;postAccessTokenParamsVia must be either &#x22;query&#x22; or &#x22;data&#x22;&#x27;);
  }
  opts[paramsVia] = params;
  request[this._accessTokenHttpMethod](opts, function (err, res, body) {
    if (err) {
      err.extra = {data: body, res: res};
      return p.fail(err);
    }
    if (parseInt(res.statusCode / 100) != 2) return p.fail({extra: {res: res, data: body}});
    var resType = res.headers[&#x27;content-type&#x27;]
      , data;
    if (resType.substring(0, 10) === &#x27;text/plain&#x27;) {
      data = querystring.parse(body);
    } else if (resType.substring(0, 33) === &#x27;application/x-www-form-urlencoded&#x27;) {
      data = querystring.parse(body);
    } else if (resType.substring(0, 16) === &#x27;application/json&#x27;) {
      data = JSON.parse(body);
    } else {
      throw new Error(&#x27;Unsupported content-type &#x27; + resType);
    }
    var aToken = data.access_token;
    delete data.access_token;
    p.fulfill(aToken, data);
  });

  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2._getAuthUri" id="apidoc.element.everyauth.oauth2._getAuthUri">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_getAuthUri
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getAuthUri = function (req, res, next) {

  // Automatic hostname detection + assignment
  if (!this._myHostname || this._alwaysDetectHostname) {
    this.myHostname(extractHostname(req));
  }

  var params = {
          client_id: this._appId
        , redirect_uri: this._myHostname + this._callbackPath
      }
    , authPath = this._authPath
    , url = (/^http/.test(authPath))
          ? authPath
          : (this._oauthHost + authPath)
    , additionalParams = this.moreAuthQueryParams
    , param;

  if (additionalParams) for (var k in additionalParams) {
    param = additionalParams[k];
    if (&#x27;function&#x27; === typeof param) {
      // e.g., for facebook module, param could be
      // function () {
      //   return this._scope &#x26;&#x26; this.scope();
      // }
      param = param.call(this, req, res);
    }
    if (&#x27;function&#x27; === typeof param) {
      // this.scope() itself could be a function
      // to allow for dynamic scope determination - e.g.,
      // function (req, res) {
      //   return req.session.onboardingPhase; // =&#x3e; &#x22;email&#x22;
      // }
      param = param.call(this, req, res);
    }
    params[k] = param;
  }
  return url + &#x27;?&#x27; + querystring.stringify(params);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2._getCode" id="apidoc.element.everyauth.oauth2._getCode">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_getCode
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getCode = function (req, res, next) {
  var parsedUrl = url.parse(req.url, true);
  if (this._authCallbackDidErr(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res, next);
  }
  if (!parsedUrl.query || !parsedUrl.query.code) {
    console.error(&#x22;Missing code in querystring. The url looks like &#x22; + req.url);
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res, next);
  }
  return parsedUrl.query &#x26;&#x26; parsedUrl.query.code;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2._getSession" id="apidoc.element.everyauth.oauth2._getSession">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_getSession
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getSession = function (req) {
  return req.session;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2._handleAuthCallbackError" id="apidoc.element.everyauth.oauth2._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res, next) {
  next(Error(&#x22;You must configure handleAuthCallbackError in this module&#x22;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2._requestAuthUri" id="apidoc.element.everyauth.oauth2._requestAuthUri">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_requestAuthUri
        <span class="apidocSignatureSpan">(res, authUri)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_requestAuthUri = function (res, authUri) {
  this.redirect(res, authUri);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2._sendResponse" id="apidoc.element.everyauth.oauth2._sendResponse">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>_sendResponse
        <span class="apidocSignatureSpan">(res, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sendResponse = function (res, data) {
  var req = data.req;
  var continueTo = req.query &#x26;&#x26; req.query[&#x27;state&#x27;];

  if (continueTo) {
    return this.redirect(res, continueTo);
  }

  var redirectTo = this._redirectPath;
  if (!redirectTo)
    throw new Error(&#x27;You must configure a redirectPath&#x27;);
  this.redirect(res, redirectTo);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.accessTokenHttpMethod" id="apidoc.element.everyauth.oauth2.accessTokenHttpMethod">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>accessTokenHttpMethod
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">accessTokenHttpMethod = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.apiHost(&#x27;https://api.box.com&#x27;)

.authPath(&#x27;/oauth2/authorize&#x27;)
.authQueryParam(&#x27;response_type&#x27;, &#x27;code&#x27;)

.accessTokenPath(&#x27;/oauth2/token&#x27;)
.accessTokenParam(&#x27;grant_type&#x27;, &#x27;authorization_code&#x27;)
.<span class="apidocCodeKeywordSpan">accessTokenHttpMethod</span>(&#x27;post&#x27;)
.postAccessTokenParamsVia(&#x27;data&#x27;)

.entryPath(&#x27;/auth/box2&#x27;)
.callbackPath(&#x27;/auth/box2/callback&#x27;)

.authQueryParam(&#x27;scope&#x27;, function () {
  return this._scope &#x26;&#x26; this.scope();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.accessTokenParam" id="apidoc.element.everyauth.oauth2.accessTokenParam">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>accessTokenParam
        <span class="apidocSignatureSpan">(key, val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">accessTokenParam = function (key, val) {
  if (arguments.length === 1 &#x26;&#x26; key.constructor == Object) {
    for (var k in key) {
      this.accessTokenParam(k, key[k]);
    }
    return this;
  }
  if (val)
    this.moreAccessTokenParams[key] = val;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.oauthHost(&#x27;https://launchpad.37signals.com&#x27;)
.apiHost(&#x27;https://launchpad.37signals.com&#x27;)

.authPath(&#x27;/authorization/new&#x27;)
.authQueryParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.accessTokenPath(&#x27;/authorization/token&#x27;)
.<span class="apidocCodeKeywordSpan">accessTokenParam</span>(&#x27;type&#x27;, &#x27;web_server&#x27;)

.postAccessTokenParamsVia(&#x27;data&#x27;)

.entryPath(&#x27;/auth/37signals&#x27;)
.callbackPath(&#x27;/auth/37signals/callback&#x27;)

.fetchOAuthUser( function (accessToken) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.accessTokenPath" id="apidoc.element.everyauth.oauth2.accessTokenPath">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>accessTokenPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">accessTokenPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

.oauthHost(&#x27;https://launchpad.37signals.com&#x27;)
.apiHost(&#x27;https://launchpad.37signals.com&#x27;)

.authPath(&#x27;/authorization/new&#x27;)
.authQueryParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.<span class="apidocCodeKeywordSpan">accessTokenPath</span>(&#x27;/authorization/token&#x27;)
.accessTokenParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.postAccessTokenParamsVia(&#x27;data&#x27;)

.entryPath(&#x27;/auth/37signals&#x27;)
.callbackPath(&#x27;/auth/37signals/callback&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.addToSession" id="apidoc.element.everyauth.oauth2.addToSession">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>addToSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addToSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
})

.<span class="apidocCodeKeywordSpan">addToSession</span>( function (sess, acsUser, token) {
  var _auth = sess.auth || (sess.auth = {})
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.alwaysDetectHostname" id="apidoc.element.everyauth.oauth2.alwaysDetectHostname">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>alwaysDetectHostname
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">alwaysDetectHostname = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.apiHost" id="apidoc.element.everyauth.oauth2.apiHost">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>apiHost
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">apiHost = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var everyauth = require(&#x27;../index&#x27;) //require(&#x27;everyauth&#x27;)
  , express = require(&#x27;express&#x27;);

everyauth
  .shopify
.<span class="apidocCodeKeywordSpan">apiHost</span>(&#x27;https://SHOPNAME.myshopify.com&#x27;)
.oauthHost(&#x27;https://SHOPNAME.myshopify.com&#x27;)
.appId(&#x27;YOUR APP API KEY&#x27;)
.appSecret(&#x27;YOUR APP SHARED SECRET&#x27;)

//Shopify requires scope, even if you only want to use default scope
.scope(&#x27;read_products,write_themes&#x27;)
.findOrCreateUser( function (sess, accessToken, accessSecret, shopifyUser) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.appId" id="apidoc.element.everyauth.oauth2.appId">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>appId
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">appId = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Facebook Connect

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.facebook
.<span class="apidocCodeKeywordSpan">appId</span>(&#x27;YOUR APP ID HERE&#x27;)
.appSecret(&#x27;YOUR APP SECRET HERE&#x27;)
.handleAuthCallbackError( function (req, res) {
  // If a user denies your app, Facebook will redirect the user to
  // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
  // This configurable route handler defines how you want to respond to
  // that.
  // If you do not configure this, everyauth renders a default fallback
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.appSecret" id="apidoc.element.everyauth.oauth2.appSecret">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>appSecret
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">appSecret = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.facebook
.appId(&#x27;YOUR APP ID HERE&#x27;)
.<span class="apidocCodeKeywordSpan">appSecret</span>(&#x27;YOUR APP SECRET HERE&#x27;)
.handleAuthCallbackError( function (req, res) {
  // If a user denies your app, Facebook will redirect the user to
  // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
  // This configurable route handler defines how you want to respond to
  // that.
  // If you do not configure this, everyauth renders a default fallback
  // view notifying the user that their authentication failed and why.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.authCallbackDidErr" id="apidoc.element.everyauth.oauth2.authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>authCallbackDidErr
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authCallbackDidErr = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 .sendResponse( function (res) {
   var redirectTo = this.redirectPath();
   if (!redirectTo)
     throw new Error(&#x27;You must configure a redirectPath&#x27;);
   this.redirect(res, redirectTo);
 })

 .<span class="apidocCodeKeywordSpan">authCallbackDidErr</span>( function (req) {
   var parsedUrl = url.parse(req.url, true);
   return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
 })

.handleNotValidTokenCallbackError( function (token) {
   throw new Error(&#x22;The token received is NOT valid&#x22;);
 })
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.authCallbackErrorSteps" id="apidoc.element.everyauth.oauth2.authCallbackErrorSteps">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>authCallbackErrorSteps
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authCallbackErrorSteps = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.authPath" id="apidoc.element.everyauth.oauth2.authPath">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>authPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.configurable({
    scope: &#x27;specify types of access: (no scope), user, public_repo, repo, gist&#x27;
})

.oauthHost(&#x27;https://launchpad.37signals.com&#x27;)
.apiHost(&#x27;https://launchpad.37signals.com&#x27;)

.<span class="apidocCodeKeywordSpan">authPath</span>(&#x27;/authorization/new&#x27;)
.authQueryParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.accessTokenPath(&#x27;/authorization/token&#x27;)
.accessTokenParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.postAccessTokenParamsVia(&#x27;data&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.authQueryParam" id="apidoc.element.everyauth.oauth2.authQueryParam">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>authQueryParam
        <span class="apidocSignatureSpan">(key, val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authQueryParam = function (key, val) {
  if (arguments.length === 1 &#x26;&#x26; key.constructor == Object) {
    for (var k in key) {
      this.authQueryParam(k, key[k]);
    }
    return this;
  }
  if (val)
    this.moreAuthQueryParams[key] = val;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    scope: &#x27;specify types of access: (no scope), user, public_repo, repo, gist&#x27;
})

.oauthHost(&#x27;https://launchpad.37signals.com&#x27;)
.apiHost(&#x27;https://launchpad.37signals.com&#x27;)

.authPath(&#x27;/authorization/new&#x27;)
.<span class="apidocCodeKeywordSpan">authQueryParam</span>(&#x27;type&#x27;, &#x27;web_server&#x27;)

.accessTokenPath(&#x27;/authorization/token&#x27;)
.accessTokenParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.postAccessTokenParamsVia(&#x27;data&#x27;)

.entryPath(&#x27;/auth/37signals&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.callbackPath" id="apidoc.element.everyauth.oauth2.callbackPath">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>callbackPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">callbackPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .<span class="apidocCodeKeywordSpan">callbackPath</span>(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.compile" id="apidoc.element.everyauth.oauth2.compile">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>compile
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compile = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var aToken = data.access_token;
    delete data.access_token;
    p.fulfill(aToken, data);
  });

  return p;
})
.<span class="apidocCodeKeywordSpan">compile</span>( function (accessToken, extra, oauthUser, user) {
  var compiled = {
      accessToken: accessToken
    , oauthUser: oauthUser
    , user: user
  };
  // extra is any extra params returned by the
  // oauth provider in response to the access token
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.convertErr" id="apidoc.element.everyauth.oauth2.convertErr">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>convertErr
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">convertErr = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.oauth.get(this.apiHost() + &#x27;/users/self&#x27;, accessToken, function (err, data) {
    if (err) return p.fail(err.error_message);
    var oauthUser = JSON.parse(data).data;
    p.fulfill(oauthUser);
  })
  return p;
})
.<span class="apidocCodeKeywordSpan">convertErr</span>( function (data) {
  return new Error(data.error_message);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.customHeaders" id="apidoc.element.everyauth.oauth2.customHeaders">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>customHeaders
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">customHeaders = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.configurable({
    scope: &#x27;specify types of access: (no scope), user, public_repo, repo, gist&#x27;
})

.oauthHost(&#x27;https://github.com&#x27;)
.apiHost(&#x27;https://api.github.com&#x27;)

.<span class="apidocCodeKeywordSpan">customHeaders</span>({&#x27;User-Agent&#x27;: &#x27;everyauth-github&#x27;})

.authPath(&#x27;/login/oauth/authorize&#x27;)
.accessTokenPath(&#x27;/login/oauth/access_token&#x27;)

.entryPath(&#x27;/auth/github&#x27;)
.callbackPath(&#x27;/auth/github/callback&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.entryPath" id="apidoc.element.everyauth.oauth2.entryPath">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>entryPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">entryPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .<span class="apidocCodeKeywordSpan">entryPath</span>(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.fetchOAuthUser" id="apidoc.element.everyauth.oauth2.fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>fetchOAuthUser
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fetchOAuthUser = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.accessTokenParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.postAccessTokenParamsVia(&#x27;data&#x27;)

.entryPath(&#x27;/auth/37signals&#x27;)
.callbackPath(&#x27;/auth/37signals/callback&#x27;)

.<span class="apidocCodeKeywordSpan">fetchOAuthUser</span>( function (accessToken) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/authorization.json&#x27;, accessToken, function (err, data) {
    if (err) return p.fail(err);
    var oauthUser = JSON.parse(data);
    p.fulfill(oauthUser);
  })
  return p;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.findOrCreateUser" id="apidoc.element.everyauth.oauth2.findOrCreateUser">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>findOrCreateUser
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findOrCreateUser = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // If a user denies your app, Facebook will redirect the user to
    // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
    // This configurable route handler defines how you want to respond to
    // that.
    // If you do not configure this, everyauth renders a default fallback
    // view notifying the user that their authentication failed and why.
  })
  .<span class="apidocCodeKeywordSpan">findOrCreateUser</span>( function (session, accessToken, accessTokExtra, fbUserMetadata) {
    // find or create user logic goes here
  })
  .redirectPath(&#x27;/&#x27;);

var routes = function (app) {
  // Define your routes here
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.getAccessToken" id="apidoc.element.everyauth.oauth2.getAccessToken">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>getAccessToken
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAccessToken = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  if (!parsedUrl.query || !parsedUrl.query.code) {
    console.error(&#x22;Missing code in querystring. The url looks like &#x22; + req.url);
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res, next);
  }
  return parsedUrl.query &#x26;&#x26; parsedUrl.query.code;
})
.<span class="apidocCodeKeywordSpan">getAccessToken</span>( function (code, data) {
  var p = this.Promise()
    , params = {
          client_id: this._appId
        , redirect_uri: this._myHostname + this._callbackPath
        , code: code
        , client_secret: this._appSecret
      }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.getAuthUri" id="apidoc.element.everyauth.oauth2.getAuthUri">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>getAuthUri
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAuthUri = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  .stepseq(&#x27;authCallbackErrorSteps&#x27;)
  .step(&#x27;handleAuthCallbackError&#x27;,
       &#x27;a request handler that intercepts a failed authorization message sent from the OAuth2 provider to your service. e.g
., the request handler for &#x22;/auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description
=The+user+denied+your+request.&#x22;&#x27;)
    .accepts(&#x27;req res next&#x27;)
    .promises(null)

  .<span class="apidocCodeKeywordSpan">getAuthUri</span>( function (req, res, next) {

// Automatic hostname detection + assignment
if (!this._myHostname || this._alwaysDetectHostname) {
  this.myHostname(extractHostname(req));
}

var params = {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.getCode" id="apidoc.element.everyauth.oauth2.getCode">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>getCode
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getCode = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    params[k] = param;
  }
  return url + &#x27;?&#x27; + querystring.stringify(params);
})
.requestAuthUri( function (res, authUri) {
  this.redirect(res, authUri);
})
.<span class="apidocCodeKeywordSpan">getCode</span>( function (req, res, next) {
  var parsedUrl = url.parse(req.url, true);
  if (this._authCallbackDidErr(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res, next);
  }
  if (!parsedUrl.query || !parsedUrl.query.code) {
    console.error(&#x22;Missing code in querystring. The url looks like &#x22; + req.url);
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res, next);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.getSession" id="apidoc.element.everyauth.oauth2.getSession">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>getSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    return swt.claims;
  }

  return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
})

.<span class="apidocCodeKeywordSpan">getSession</span>( function (req) {
  return req.session;
})

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.handleAuthCallbackError" id="apidoc.element.everyauth.oauth2.handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>handleAuthCallbackError
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleAuthCallbackError = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.facebook
.appId(&#x27;YOUR APP ID HERE&#x27;)
.appSecret(&#x27;YOUR APP SECRET HERE&#x27;)
.<span class="apidocCodeKeywordSpan">handleAuthCallbackError</span>( function (req, res) {
  // If a user denies your app, Facebook will redirect the user to
  // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
  // This configurable route handler defines how you want to respond to
  // that.
  // If you do not configure this, everyauth renders a default fallback
  // view notifying the user that their authentication failed and why.
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.init" id="apidoc.element.everyauth.oauth2.init">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function init() {
  this._super = _super;
  fn.apply(this, arguments);
  delete this._super;

  // Do module compilation here, too
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var seqName in seqs) {
  seqs[seqName].validateSteps();
}
};

// Decorates the app with the routes required of the module
EveryModule.prototype.routeApp = function (router) {
if (this.init) this.<span class="apidocCodeKeywordSpan">init</span>();
var routes = this._routes;
var methods = [&#x27;get&#x27;, &#x27;post&#x27;];
for (var method in routes) {
  for (var routeAlias in routes[method]) {
    var middleware = this._middleware[routeAlias];
    if (middleware) continue;
    var path = this[routeAlias]();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.myHostname" id="apidoc.element.everyauth.oauth2.myHostname">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>myHostname
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">myHostname = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.mailchimp
.appId(&#x27;YOUR CLIENT KEY HERE&#x27;)
.appSecret(&#x27;YOUR CLIENT SECRET HERE&#x27;)
.<span class="apidocCodeKeywordSpan">myHostname</span>(process.env.HOSTNAME || &#x22;http://127.0.0.1:3000&#x22;)//MC requires 127
.0.0.1 for dev
.findOrCreateUser( function (session, accessToken, accessTokenExtra, mailchimpUserData) {
  // find or create user logic goes here
  // Return a user or Promise that promises a user
  // Promises are created via
  //     var promise = this.Promise();
  // The mailchimpUserData object contains everything from the API method getAccountDetails and an apikey.
  // You&#x27;ll want to work with mailchimpUserData.user_id for queries
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.oauthHost" id="apidoc.element.everyauth.oauth2.oauthHost">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>oauthHost
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">oauthHost = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.evernote
  .<span class="apidocCodeKeywordSpan">oauthHost</span>(&#x27;https://sandbox.evernote.com&#x27;)
  .entryPath(&#x27;/auth/evernote&#x27;)
  .callbackPath(&#x27;/auth/evernote/callback&#x27;);
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.postAccessTokenParamsVia" id="apidoc.element.everyauth.oauth2.postAccessTokenParamsVia">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>postAccessTokenParamsVia
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">postAccessTokenParamsVia = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

.authPath(&#x27;/authorization/new&#x27;)
.authQueryParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.accessTokenPath(&#x27;/authorization/token&#x27;)
.accessTokenParam(&#x27;type&#x27;, &#x27;web_server&#x27;)

.<span class="apidocCodeKeywordSpan">postAccessTokenParamsVia</span>(&#x27;data&#x27;)

.entryPath(&#x27;/auth/37signals&#x27;)
.callbackPath(&#x27;/auth/37signals/callback&#x27;)

.fetchOAuthUser( function (accessToken) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/authorization.json&#x27;, accessToken, function (err, data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.redirectPath" id="apidoc.element.everyauth.oauth2.redirectPath">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>redirectPath
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">redirectPath = function (path) {
  if (typeof path === &#x27;function&#x27;) {
    var self = this;
    // req here is the auth request, not the callback request
    this.authQueryParam(&#x27;state&#x27;, function (req, res) {
      return path.call(self, req, res);
    });
  } else {
    this._redirectPath = path;
    return this;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// that.
// If you do not configure this, everyauth renders a default fallback
// view notifying the user that their authentication failed and why.
  })
  .findOrCreateUser( function (session, accessToken, accessTokExtra, fbUserMetadata) {
// find or create user logic goes here
  })
  .<span class="apidocCodeKeywordSpan">redirectPath</span>(&#x27;/&#x27;);

var routes = function (app) {
  // Define your routes here
};

connect(
connect.bodyParser()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.requestAuthUri" id="apidoc.element.everyauth.oauth2.requestAuthUri">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>requestAuthUri
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">requestAuthUri = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      // }
      param = param.call(this, req, res);
    }
    params[k] = param;
  }
  return url + &#x27;?&#x27; + querystring.stringify(params);
})
.<span class="apidocCodeKeywordSpan">requestAuthUri</span>( function (res, authUri) {
  this.redirect(res, authUri);
})
.getCode( function (req, res, next) {
  var parsedUrl = url.parse(req.url, true);
  if (this._authCallbackDidErr(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res, next);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.oauth2.sendResponse" id="apidoc.element.everyauth.oauth2.sendResponse">
        function <span class="apidocSignatureSpan">everyauth.oauth2.</span>sendResponse
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendResponse = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
})

.<span class="apidocCodeKeywordSpan">sendResponse</span>( function (res) {
  var redirectTo = this.redirectPath();
  if (!redirectTo)
    throw new Error(&#x27;You must configure a redirectPath&#x27;);
  this.redirect(res, redirectTo);
})

.authCallbackDidErr( function (req) {
...</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.openid" id="apidoc.module.everyauth.openid">module everyauth.openid</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.openid._addToSession" id="apidoc.element.everyauth.openid._addToSession">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>_addToSession
        <span class="apidocSignatureSpan">(sess, user)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addToSession = function (sess, user) {
  var _auth = sess.auth || (sess.auth = {})
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId = user[this._userPkey];
  mod.user = user;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid._getSession" id="apidoc.element.everyauth.openid._getSession">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>_getSession
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getSession = function (req) {
  return req.session;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid._sendResponse" id="apidoc.element.everyauth.openid._sendResponse">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>_sendResponse
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sendResponse = function (res) {
  var redirectTo = this.redirectPath();
  if (!redirectTo)
    throw new Error(&#x27;You must configure a redirectPath&#x27;);
  this.redirect(res, redirectTo);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid._sendToAuthenticationUri" id="apidoc.element.everyauth.openid._sendToAuthenticationUri">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>_sendToAuthenticationUri
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sendToAuthenticationUri = function (req, res) {

  // Automatic hostname detection + assignment
  if (!this._myHostname || this._alwaysDetectHostname) {
    this.myHostname(extractHostname(req));
  }

  var p = this.Promise();

  this.relyingParty.authenticate(req.query[this.openidURLField()], false, (function(err,authenticationUrl){
    if(err) return p.fail(err);
    this.redirect(res, authenticationUrl);
  }).bind(this));

  p.fulfill();
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid._verifyAttributes" id="apidoc.element.everyauth.openid._verifyAttributes">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>_verifyAttributes
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_verifyAttributes = function (req, res) {
  var p = this.Promise();
  this.relyingParty.verifyAssertion(req, function (err,userAttributes) {
    if(err) return p.fail(err);
    p.fulfill(userAttributes)
  });
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.addToSession" id="apidoc.element.everyauth.openid.addToSession">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>addToSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addToSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
})

.<span class="apidocCodeKeywordSpan">addToSession</span>( function (sess, acsUser, token) {
  var _auth = sess.auth || (sess.auth = {})
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.alwaysDetectHostname" id="apidoc.element.everyauth.openid.alwaysDetectHostname">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>alwaysDetectHostname
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">alwaysDetectHostname = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.attributeExchange" id="apidoc.element.everyauth.openid.attributeExchange">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>attributeExchange
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attributeExchange = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
, &#x22;dob&#x22;      : true
, &#x22;gender&#x22;   : true
, &#x22;postcode&#x22; : true
, &#x22;country&#x22;  : true
, &#x22;language&#x22; : true
, &#x22;timezone&#x22; : true
  })
	.<span class="apidocCodeKeywordSpan">attributeExchange</span>({
  &#x22;http://axschema.org/contact/email&#x22;       : &#x22;required&#x22;
, &#x22;http://axschema.org/namePerson/friendly&#x22; : &#x22;required&#x22;
, &#x22;http://axschema.org/namePerson&#x22;          : &#x22;required&#x22;
, &#x22;http://axschema.org/namePerson/first&#x22;    : &#x22;required&#x22;
, &#x22;http://axschema.org/contact/country/home&#x22;: &#x22;required&#x22;
, &#x22;http://axschema.org/media/image/default&#x22; : &#x22;required&#x22;
, &#x22;http://axschema.org/x/media/signature&#x22;   : &#x22;required&#x22;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.callbackPath" id="apidoc.element.everyauth.openid.callbackPath">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>callbackPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">callbackPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .<span class="apidocCodeKeywordSpan">callbackPath</span>(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.entryPath" id="apidoc.element.everyauth.openid.entryPath">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>entryPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">entryPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .<span class="apidocCodeKeywordSpan">entryPath</span>(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.findOrCreateUser" id="apidoc.element.everyauth.openid.findOrCreateUser">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>findOrCreateUser
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findOrCreateUser = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // If a user denies your app, Facebook will redirect the user to
    // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
    // This configurable route handler defines how you want to respond to
    // that.
    // If you do not configure this, everyauth renders a default fallback
    // view notifying the user that their authentication failed and why.
  })
  .<span class="apidocCodeKeywordSpan">findOrCreateUser</span>( function (session, accessToken, accessTokExtra, fbUserMetadata) {
    // find or create user logic goes here
  })
  .redirectPath(&#x27;/&#x27;);

var routes = function (app) {
  // Define your routes here
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.getSession" id="apidoc.element.everyauth.openid.getSession">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>getSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    return swt.claims;
  }

  return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
})

.<span class="apidocCodeKeywordSpan">getSession</span>( function (req) {
  return req.session;
})

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.init" id="apidoc.element.everyauth.openid.init">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function init() {
  this._super = _super;
  fn.apply(this, arguments);
  delete this._super;

  // Do module compilation here, too
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var seqName in seqs) {
  seqs[seqName].validateSteps();
}
};

// Decorates the app with the routes required of the module
EveryModule.prototype.routeApp = function (router) {
if (this.init) this.<span class="apidocCodeKeywordSpan">init</span>();
var routes = this._routes;
var methods = [&#x27;get&#x27;, &#x27;post&#x27;];
for (var method in routes) {
  for (var routeAlias in routes[method]) {
    var middleware = this._middleware[routeAlias];
    if (middleware) continue;
    var path = this[routeAlias]();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.myHostname" id="apidoc.element.everyauth.openid.myHostname">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>myHostname
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">myHostname = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.mailchimp
.appId(&#x27;YOUR CLIENT KEY HERE&#x27;)
.appSecret(&#x27;YOUR CLIENT SECRET HERE&#x27;)
.<span class="apidocCodeKeywordSpan">myHostname</span>(process.env.HOSTNAME || &#x22;http://127.0.0.1:3000&#x22;)//MC requires 127
.0.0.1 for dev
.findOrCreateUser( function (session, accessToken, accessTokenExtra, mailchimpUserData) {
  // find or create user logic goes here
  // Return a user or Promise that promises a user
  // Promises are created via
  //     var promise = this.Promise();
  // The mailchimpUserData object contains everything from the API method getAccountDetails and an apikey.
  // You&#x27;ll want to work with mailchimpUserData.user_id for queries
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.openidURLField" id="apidoc.element.everyauth.openid.openidURLField">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>openidURLField
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">openidURLField = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  , &#x22;http://axschema.org/namePerson/friendly&#x22; : &#x22;required&#x22;
  , &#x22;http://axschema.org/namePerson&#x22;          : &#x22;required&#x22;
  , &#x22;http://axschema.org/namePerson/first&#x22;    : &#x22;required&#x22;
  , &#x22;http://axschema.org/contact/country/home&#x22;: &#x22;required&#x22;
  , &#x22;http://axschema.org/media/image/default&#x22; : &#x22;required&#x22;
  , &#x22;http://axschema.org/x/media/signature&#x22;   : &#x22;required&#x22;
})
.<span class="apidocCodeKeywordSpan">openidURLField</span>(&#x27;openid_identifier&#x27;); //The POST variable used to get the OpenID
.findOrCreateUser( function(session, openIdUserAttributes) {
  // find or create user logic goes here
})
.redirectPath(&#x27;/&#x27;);

var routes = function (app) {
// Define your routes here
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.redirectPath" id="apidoc.element.everyauth.openid.redirectPath">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>redirectPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">redirectPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// that.
// If you do not configure this, everyauth renders a default fallback
// view notifying the user that their authentication failed and why.
  })
  .findOrCreateUser( function (session, accessToken, accessTokExtra, fbUserMetadata) {
// find or create user logic goes here
  })
  .<span class="apidocCodeKeywordSpan">redirectPath</span>(&#x27;/&#x27;);

var routes = function (app) {
  // Define your routes here
};

connect(
connect.bodyParser()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.sendResponse" id="apidoc.element.everyauth.openid.sendResponse">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>sendResponse
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendResponse = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
})

.<span class="apidocCodeKeywordSpan">sendResponse</span>( function (res) {
  var redirectTo = this.redirectPath();
  if (!redirectTo)
    throw new Error(&#x27;You must configure a redirectPath&#x27;);
  this.redirect(res, redirectTo);
})

.authCallbackDidErr( function (req) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.sendToAuthenticationUri" id="apidoc.element.everyauth.openid.sendToAuthenticationUri">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>sendToAuthenticationUri
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendToAuthenticationUri = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    userAttributes[&#x27;access_token&#x27;] = oauthAccessToken;
    userAttributes[&#x27;access_token_secret&#x27;] = oauthAccessTokenSecret;
    p.fulfill(userAttributes)
  });
});
return p;
  })
  .<span class="apidocCodeKeywordSpan">sendToAuthenticationUri</span>(function (req, res) {

// Automatic hostname detection + assignment
if (!this._myHostname || this._alwaysDetectHostname) {
  this.myHostname(extractHostname(req));
}

var self = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.simpleRegistration" id="apidoc.element.everyauth.openid.simpleRegistration">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>simpleRegistration
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">simpleRegistration = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.openid
.myHostname(&#x27;http://localhost:3000&#x27;)
.<span class="apidocCodeKeywordSpan">simpleRegistration</span>({
    &#x22;nickname&#x22; : true
  , &#x22;email&#x22;    : true
  , &#x22;fullname&#x22; : true
  , &#x22;dob&#x22;      : true
  , &#x22;gender&#x22;   : true
  , &#x22;postcode&#x22; : true
  , &#x22;country&#x22;  : true
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.openid.verifyAttributes" id="apidoc.element.everyauth.openid.verifyAttributes">
        function <span class="apidocSignatureSpan">everyauth.openid.</span>verifyAttributes
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">verifyAttributes = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.oauth = new OAuth(
      &#x27;https://www.google.com/accounts/OAuthGetRequestToken&#x27;
    , &#x27;https://www.google.com/accounts/OAuthGetAccessToken&#x27;
    , this._consumerKey
    , this._consumerSecret
    , &#x22;1.0&#x22;,  null, &#x22;HMAC-SHA1&#x22;);
})
.<span class="apidocCodeKeywordSpan">verifyAttributes</span>(function (req,res) {
  var p = this.Promise()
      oauth = this.oauth;
  this.relyingParty.verifyAssertion(req, function (err, userAttributes) {
    if(err) return p.fail(err);
    oauth.getOAuthAccessToken(userAttributes[&#x27;request_token&#x27;], undefined, function (err, oauthAccessToken, oauthAccessTokenSecret
) {
      if (err) return p.fail(err);
      userAttributes[&#x27;access_token&#x27;] = oauthAccessToken;
...</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.osm" id="apidoc.module.everyauth.osm">module everyauth.osm</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.osm._authCallbackDidErr" id="apidoc.element.everyauth.osm._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.osm.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.denied;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.osm._convertErr" id="apidoc.element.everyauth.osm._convertErr">
        function <span class="apidocSignatureSpan">everyauth.osm.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
  return new Error(data.data.match(/&#x3c;error&#x3e;(.+)&#x3c;\/error&#x3e;/)[1]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.osm._fetchOAuthUser" id="apidoc.element.everyauth.osm._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.osm.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var promise = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/api/0.6/user/details&#x27;, accessToken, accessTokenSecret, function (err, data) {
    if (err) return promise.fail(err);
    parser.parseString(data, function (err, result) {
      if (err) return promise.fail(err);
      var oauthUser = result.user;
      promise.fulfill(oauthUser);
    });
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.osm._handleAuthCallbackError" id="apidoc.element.everyauth.osm._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.osm.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: &#x27;The user denied your request&#x27;
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.password" id="apidoc.module.everyauth.password">module everyauth.password</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.password._addToSession" id="apidoc.element.everyauth.password._addToSession">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_addToSession
        <span class="apidocSignatureSpan">(sess, user, errors)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addToSession = function (sess, user, errors) {
  var _auth = sess.auth || (sess.auth = {});
  if (user)
    _auth.userId = user[this._userPkey];
  _auth.loggedIn = !!user;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._aggregateParams" id="apidoc.element.everyauth.password._aggregateParams">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_aggregateParams
        <span class="apidocSignatureSpan">(login, password, extraParams)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_aggregateParams = function (login, password, extraParams) {
  var params = extraParams;
  params[this.loginKey()] = login;
  params.password = password;
  return params;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._displayLogin" id="apidoc.element.everyauth.password._displayLogin">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_displayLogin
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function render(req, res) {
  var locals, render, layout
    , extraLocals
    , view = this[type + &#x27;View&#x27;](), arity
    , trailingArgs = Array.prototype.slice.call(arguments, 2);

  if (res.render) {
    locals =
      localsDefault.apply(this, trailingArgs);
    layout = this[&#x27;_&#x27; + type + &#x27;Layout&#x27;];
    render = function render (locals) {
      if (&#x27;undefined&#x27; !== typeof layout) {
        locals.layout = layout;
      }
      res.render(view, locals);
    };

    extraLocals = this[&#x27;_&#x27; + type + &#x27;Locals&#x27;];
    if (&#x27;function&#x27; !== typeof extraLocals) {
      for (var k in extraLocals) {
        locals[k] = extraLocals[k];
      }
      return render(locals);
    }

    arity = extraLocals.length;
    if (arity === 2) {
      // Dynamic sync locals
      extraLocals = extraLocals(req, res);
      for (var k in extraLocals) {
        locals[k] = extraLocals[k];
      }
      return render(locals);
    } else if (arity === 3) {
      // Dynamic async locals
      return extraLocals(req, res, function (err, extraLocals) {
        if (err) throw err; // TODO Call global configurable error handler
        for (var k in extraLocals) {
          locals[k] = extraLocals[k];
        }
        return render(locals);
      });
    } else {
      throw new Error(&#x27;Your `locals` function must have arity 2 or 3&#x27;);
    }
  } else {
    res.writeHead(200, {&#x27;Content-Type&#x27;: &#x27;text/html&#x27;});
    if (&#x27;function&#x27; === typeof view) {
      res.end(view.apply(this, trailingArgs));
    } else {
      res.end(view);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._displayRegister" id="apidoc.element.everyauth.password._displayRegister">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_displayRegister
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_displayRegister = function (req, res) {
  return renderRegister.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._extractExtraRegistrationParams" id="apidoc.element.everyauth.password._extractExtraRegistrationParams">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_extractExtraRegistrationParams
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_extractExtraRegistrationParams = function (req) {
  return {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._extractLoginPassword" id="apidoc.element.everyauth.password._extractLoginPassword">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_extractLoginPassword
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_extractLoginPassword = function (req, res) {
  return [req.body[this.loginFormFieldName()], req.body[this.passwordFormFieldName()]];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._extractUserOrHandleErrors" id="apidoc.element.everyauth.password._extractUserOrHandleErrors">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_extractUserOrHandleErrors
        <span class="apidocSignatureSpan">(req, res, userOrErrors, newUserAttributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_extractUserOrHandleErrors = function (req, res, userOrErrors, newUserAttributes) {
  var errors, user;
  if (Array.isArray(userOrErrors)) {
    errors = userOrErrors;
    user = newUserAttributes;
    delete user.password;
    return this.breakTo(&#x27;registrationFailSteps&#x27;, req, res, errors, user);
  }
  user = userOrErrors;
  return user;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._getSession" id="apidoc.element.everyauth.password._getSession">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_getSession
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getSession = function (req) {
  return req.session;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._interpretUserOrErrors" id="apidoc.element.everyauth.password._interpretUserOrErrors">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_interpretUserOrErrors
        <span class="apidocSignatureSpan">(userOrErrors)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_interpretUserOrErrors = function (userOrErrors) {
  if (Array.isArray(userOrErrors)) {
    return [null, userOrErrors]; // We have an array of errors
  } else {
    return [userOrErrors, []]; // We have a user
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._maybeBreakToRegistrationFailSteps" id="apidoc.element.everyauth.password._maybeBreakToRegistrationFailSteps">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_maybeBreakToRegistrationFailSteps
        <span class="apidocSignatureSpan">(req, res, errors, newUserAttributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_maybeBreakToRegistrationFailSteps = function (req, res, errors, newUserAttributes) {
  var user, loginField, loginKey;
  if (errors &#x26;&#x26; errors.length) {
    user = newUserAttributes;
    loginField = this.loginFormFieldName();
    loginKey = this.loginKey();
    if (loginField !== loginKey) {
      user[loginField] = user[loginKey];
      delete user[this.loginKey()];
    }
    delete user.password;
    return this.breakTo(&#x27;registrationFailSteps&#x27;, req, res, errors, user);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._respondToLoginFail" id="apidoc.element.everyauth.password._respondToLoginFail">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_respondToLoginFail
        <span class="apidocSignatureSpan">(req, res, errors, login)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_respondToLoginFail = function (req, res, errors, login) {
  if (!errors || !errors.length) return;
  return renderLoginFail.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._respondToLoginSucceed" id="apidoc.element.everyauth.password._respondToLoginSucceed">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_respondToLoginSucceed
        <span class="apidocSignatureSpan">(res, user)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_respondToLoginSucceed = function (res, user) {
  if (user) {
    this.redirect(res, this.loginSuccessRedirect());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._respondToRegistrationFail" id="apidoc.element.everyauth.password._respondToRegistrationFail">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_respondToRegistrationFail
        <span class="apidocSignatureSpan">(req, res, errors, newUserAttributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_respondToRegistrationFail = function (req, res, errors, newUserAttributes) {
  return renderRegisterFail.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._respondToRegistrationSucceed" id="apidoc.element.everyauth.password._respondToRegistrationSucceed">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_respondToRegistrationSucceed
        <span class="apidocSignatureSpan">(req, res, user)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_respondToRegistrationSucceed = function (req, res, user) {
  this.redirect(res, this.registerSuccessRedirect());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._validateRegistration" id="apidoc.element.everyauth.password._validateRegistration">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_validateRegistration
        <span class="apidocSignatureSpan">(newUserAttributes, baseErrors)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_validateRegistration = function (newUserAttributes, baseErrors) {
  return baseErrors;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password._validateRegistrationBase" id="apidoc.element.everyauth.password._validateRegistrationBase">
        function <span class="apidocSignatureSpan">everyauth.password.</span>_validateRegistrationBase
        <span class="apidocSignatureSpan">(newUserAttributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_validateRegistrationBase = function (newUserAttributes) {
  var loginWith = this.loginWith()
    , loginWithSpec, loginWithSanitize, loginWithValidate
    , login = newUserAttributes[this.loginKey()]
    , password = newUserAttributes.password
    , errors = [];
  if (!login) {
    errors.push(&#x27;Missing &#x27; + this.loginHumanName());
  } else {
    // loginWith specific validations
    var validLoginTypes = this.validLoginTypes();
    loginWithSpec = this.validLoginTypes()[loginWith];

    // Sanitize first
    loginWithSanitize = loginWithSpec.sanitize;
    if (loginWithSanitize) {
      login = loginWithSanitize(login);
    }

    // Validate second
    var validateLoginWith = loginWithSpec.validate;
    if (validateLoginWith) {
      if (!validateLoginWith(login)) {
        // Add error third
        errors.push(loginWithSpec.error);
      }
    }
  }
  if (!password) errors.push(&#x27;Missing password&#x27;);
  return errors;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.addToSession" id="apidoc.element.everyauth.password.addToSession">
        function <span class="apidocSignatureSpan">everyauth.password.</span>addToSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addToSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
})

.<span class="apidocCodeKeywordSpan">addToSession</span>( function (sess, acsUser, token) {
  var _auth = sess.auth || (sess.auth = {})
    , mod = _auth[this.name] || (_auth[this.name] = {});
  _auth.loggedIn = true;
  _auth.userId || (_auth.userId = acsUser.id);
  mod.user = acsUser;
  mod.accessToken = token;
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.aggregateParams" id="apidoc.element.everyauth.password.aggregateParams">
        function <span class="apidocSignatureSpan">everyauth.password.</span>aggregateParams
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">aggregateParams = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  .step(&#x27;addToSession&#x27;)
  .step(&#x27;respondToRegistrationSucceed&#x27;)
    .accepts(&#x27;req res user&#x27;)
    .promises(null)
.extractExtraRegistrationParams( function (req) {
  return {};
})
.<span class="apidocCodeKeywordSpan">aggregateParams</span>( function (login, password, extraParams) {
  var params = extraParams;
  params[this.loginKey()] = login;
  params.password = password;
  return params;
})
.validateRegistrationBase( function (newUserAttributes) {
  var loginWith = this.loginWith()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.authenticate" id="apidoc.element.everyauth.password.authenticate">
        function <span class="apidocSignatureSpan">everyauth.password.</span>authenticate
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.password
.getLoginPath(&#x27;/login&#x27;) // Uri path to the login page
.postLoginPath(&#x27;/login&#x27;) // Uri path that your login form POSTs to
.loginView(&#x27;a string of html; OR the name of the jade/etc-view-engine view&#x27;)
.<span class="apidocCodeKeywordSpan">authenticate</span>( function (login, password) {
  // Either, we return a user or an array of errors if doing sync auth.
  // Or, we return a Promise that can fulfill to promise.fulfill(user) or promise.fulfill(errors)
  // `errors` is an array of error message strings
  //
  // e.g.,
  // Example 1 - Sync Example
  // if (usersByLogin[login] &#x26;&#x26; usersByLogin[login].password === password) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.displayLogin" id="apidoc.element.everyauth.password.displayLogin">
        function <span class="apidocSignatureSpan">everyauth.password.</span>displayLogin
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">displayLogin = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.loginHumanName(&#x27;login&#x27;)
.loginKey(&#x27;login&#x27;)

.get(&#x27;getLoginPath&#x27;, &#x22;the login page&#x27;s uri path.&#x22;)
  .step(&#x27;displayLogin&#x27;)
    .accepts(&#x27;req res next&#x27;)
    .promises(null)
.<span class="apidocCodeKeywordSpan">displayLogin</span>(renderLogin)

.post(&#x27;postLoginPath&#x27;, &#x22;the uri path that the login POSTs to. Same as the &#x27;action&#x27; field of the login &#
x3c;form /&#x3e;.&#x22;)
  .step(&#x27;extractLoginPassword&#x27;)
    .accepts(&#x27;req res next&#x27;)
    .promises(&#x27;login password&#x27;)
  .step(&#x27;authenticate&#x27;)
    .accepts(&#x27;login password&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.displayRegister" id="apidoc.element.everyauth.password.displayRegister">
        function <span class="apidocSignatureSpan">everyauth.password.</span>displayRegister
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">displayRegister = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return renderLoginFail.apply(this, arguments);
})

.get(&#x27;getRegisterPath&#x27;, &#x22;the registration page&#x27;s uri path.&#x22;)
  .step(&#x27;displayRegister&#x27;)
    .accepts(&#x27;req res next&#x27;)
    .promises(null)
.<span class="apidocCodeKeywordSpan">displayRegister</span>( function (req, res) {
  return renderRegister.apply(this, arguments);
})

.post(&#x27;postRegisterPath&#x27;, &#x22;the uri path that the registration POSTs to. Same as the &#x27;action&#x27; field of the
 registration &#x3c;form /&#x3e;.&#x22;)
  .step(&#x27;extractLoginPassword&#x27;) // Re-used (/search for other occurence)
  .step(&#x27;extractExtraRegistrationParams&#x27;)
    .description(&#x27;Extracts additonal query or body params from the &#x27; +
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.extractExtraRegistrationParams" id="apidoc.element.everyauth.password.extractExtraRegistrationParams">
        function <span class="apidocSignatureSpan">everyauth.password.</span>extractExtraRegistrationParams
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extractExtraRegistrationParams = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Password Recipe 1: Extra registration data

Sometimes your registration will ask for more information from the user besides the login and password.

For this particular scenario, you can configure the optional step, `extractExtraRegistrationParams`.

```javascript
everyauth.password.<span class="apidocCodeKeywordSpan">extractExtraRegistrationParams</span>( function (req) {
return {
    phone: req.body.phone
  , name: {
        first: req.body.first_name
      , last: req.body.last_name
    }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.extractLoginPassword" id="apidoc.element.everyauth.password.extractLoginPassword">
        function <span class="apidocSignatureSpan">everyauth.password.</span>extractLoginPassword
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extractLoginPassword = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    .description(&#x27;Execute a HTTP response for a successful login&#x27;)
    .accepts(&#x27;res user&#x27;)
    .promises(null)
  .step(&#x27;respondToLoginFail&#x27;)
    .description(&#x27;Execute a HTTP response for a failed login&#x27;)
    .accepts(&#x27;req res errors login&#x27;)
    .promises(null)
.<span class="apidocCodeKeywordSpan">extractLoginPassword</span>( function (req, res) {
  return [req.body[this.loginFormFieldName()], req.body[this.passwordFormFieldName()]];
})
.interpretUserOrErrors( function (userOrErrors) {
  if (Array.isArray(userOrErrors)) {
    return [null, userOrErrors]; // We have an array of errors
  } else {
    return [userOrErrors, []]; // We have a user
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.extractUserOrHandleErrors" id="apidoc.element.everyauth.password.extractUserOrHandleErrors">
        function <span class="apidocSignatureSpan">everyauth.password.</span>extractUserOrHandleErrors
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extractUserOrHandleErrors = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      user[loginField] = user[loginKey];
      delete user[this.loginKey()];
    }
    delete user.password;
    return this.breakTo(&#x27;registrationFailSteps&#x27;, req, res, errors, user);
  }
})
.<span class="apidocCodeKeywordSpan">extractUserOrHandleErrors</span>( function (req, res, userOrErrors, newUserAttributes) {
  var errors, user;
  if (Array.isArray(userOrErrors)) {
    errors = userOrErrors;
    user = newUserAttributes;
    delete user.password;
    return this.breakTo(&#x27;registrationFailSteps&#x27;, req, res, errors, user);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.getLoginPath" id="apidoc.element.everyauth.password.getLoginPath">
        function <span class="apidocSignatureSpan">everyauth.password.</span>getLoginPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLoginPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Password Authentication

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.password
.<span class="apidocCodeKeywordSpan">getLoginPath</span>(&#x27;/login&#x27;) // Uri path to the login page
.postLoginPath(&#x27;/login&#x27;) // Uri path that your login form POSTs to
.loginView(&#x27;a string of html; OR the name of the jade/etc-view-engine view&#x27;)
.authenticate( function (login, password) {
  // Either, we return a user or an array of errors if doing sync auth.
  // Or, we return a Promise that can fulfill to promise.fulfill(user) or promise.fulfill(errors)
  // `errors` is an array of error message strings
  //
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.getRegisterPath" id="apidoc.element.everyauth.password.getRegisterPath">
        function <span class="apidocSignatureSpan">everyauth.password.</span>getRegisterPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getRegisterPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
})
.loginSuccessRedirect(&#x27;/&#x27;) // Where to redirect to after a login

  // If login fails, we render the errors via the login view template,
  // so just make sure your loginView() template incorporates an `errors` local.
  // See &#x27;./example/views/login.jade&#x27;

.<span class="apidocCodeKeywordSpan">getRegisterPath</span>(&#x27;/register&#x27;) // Uri path to the registration page
.postRegisterPath(&#x27;/register&#x27;) // The Uri path that your registration form POSTs to
.registerView(&#x27;a string of html; OR the name of the jade/etc-view-engine view&#x27;)
.validateRegistration( function (newUserAttributes) {
  // Validate the registration input
  // Return undefined, null, or [] if validation succeeds
  // Return an array of error messages (or Promise promising this array)
  // if validation fails
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.getSession" id="apidoc.element.everyauth.password.getSession">
        function <span class="apidocSignatureSpan">everyauth.password.</span>getSession
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSession = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    return swt.claims;
  }

  return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
})

.<span class="apidocCodeKeywordSpan">getSession</span>( function (req) {
  return req.session;
})

.fetchUser( function (claims) {
   var user = {};
   user[&#x27;azureacs&#x27;] = claims;
   return user;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.interpretUserOrErrors" id="apidoc.element.everyauth.password.interpretUserOrErrors">
        function <span class="apidocSignatureSpan">everyauth.password.</span>interpretUserOrErrors
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">interpretUserOrErrors = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    sess.auth = _auth;
  }
  if (user) {
    _auth.userId = user.id;
  }
  _auth.loggedIn = !!user;
})
.<span class="apidocCodeKeywordSpan">interpretUserOrErrors</span>( function (userOrErrors) {
  if (Array.isArray(userOrErrors)) {
    return [null, userOrErrors]; // We have an array of errors
  } else {
    return [userOrErrors, []]; // We have a user
  }
})
.maybeLoginSucceed( function (res, user) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.loginFormFieldName" id="apidoc.element.everyauth.password.loginFormFieldName">
        function <span class="apidocSignatureSpan">everyauth.password.</span>loginFormFieldName
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loginFormFieldName = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.password
  .<span class="apidocCodeKeywordSpan">loginFormFieldName</span>(&#x27;login&#x27;)       // Defaults to &#x27;login&#x27;
  .passwordFormFieldName(&#x27;password&#x27;) // Defaults to &#x27;password&#x27;
  .loginLayout(&#x27;custom_login_layout&#x27;) // Only with `express`
  .registerLayout(&#x27;custom reg_layout&#x27;) // Only with `express`
  .loginLocals(fn);                    // See Recipe 3 below
```

If you want to see what the current value of a
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.loginHumanName" id="apidoc.element.everyauth.password.loginHumanName">
        function <span class="apidocSignatureSpan">everyauth.password.</span>loginHumanName
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loginHumanName = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
               &#x27;that corresponds to the register page.&#x27;
  , registerLayout: &#x27;the name or path to the layout you want to use for your registration page&#x27;
  , registerLocals: &#x27;Configure extra locals to pass to your register/registration view&#x27;
  , registerSuccessRedirect: &#x27;The path we redirect to after a successful registration.&#x27;
})
.loginFormFieldName(&#x27;login&#x27;)
.passwordFormFieldName(&#x27;password&#x27;)
.<span class="apidocCodeKeywordSpan">loginHumanName</span>(&#x27;login&#x27;)
.loginKey(&#x27;login&#x27;)

.get(&#x27;getLoginPath&#x27;, &#x22;the login page&#x27;s uri path.&#x22;)
  .step(&#x27;displayLogin&#x27;)
    .accepts(&#x27;req res next&#x27;)
    .promises(null)
.displayLogin(renderLogin)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.loginKey" id="apidoc.element.everyauth.password.loginKey">
        function <span class="apidocSignatureSpan">everyauth.password.</span>loginKey
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loginKey = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
};
}

var renderLogin = renderGenerator(&#x27;login&#x27;,
function () {
  var locals = {};
  locals[this.<span class="apidocCodeKeywordSpan">loginKey</span>()] = null;
  return locals;
}
);

var renderLoginFail = renderGenerator(&#x27;login&#x27;,
function (errors, login) {
  var locals = {errors: errors};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.loginLayout" id="apidoc.element.everyauth.password.loginLayout">
        function <span class="apidocSignatureSpan">everyauth.password.</span>loginLayout
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loginLayout = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.password
  .loginFormFieldName(&#x27;login&#x27;)       // Defaults to &#x27;login&#x27;
  .passwordFormFieldName(&#x27;password&#x27;) // Defaults to &#x27;password&#x27;
  .<span class="apidocCodeKeywordSpan">loginLayout</span>(&#x27;custom_login_layout&#x27;) // Only with `express`
  .registerLayout(&#x27;custom reg_layout&#x27;) // Only with `express`
  .loginLocals(fn);                    // See Recipe 3 below
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.loginLocals" id="apidoc.element.everyauth.password.loginLocals">
        function <span class="apidocSignatureSpan">everyauth.password.</span>loginLocals
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loginLocals = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
everyauth.password
  .loginFormFieldName(&#x27;login&#x27;)       // Defaults to &#x27;login&#x27;
  .passwordFormFieldName(&#x27;password&#x27;) // Defaults to &#x27;password&#x27;
  .loginLayout(&#x27;custom_login_layout&#x27;) // Only with `express`
  .registerLayout(&#x27;custom reg_layout&#x27;) // Only with `express`
  .<span class="apidocCodeKeywordSpan">loginLocals</span>(fn);                    // See Recipe 3 below
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
everyauth.password.loginFormFieldName();    // &#x27;login&#x27;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.loginSuccessRedirect" id="apidoc.element.everyauth.password.loginSuccessRedirect">
        function <span class="apidocSignatureSpan">everyauth.password.</span>loginSuccessRedirect
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loginSuccessRedirect = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // var promise = this.Promise()
  // YourUserModel.find({ login: login}, function (err, user) {
  //   if (err) return promise.fulfill([err]);
  //   promise.fulfill(user);
  // }
  // return promise;
})
.<span class="apidocCodeKeywordSpan">loginSuccessRedirect</span>(&#x27;/&#x27;) // Where to redirect to after a login

  // If login fails, we render the errors via the login view template,
  // so just make sure your loginView() template incorporates an `errors` local.
  // See &#x27;./example/views/login.jade&#x27;

.getRegisterPath(&#x27;/register&#x27;) // Uri path to the registration page
.postRegisterPath(&#x27;/register&#x27;) // The Uri path that your registration form POSTs to
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.loginView" id="apidoc.element.everyauth.password.loginView">
        function <span class="apidocSignatureSpan">everyauth.password.</span>loginView
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loginView = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.password
.getLoginPath(&#x27;/login&#x27;) // Uri path to the login page
.postLoginPath(&#x27;/login&#x27;) // Uri path that your login form POSTs to
.<span class="apidocCodeKeywordSpan">loginView</span>(&#x27;a string of html; OR the name of the jade/etc-view-engine view&#x27;)
.authenticate( function (login, password) {
  // Either, we return a user or an array of errors if doing sync auth.
  // Or, we return a Promise that can fulfill to promise.fulfill(user) or promise.fulfill(errors)
  // `errors` is an array of error message strings
  //
  // e.g.,
  // Example 1 - Sync Example
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.loginWith" id="apidoc.element.everyauth.password.loginWith">
        function <span class="apidocSignatureSpan">everyauth.password.</span>loginWith
        <span class="apidocSignatureSpan">(loginType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loginWith = function (loginType) {
  if (!arguments.length) return this._loginType;

  this._loginType = loginType;
  var name
    , validLoginTypes = Object.keys(this.validLoginTypes());
  if (-1 === validLoginTypes.indexOf(loginType)) {
    throw new Error(&#x22;loginWith only supports &#x22; + validLoginTypes.join(&#x27;, &#x27;));
  }
  this.loginFormFieldName(loginType);
  this.loginKey(loginType);
  this.loginHumanName(loginType);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Sometimes, you want to use `email` or `phone` instead of `login`. Moreover,
you also want to validate `email` and `phone` fields upon registration.

`everyauth` provides an easy way to do this:

```javascript
everyauth.password.<span class="apidocCodeKeywordSpan">loginWith</span>(&#x27;email&#x27;);

// OR

everyauth.password.loginWith(&#x27;phone&#x27;);
```

With simple login configuration like this, you get email (or phone) validation
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.maybeBreakToRegistrationFailSteps" id="apidoc.element.everyauth.password.maybeBreakToRegistrationFailSteps">
        function <span class="apidocSignatureSpan">everyauth.password.</span>maybeBreakToRegistrationFailSteps
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">maybeBreakToRegistrationFailSteps = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  if (!password) errors.push(&#x27;Missing password&#x27;);
  return errors;
})
.validateRegistration( function (newUserAttributes, baseErrors) {
  return baseErrors;
})
.<span class="apidocCodeKeywordSpan">maybeBreakToRegistrationFailSteps</span>( function (req, res, errors, newUserAttributes) {
  var user, loginField, loginKey;
  if (errors &#x26;&#x26; errors.length) {
    user = newUserAttributes;
    loginField = this.loginFormFieldName();
    loginKey = this.loginKey();
    if (loginField !== loginKey) {
      user[loginField] = user[loginKey];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.passwordFormFieldName" id="apidoc.element.everyauth.password.passwordFormFieldName">
        function <span class="apidocSignatureSpan">everyauth.password.</span>passwordFormFieldName
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">passwordFormFieldName = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.password
  .loginFormFieldName(&#x27;login&#x27;)       // Defaults to &#x27;login&#x27;
  .<span class="apidocCodeKeywordSpan">passwordFormFieldName</span>(&#x27;password&#x27;) // Defaults to &#x27;password&#x27;
  .loginLayout(&#x27;custom_login_layout&#x27;) // Only with `express`
  .registerLayout(&#x27;custom reg_layout&#x27;) // Only with `express`
  .loginLocals(fn);                    // See Recipe 3 below
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.postLoginPath" id="apidoc.element.everyauth.password.postLoginPath">
        function <span class="apidocSignatureSpan">everyauth.password.</span>postLoginPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">postLoginPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.password
.getLoginPath(&#x27;/login&#x27;) // Uri path to the login page
.<span class="apidocCodeKeywordSpan">postLoginPath</span>(&#x27;/login&#x27;) // Uri path that your login form POSTs to
.loginView(&#x27;a string of html; OR the name of the jade/etc-view-engine view&#x27;)
.authenticate( function (login, password) {
  // Either, we return a user or an array of errors if doing sync auth.
  // Or, we return a Promise that can fulfill to promise.fulfill(user) or promise.fulfill(errors)
  // `errors` is an array of error message strings
  //
  // e.g.,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.postRegisterPath" id="apidoc.element.everyauth.password.postRegisterPath">
        function <span class="apidocSignatureSpan">everyauth.password.</span>postRegisterPath
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">postRegisterPath = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.loginSuccessRedirect(&#x27;/&#x27;) // Where to redirect to after a login

  // If login fails, we render the errors via the login view template,
  // so just make sure your loginView() template incorporates an `errors` local.
  // See &#x27;./example/views/login.jade&#x27;

.getRegisterPath(&#x27;/register&#x27;) // Uri path to the registration page
.<span class="apidocCodeKeywordSpan">postRegisterPath</span>(&#x27;/register&#x27;) // The Uri path that your registration form
POSTs to
.registerView(&#x27;a string of html; OR the name of the jade/etc-view-engine view&#x27;)
.validateRegistration( function (newUserAttributes) {
  // Validate the registration input
  // Return undefined, null, or [] if validation succeeds
  // Return an array of error messages (or Promise promising this array)
  // if validation fails
  //
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.registerLayout" id="apidoc.element.everyauth.password.registerLayout">
        function <span class="apidocSignatureSpan">everyauth.password.</span>registerLayout
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerLayout = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
the same chainable API:

```javascript
everyauth.password
  .loginFormFieldName(&#x27;login&#x27;)       // Defaults to &#x27;login&#x27;
  .passwordFormFieldName(&#x27;password&#x27;) // Defaults to &#x27;password&#x27;
  .loginLayout(&#x27;custom_login_layout&#x27;) // Only with `express`
  .<span class="apidocCodeKeywordSpan">registerLayout</span>(&#x27;custom reg_layout&#x27;) // Only with `express`
  .loginLocals(fn);                    // See Recipe 3 below
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.registerLocals" id="apidoc.element.everyauth.password.registerLocals">
        function <span class="apidocSignatureSpan">everyauth.password.</span>registerLocals
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerLocals = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
to augment this set of local vars with additional locals.

So `everyauth` also provides a mechanism for you to do so via the following
configurables:

```javascript
everyauth.password.loginLocals(...);
everyauth.password.<span class="apidocCodeKeywordSpan">registerLocals</span>(...);
```

`loginLocals` and `registerLocals` configuration have symmetrical APIs, so I
will only cover `loginLocals` here to illustrate how to use both.

You can configure this parameter in one of *3* ways. Why 3? Because there are 3 types of ways that you can retrieve your locals.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.registerSuccessRedirect" id="apidoc.element.everyauth.password.registerSuccessRedirect">
        function <span class="apidocSignatureSpan">everyauth.password.</span>registerSuccessRedirect
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerSuccessRedirect = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//   promise.fulfill(user);
// });
// return promise;
//
// Note: Index and db-driven validations are the only validations that occur
// here; all other validations occur in the `validateRegistration` step documented above.
  })
  .<span class="apidocCodeKeywordSpan">registerSuccessRedirect</span>(&#x27;/&#x27;); // Where to redirect to after a successful
 registration

var routes = function (app) {
  // Define your routes here
};

connect(
connect.bodyParser()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.registerUser" id="apidoc.element.everyauth.password.registerUser">
        function <span class="apidocSignatureSpan">everyauth.password.</span>registerUser
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerUser = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  //
  // e.g., assuming you define validate with the following signature
  // var errors = validate(login, password, extraParams);
  // return errors;
  //
  // The `errors` you return show up as an `errors` local in your jade template
})
.<span class="apidocCodeKeywordSpan">registerUser</span>( function (newUserAttributes) {
  // This step is only executed if we pass the validateRegistration step without
  // any errors.
  //
  // Returns a user (or a Promise that promises a user) after adding it to
  // some user store.
  //
  // As an edge case, sometimes your database may make you aware of violation
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.registerView" id="apidoc.element.everyauth.password.registerView">
        function <span class="apidocSignatureSpan">everyauth.password.</span>registerView
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerView = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // If login fails, we render the errors via the login view template,
  // so just make sure your loginView() template incorporates an `errors` local.
  // See &#x27;./example/views/login.jade&#x27;

.getRegisterPath(&#x27;/register&#x27;) // Uri path to the registration page
.postRegisterPath(&#x27;/register&#x27;) // The Uri path that your registration form POSTs to
.<span class="apidocCodeKeywordSpan">registerView</span>(&#x27;a string of html; OR the name of the jade/etc-view-engine view&#x27
;)
.validateRegistration( function (newUserAttributes) {
  // Validate the registration input
  // Return undefined, null, or [] if validation succeeds
  // Return an array of error messages (or Promise promising this array)
  // if validation fails
  //
  // e.g., assuming you define validate with the following signature
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.registrationFailSteps" id="apidoc.element.everyauth.password.registrationFailSteps">
        function <span class="apidocSignatureSpan">everyauth.password.</span>registrationFailSteps
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registrationFailSteps = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.respondToLoginFail" id="apidoc.element.everyauth.password.respondToLoginFail">
        function <span class="apidocSignatureSpan">everyauth.password.</span>respondToLoginFail
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">respondToLoginFail = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  _auth.loggedIn = !!user;
})
.respondToLoginSucceed( function (res, user) {
  if (user) {
    this.redirect(res, this.loginSuccessRedirect());
  }
})
.<span class="apidocCodeKeywordSpan">respondToLoginFail</span>( function (req, res, errors, login) {
  if (!errors || !errors.length) return;
  return renderLoginFail.apply(this, arguments);
})

.get(&#x27;getRegisterPath&#x27;, &#x22;the registration page&#x27;s uri path.&#x22;)
  .step(&#x27;displayRegister&#x27;)
    .accepts(&#x27;req res next&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.respondToLoginSucceed" id="apidoc.element.everyauth.password.respondToLoginSucceed">
        function <span class="apidocSignatureSpan">everyauth.password.</span>respondToLoginSucceed
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">respondToLoginSucceed = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## Custom redirect on password-based login or registration

You may want your own callback that decides where to send a user after login or registration.  One way of doing this is with the
 `respondToLoginSucceed` and `respondToRegistrationSucceed` methods.  This assumes that you have set a `.redirectTo` property on
 your `req.session` object:

```javascript
everyauth.password
.<span class="apidocCodeKeywordSpan">respondToLoginSucceed</span>( function (res, user, data) {
  if (user) {
    this.redirect(res, data.session.redirectTo)
  }
})
.respondToRegistrationSucceed( function (res, user, data) {
  this.redirect(res, data.session.redirectTo)
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.respondToRegistrationFail" id="apidoc.element.everyauth.password.respondToRegistrationFail">
        function <span class="apidocSignatureSpan">everyauth.password.</span>respondToRegistrationFail
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">respondToRegistrationFail = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.redirect(res, this.registerSuccessRedirect());
})

.stepseq(&#x27;registrationFailSteps&#x27;)
  .step(&#x27;respondToRegistrationFail&#x27;)
    .accepts(&#x27;req res errors newUserAttributes&#x27;)
    .promises(null)
.<span class="apidocCodeKeywordSpan">respondToRegistrationFail</span>( function (req, res, errors, newUserAttributes) {
  return renderRegisterFail.apply(this, arguments);
});

function validateEmail (value) {
// From Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
var isValid = /^((([a-z]|\d|[!#\$%&#x26;&#x27;\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&#
x26;&#x27;\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.respondToRegistrationSucceed" id="apidoc.element.everyauth.password.respondToRegistrationSucceed">
        function <span class="apidocSignatureSpan">everyauth.password.</span>respondToRegistrationSucceed
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">respondToRegistrationSucceed = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
everyauth.password
  .respondToLoginSucceed( function (res, user, data) {
    if (user) {
      this.redirect(res, data.session.redirectTo)
    }
  })
  .<span class="apidocCodeKeywordSpan">respondToRegistrationSucceed</span>( function (res, user, data) {
    this.redirect(res, data.session.redirectTo)
  })
```

If you are using express and want your redirects to be subject to [express
redirect mapping](http://expressjs.com/guide.html#res.redirect\(\)), you can
overwrite redirect method employed by everyauth.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.validLoginTypes" id="apidoc.element.everyauth.password.validLoginTypes">
        function <span class="apidocSignatureSpan">everyauth.password.</span>validLoginTypes
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validLoginTypes = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
, login = newUserAttributes[this.loginKey()]
, password = newUserAttributes.password
, errors = [];
    if (!login) {
errors.push(&#x27;Missing &#x27; + this.loginHumanName());
    } else {
// loginWith specific validations
var validLoginTypes = this.<span class="apidocCodeKeywordSpan">validLoginTypes</span>();
loginWithSpec = this.validLoginTypes()[loginWith];

// Sanitize first
loginWithSanitize = loginWithSpec.sanitize;
if (loginWithSanitize) {
  login = loginWithSanitize(login);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.validateRegistration" id="apidoc.element.everyauth.password.validateRegistration">
        function <span class="apidocSignatureSpan">everyauth.password.</span>validateRegistration
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validateRegistration = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // If login fails, we render the errors via the login view template,
  // so just make sure your loginView() template incorporates an `errors` local.
  // See &#x27;./example/views/login.jade&#x27;

.getRegisterPath(&#x27;/register&#x27;) // Uri path to the registration page
.postRegisterPath(&#x27;/register&#x27;) // The Uri path that your registration form POSTs to
.registerView(&#x27;a string of html; OR the name of the jade/etc-view-engine view&#x27;)
.<span class="apidocCodeKeywordSpan">validateRegistration</span>( function (newUserAttributes) {
  // Validate the registration input
  // Return undefined, null, or [] if validation succeeds
  // Return an array of error messages (or Promise promising this array)
  // if validation fails
  //
  // e.g., assuming you define validate with the following signature
  // var errors = validate(login, password, extraParams);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.password.validateRegistrationBase" id="apidoc.element.everyauth.password.validateRegistrationBase">
        function <span class="apidocSignatureSpan">everyauth.password.</span>validateRegistrationBase
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validateRegistrationBase = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
})
.aggregateParams( function (login, password, extraParams) {
  var params = extraParams;
  params[this.loginKey()] = login;
  params.password = password;
  return params;
})
.<span class="apidocCodeKeywordSpan">validateRegistrationBase</span>( function (newUserAttributes) {
  var loginWith = this.loginWith()
    , loginWithSpec, loginWithSanitize, loginWithValidate
    , login = newUserAttributes[this.loginKey()]
    , password = newUserAttributes.password
    , errors = [];
  if (!login) {
    errors.push(&#x27;Missing &#x27; + this.loginHumanName());
...</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.promise" id="apidoc.module.everyauth.promise">module everyauth.promise</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.promise.promise" id="apidoc.element.everyauth.promise.promise">
        function <span class="apidocSignatureSpan">everyauth.</span>promise
        <span class="apidocSignatureSpan">(_module, values)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">promise = function (_module, values) {
  if (values)
    Promise.call(this, values);
  else
    Promise.call(this);
  this.module = _module;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.promise.prototype" id="apidoc.module.everyauth.promise.prototype">module everyauth.promise.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.promise.prototype.breakTo" id="apidoc.element.everyauth.promise.prototype.breakTo">
        function <span class="apidocSignatureSpan">everyauth.promise.prototype.</span>breakTo
        <span class="apidocSignatureSpan">(seqName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">breakTo = function (seqName) {
  if (this._timeout) clearTimeout(this._timeout);

  var args = Array.prototype.slice.call(arguments, 1);
  var _module = this.module
    , seq = _module._stepSequences[seqName];
  if (_module.everyauth.debug)
    console.log(&#x27;breaking out to &#x27; + seq.name);
  seq = seq.materialize();
  seq.start.apply(seq, args);
  // TODO Garbage collect the abandoned sequence
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var token = this.wsfederation.extractToken(res);

if (this.tokenFormat() === &#x27;swt&#x27;) {
  var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
  var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
}
else {
  return this.<span class="apidocCodeKeywordSpan">breakTo</span>(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
}

if (this._authCallbackDidErr(req)) {
  return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
}

return result;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.readability" id="apidoc.module.everyauth.readability">module everyauth.readability</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.readability._convertErr" id="apidoc.element.everyauth.readability._convertErr">
        function <span class="apidocSignatureSpan">everyauth.readability.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
  return new Error(data.error_message);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.readability._fetchOAuthUser" id="apidoc.element.everyauth.readability._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.readability.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/users/_current&#x27;, accessToken, accessTokenSecret, function (err, data) {
    if (err) return p.fail(err.error_message);
    var oauthUser = JSON.parse(data);
    p.fulfill(oauthUser);
  })
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.routeTriggeredSequence" id="apidoc.module.everyauth.routeTriggeredSequence">module everyauth.routeTriggeredSequence</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.routeTriggeredSequence.routeTriggeredSequence" id="apidoc.element.everyauth.routeTriggeredSequence.routeTriggeredSequence">
        function <span class="apidocSignatureSpan">everyauth.</span>routeTriggeredSequence
        <span class="apidocSignatureSpan">(name, _module)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RouteTriggeredSequence(name, _module) {
  StepSequence.call(this, name, _module);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.routeTriggeredSequence.super_" id="apidoc.element.everyauth.routeTriggeredSequence.super_">
        function <span class="apidocSignatureSpan">everyauth.routeTriggeredSequence.</span>super_
        <span class="apidocSignatureSpan">(name, module)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StepSequence(name, module) {
  this.name = name;
  this.module = module;
  this.orderedStepNames = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.routeTriggeredSequence.prototype" id="apidoc.module.everyauth.routeTriggeredSequence.prototype">module everyauth.routeTriggeredSequence.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.routeTriggeredSequence.prototype.routeHandler" id="apidoc.element.everyauth.routeTriggeredSequence.prototype.routeHandler">
        function <span class="apidocSignatureSpan">everyauth.routeTriggeredSequence.prototype.</span>routeHandler
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeHandler = function (req, res, next) {
  // Create a shallow clone, so that seq.values are different per HTTP request
  var seq = this.materialize();
  // Kicks off a sequence of steps based on a route
  seq.start(req, res, next); // BOOM!
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
EveryModule.prototype.middleware = function (endpointAlias) {
  if (this.init) this.init();
  var middleware = this._middleware[endpointAlias];
  if (middleware) return middleware;
  var self = this;
  return this._middleware[endpointAlias] = function (req, res, next) {
    var stepSequence = self.route.get[endpointAlias];
    stepSequence.<span class="apidocCodeKeywordSpan">routeHandler</span>(req, res, next);
  };
};

// Used to determine if we should validate the module&#x27;s sequences and setup the
// module&#x27;s routes. If a module is strictly used as a parent or ancestor module
// to define a shared interface for submodules, then, this should be false.
Object.defineProperty(EveryModule.prototype, &#x27;shouldSetup&#x27;, { get: function () {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.salesforce" id="apidoc.module.everyauth.salesforce">module everyauth.salesforce</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.salesforce._authCallbackDidErr" id="apidoc.element.everyauth.salesforce._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.salesforce.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.salesforce._fetchOAuthUser" id="apidoc.element.everyauth.salesforce._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.salesforce.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, authResponse)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, authResponse) {
  var p = this.Promise();

  request.get({
    url: authResponse.extra.id,
    headers: {&#x27;Authorization&#x27;: &#x27;Bearer &#x27; + accessToken}
  }, function(err, res, body) {
    if(err){
      return p.fail(err);
    } else {
      if(parseInt(res.statusCode/100,10) !=2) {
        return p.fail({extra:{data:body, res: res}});
      }
      var oAuthUser = JSON.parse(body);
      p.fulfill(oAuthUser);
    }
  });

  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.salesforce._handleAuthCallbackError" id="apidoc.element.everyauth.salesforce._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.salesforce.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  var parsedUrl = url.parse(req.url, true),
      errorDesc = parsedUrl.query.error + &#x22;; &#x22; + parsedUrl.query.error_description;
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: errorDesc
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.salesforce._moduleErrback" id="apidoc.element.everyauth.salesforce._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.salesforce.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var salesforceResponse = err.extra.res,
        serverResponse = seqValues.res;
    serverResponse.writeHead(
        salesforceResponse.statusCode,
        salesforceResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.salesforce.scope" id="apidoc.element.everyauth.salesforce.scope">
        function <span class="apidocSignatureSpan">everyauth.salesforce.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.shopify" id="apidoc.module.everyauth.shopify">module everyauth.shopify</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.shopify._fetchOAuthUser" id="apidoc.element.everyauth.shopify._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.shopify.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var p = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/admin/shop.json&#x27;, accessToken, function (err, data, res) {
    if (err) {
      err.extra = {data: data, res: res};
      return p.fail(err);
    }
    var shop = JSON.parse(data).shop;
    p.fulfill(shop);
  });
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.shopify._moduleErrback" id="apidoc.element.everyauth.shopify._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.shopify.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var shopifyResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        shopifyResponse.statusCode
      , shopifyResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.shopify.apiHost" id="apidoc.element.everyauth.shopify.apiHost">
        function <span class="apidocSignatureSpan">everyauth.shopify.</span>apiHost
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">apiHost = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var everyauth = require(&#x27;../index&#x27;) //require(&#x27;everyauth&#x27;)
  , express = require(&#x27;express&#x27;);

everyauth
  .shopify
.<span class="apidocCodeKeywordSpan">apiHost</span>(&#x27;https://SHOPNAME.myshopify.com&#x27;)
.oauthHost(&#x27;https://SHOPNAME.myshopify.com&#x27;)
.appId(&#x27;YOUR APP API KEY&#x27;)
.appSecret(&#x27;YOUR APP SHARED SECRET&#x27;)

//Shopify requires scope, even if you only want to use default scope
.scope(&#x27;read_products,write_themes&#x27;)
.findOrCreateUser( function (sess, accessToken, accessSecret, shopifyUser) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.shopify.appId" id="apidoc.element.everyauth.shopify.appId">
        function <span class="apidocSignatureSpan">everyauth.shopify.</span>appId
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">appId = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Facebook Connect

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.facebook
.<span class="apidocCodeKeywordSpan">appId</span>(&#x27;YOUR APP ID HERE&#x27;)
.appSecret(&#x27;YOUR APP SECRET HERE&#x27;)
.handleAuthCallbackError( function (req, res) {
  // If a user denies your app, Facebook will redirect the user to
  // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
  // This configurable route handler defines how you want to respond to
  // that.
  // If you do not configure this, everyauth renders a default fallback
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.shopify.appSecret" id="apidoc.element.everyauth.shopify.appSecret">
        function <span class="apidocSignatureSpan">everyauth.shopify.</span>appSecret
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">appSecret = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.facebook
.appId(&#x27;YOUR APP ID HERE&#x27;)
.<span class="apidocCodeKeywordSpan">appSecret</span>(&#x27;YOUR APP SECRET HERE&#x27;)
.handleAuthCallbackError( function (req, res) {
  // If a user denies your app, Facebook will redirect the user to
  // /auth/facebook/callback?error_reason=user_denied&#x26;error=access_denied&#x26;error_description=The+user+denied+your+request
.
  // This configurable route handler defines how you want to respond to
  // that.
  // If you do not configure this, everyauth renders a default fallback
  // view notifying the user that their authentication failed and why.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.shopify.oauthHost" id="apidoc.element.everyauth.shopify.oauthHost">
        function <span class="apidocSignatureSpan">everyauth.shopify.</span>oauthHost
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">oauthHost = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.evernote
  .<span class="apidocCodeKeywordSpan">oauthHost</span>(&#x27;https://sandbox.evernote.com&#x27;)
  .entryPath(&#x27;/auth/evernote&#x27;)
  .callbackPath(&#x27;/auth/evernote/callback&#x27;);
```

If you want to see what the current value of a
configured parameter is, you can do so via:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.shopify.scope" id="apidoc.element.everyauth.shopify.scope">
        function <span class="apidocSignatureSpan">everyauth.shopify.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>






















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.skyrock" id="apidoc.module.everyauth.skyrock">module everyauth.skyrock</a></h1>




    <h2>
        <a href="#apidoc.element.everyauth.skyrock._convertErr" id="apidoc.element.everyauth.skyrock._convertErr">
        function <span class="apidocSignatureSpan">everyauth.skyrock.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
			return data.data;
		}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.skyrock._fetchOAuthUser" id="apidoc.element.everyauth.skyrock._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.skyrock.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
			var promise = this.Promise();
			this.oauth.get(this.apiHost() + &#x27;/user/get.json&#x27;, accessToken, accessTokenSecret, function (err, data) {
				data = JSON.parse(data);
				promise.fulfill(data);
			});
			return promise;
		}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.soundcloud" id="apidoc.module.everyauth.soundcloud">module everyauth.soundcloud</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.soundcloud._fetchOAuthUser" id="apidoc.element.everyauth.soundcloud._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.soundcloud.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken) {
  var promise = this.Promise();
  request.get({
      url: this.apiHost() + &#x27;/me.json&#x27;
    , qs: {oauth_token: accessToken}
  }, function (err, res, body) {
    if (err) return promise.fail(err);
    if (parseInt(res.statusCode / 100, 10) !== 2) {
      return promise.fail(body);
    }
    return promise.fulfill(JSON.parse(body));
  });

  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.soundcloud.display" id="apidoc.element.everyauth.soundcloud.display">
        function <span class="apidocSignatureSpan">everyauth.soundcloud.</span>display
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">display = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
everyauth.instagram
  .entryPath(&#x27;/auth/instagram&#x27;)
  .callbackPath(&#x27;/auth/instagram/callback&#x27;)
  .scope(&#x27;basic&#x27;) // Defaults to &#x27;basic&#x27;
                  // Can be set to a combination of: &#x27;basic&#x27;, &#x27;comments&#x27;, &#x27;relationships&#x27;, &#x27;likes
&#x27;
                  // For more details, see http://instagram.com/developer/auth/#scope
  .<span class="apidocCodeKeywordSpan">display</span>(undefined); // Defaults to undefined; Set to &#x27;touch&#x27; to see a mobile
 optimized version
                       // of the instagram auth page
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.soundcloud.scope" id="apidoc.element.everyauth.soundcloud.scope">
        function <span class="apidocSignatureSpan">everyauth.soundcloud.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.step" id="apidoc.module.everyauth.step">module everyauth.step</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.step.step" id="apidoc.element.everyauth.step.step">
        function <span class="apidocSignatureSpan">everyauth.</span>step
        <span class="apidocSignatureSpan">(name, _module)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Step(name, _module) {
  this.name = name;

  // defineProperty; otherwise,
  // clone will overflow when we clone a module
  Object.defineProperty(this, &#x27;module&#x27;, { value: _module });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Declares a GET route that is aliased
// as &#x27;entryPath&#x27;. The handler for this route
// triggers the series of steps that you see
// indented below it.
.get(&#x27;entryPath&#x27;,
     &#x27;the link a user follows, whereupon you redirect them to ACS url- e.g., &#x22;/auth/facebook&#x22;&#x27;)
  .<span class="apidocCodeKeywordSpan">step</span>(&#x27;redirectToIdentityProviderSelector&#x27;)
    .accepts(&#x27;req res next&#x27;)
    .promises(null)

.post(&#x27;callbackPath&#x27;,
     &#x27;the callback path that the ACS redirects to after an authorization result - e.g., &#x22;/auth/facebook/callback&#x22;&#
x27;)
  .step(&#x27;getToken&#x27;)
    .description(&#x27;retrieves a verifier code from the url query&#x27;)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.step.prototype" id="apidoc.module.everyauth.step.prototype">module everyauth.step.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.step.prototype._unwrapArgs" id="apidoc.element.everyauth.step.prototype._unwrapArgs">
        function <span class="apidocSignatureSpan">everyauth.step.prototype.</span>_unwrapArgs
        <span class="apidocSignatureSpan">(seq)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_unwrapArgs = function (seq) {
  return this.accepts.reduce( function (args, accept) {
    args.push(seq.values[accept]);
    return args;
  }, []);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}


if (this.debug) {
  console.log(&#x27;starting step - &#x27; + this.name);
}

var args = this.<span class="apidocCodeKeywordSpan">_unwrapArgs</span>(seq);

// There is a hidden last argument to every step function that
// is all the data promised by prior steps up to the step&#x27;s point
// in time. We cannot anticipate everything a developer may want via
// `accepts(...)`. Therefore, just in case, we give the developer
// access to all data promised by prior steps via the last argument -- `seq.values`
args.push(seq.values);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.step.prototype.clone" id="apidoc.element.everyauth.step.prototype.clone">
        function <span class="apidocSignatureSpan">everyauth.step.prototype.</span>clone
        <span class="apidocSignatureSpan">(name, _module)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function (name, _module) {
  var step = new Step(name, _module);
  step.accepts = clone(this.accepts);
  step.promises = clone(this.promises);
  step.description = this.description;
  step.timeout = this.timeout;
  step.errback = this.errback;
  return step;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.cloneOnSubmodule.forEach( function (toClone) {
  submodule[toClone] = clone(self[toClone]);
});

var seqs = this._stepSequences
  , newSeqs = submodule._stepSequences = {};
for (var seqName in seqs) {
  newSeqs[seqName] = seqs[seqName].<span class="apidocCodeKeywordSpan">clone</span>(submodule);
}

var steps = this._steps
  , newSteps = submodule._steps = {};
for (var stepName in steps) {
  newSteps[stepName] = steps[stepName].clone(stepName, submodule);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.step.prototype.exec" id="apidoc.element.everyauth.step.prototype.exec">
        function <span class="apidocSignatureSpan">everyauth.step.prototype.</span>exec
        <span class="apidocSignatureSpan">(seq)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exec = function (seq) {
  var accepts = this.accepts;
  var promises = this.promises;
  var block = this.block;
  var _module = this.module;
  var stepName = this.name;
  var step = this;
  function errorCallback (error) {
    // Ensure that seq.values are always passed back to moduleErrback
    if (step.errback) {
      step.errback(error, seq.values);
    } else if (_module._moduleErrback) {
      _module._moduleErrback(error, seq.values);
    } else {
      throw new Error(&#x27;Missing module or step errback&#x27;);
    }
  }


  if (this.debug) {
    console.log(&#x27;starting step - &#x27; + this.name);
  }

  var args = this._unwrapArgs(seq);

  // There is a hidden last argument to every step function that
  // is all the data promised by prior steps up to the step&#x27;s point
  // in time. We cannot anticipate everything a developer may want via
  // `accepts(...)`. Therefore, just in case, we give the developer
  // access to all data promised by prior steps via the last argument -- `seq.values`
  args.push(seq.values);

  var ret;
  try {
    // Apply the step logic

    // Add _super access
    _module._super = function () {
      var step = this.__proto__._steps[stepName];
      if (!step) return;
      var superArgs = arguments.length ? arguments : args;
      step.block.apply(this, superArgs);
    };
    ret = block.apply(_module, args);
    delete _module._super;
  } catch (breakTo) {
    // Catch any sync breakTo&#x27;s if any
    if (breakTo.isSeq) {
      if (this.module.everyauth.debug)
        console.log(&#x22;breaking out to &#x22; + breakTo.name);
      breakTo.start.apply(breakTo, breakTo.initialArgs);
      // TODO Garbage collect the promise chain
      return;
    } else {
      // Else, we have a regular exception
      errorCallback(breakTo);
    }
  }

  if (promises &#x26;&#x26; promises.length &#x26;&#x26;
        &#x27;undefined&#x27; === typeof ret) {
    errorCallback(
      new Error(&#x27;Step &#x27; + this.name + &#x27; of `&#x27; + _module.name +
        &#x27;` is promising: &#x27; +  promises.join(&#x27;, &#x27;) +
        &#x27; ; however, the step returns nothing. &#x27; +
        &#x27;Fix the step by returning the expected values OR &#x27; +
        &#x27;by returning a Promise that promises said values.&#x27;)
    );
  }
  // Convert return value into a Promise
  // if it&#x27;s not yet a Promise
  ret = (ret instanceof Promise)
      ? ret
      : Array.isArray(ret)
        ? promises.length === 1
          ? this.module.Promise([ret])
          : this.module.Promise(ret)
        : this.module.Promise([ret]);

  if (seq.debug) {
    ret.callback( function () {
      console.log(&#x27;...finished step&#x27;);
    });
  }

  var convertErr = _module._convertErr;
  if (convertErr) {
    var oldErrback = ret.errback;
    ret.errback = function (fn, scope) {
      var oldFn = fn;
      fn = function (err) {
        if (err.constructor === Object) {
          err = convertErr(err);
        } else if (&#x27;string&#x27; === typeof err) {
          err = new Error(err);
        }
        return oldFn.call(this, err);
      };
      return oldErrback.call(this, fn, scope);
    };
  }

  ret.errback(errorCallback);

  ret.callback( function () {
    // Store the returned values
    // in the sequence&#x27;s state via seq.values
    var returned = arguments
      , vals = seq.values;
    if (promises !== null) promises.forEach( function (valName, i) {
      vals[valName] = returned[i];
    });
  });

  ret.timeback( function () {
    ret.fail(new Error(&#x27;Step &#x27; + stepName + &#x27; of `&#x27; + _module.name + &#x27;` module timed out.&#x27;));
  });

  var timeoutMs = this.timeout || _module.moduleTimeout();
  ret.timeout(timeoutMs);

  return ret;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @returns {Promise}
 */
StepSequence.prototype._bind = function (priorPromise, nextStep) {
  var nextPromise = new Promise();
  var seq = this;

  priorPromise.callback( function () {
    var resultPromise = nextStep.<span class="apidocCodeKeywordSpan">exec</span>(seq);
    if (!resultPromise) return; // if we have a breakTo
    resultPromise.callback( function () {
      nextPromise.fulfill();
    }); // TODO breakback?
  });
  return nextPromise;
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.stepSequence" id="apidoc.module.everyauth.stepSequence">module everyauth.stepSequence</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.stepSequence.stepSequence" id="apidoc.element.everyauth.stepSequence.stepSequence">
        function <span class="apidocSignatureSpan">everyauth.</span>stepSequence
        <span class="apidocSignatureSpan">(name, module)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StepSequence(name, module) {
  this.name = name;
  this.module = module;
  this.orderedStepNames = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.stepSequence.prototype" id="apidoc.module.everyauth.stepSequence.prototype">module everyauth.stepSequence.prototype</a></h1>




    <h2>
        <a href="#apidoc.element.everyauth.stepSequence.prototype._bind" id="apidoc.element.everyauth.stepSequence.prototype._bind">
        function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>_bind
        <span class="apidocSignatureSpan">(priorPromise, nextStep)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_bind = function (priorPromise, nextStep) {
  var nextPromise = new Promise();
  var seq = this;

  priorPromise.callback( function () {
    var resultPromise = nextStep.exec(seq);
    if (!resultPromise) return; // if we have a breakTo
    resultPromise.callback( function () {
      nextPromise.fulfill();
    }); // TODO breakback?
  });
  return nextPromise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Pipe through the steps
  var priorStepPromise = steps[0].exec(this);

  // If we have a breakTo
  if (!priorStepPromise) return;

  for (var i = 1, l = steps.length; i &#x3c; l; i++) {
    priorStepPromise = this.<span class="apidocCodeKeywordSpan">_bind</span>(priorStepPromise, steps[i]);
  }
  return priorStepPromise;
};

// Used for exposing the leading promise of a step promise chain to the
// incoming args (e.g., [req, res] pair from the route handler)
StepSequence.prototype._transposeArgs = function (args) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stepSequence.prototype._transposeArgs" id="apidoc.element.everyauth.stepSequence.prototype._transposeArgs">
        function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>_transposeArgs
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_transposeArgs = function (args) {
  var seq = this;
  this.steps[0].accepts.forEach( function (paramName, i) {
    // Map the incoming arguments to the named parameters
    // that the first step is expected to accept.
    seq.values[paramName] = args[i];
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * This kicks off a sequence of steps.
 * Creates a new chain of promises and exposes the leading promise
 * to the incoming (req, res) pair from the route handler
 */
StepSequence.prototype.start = function () {
var steps = this.steps;

this.<span class="apidocCodeKeywordSpan">_transposeArgs</span>(arguments);

// Pipe through the steps
var priorStepPromise = steps[0].exec(this);

// If we have a breakTo
if (!priorStepPromise) return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stepSequence.prototype.clone" id="apidoc.element.everyauth.stepSequence.prototype.clone">
        function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>clone
        <span class="apidocSignatureSpan">(submodule)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function (submodule) {
  var sequence = new (this.constructor)(this.name, submodule);
  sequence.orderedStepNames = clone(this.orderedStepNames);
  return sequence;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.cloneOnSubmodule.forEach( function (toClone) {
  submodule[toClone] = clone(self[toClone]);
});

var seqs = this._stepSequences
  , newSeqs = submodule._stepSequences = {};
for (var seqName in seqs) {
  newSeqs[seqName] = seqs[seqName].<span class="apidocCodeKeywordSpan">clone</span>(submodule);
}

var steps = this._steps
  , newSteps = submodule._steps = {};
for (var stepName in steps) {
  newSteps[stepName] = steps[stepName].clone(stepName, submodule);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stepSequence.prototype.materialize" id="apidoc.element.everyauth.stepSequence.prototype.materialize">
        function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>materialize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">materialize = function () {
  var sequence = Object.create(this)
    , materializedMethods = this._propertiesToMaterialize;
  sequence.values = {};
  for (var i = materializedMethods.length; i--;) {
    var methodName = materializedMethods[i];
    sequence[methodName] = this[methodName];
  }
  return sequence;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (this._timeout) clearTimeout(this._timeout);

  var args = Array.prototype.slice.call(arguments, 1);
  var _module = this.module
    , seq = _module._stepSequences[seqName];
  if (_module.everyauth.debug)
    console.log(&#x27;breaking out to &#x27; + seq.name);
  seq = seq.<span class="apidocCodeKeywordSpan">materialize</span>();
  seq.start.apply(seq, args);
  // TODO Garbage collect the abandoned sequence
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stepSequence.prototype.start" id="apidoc.element.everyauth.stepSequence.prototype.start">
        function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>start
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function () {
  var steps = this.steps;

  this._transposeArgs(arguments);

  // Pipe through the steps
  var priorStepPromise = steps[0].exec(this);

  // If we have a breakTo
  if (!priorStepPromise) return;

  for (var i = 1, l = steps.length; i &#x3c; l; i++) {
    priorStepPromise = this._bind(priorStepPromise, steps[i]);
  }
  return priorStepPromise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

require(&#x27;util&#x27;).inherits(RouteTriggeredSequence, StepSequence);

RouteTriggeredSequence.prototype.routeHandler = function (req, res, next) {
  // Create a shallow clone, so that seq.values are different per HTTP request
  var seq = this.materialize();
  // Kicks off a sequence of steps based on a route
  seq.<span class="apidocCodeKeywordSpan">start</span>(req, res, next); // BOOM!
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stepSequence.prototype.validateSteps" id="apidoc.element.everyauth.stepSequence.prototype.validateSteps">
        function <span class="apidocSignatureSpan">everyauth.stepSequence.prototype.</span>validateSteps
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validateSteps = function () {
  var steps = this.steps
    , step
    , paramsToDate = []
    , missingParams;
  for (var i = 0, l = steps.length; i &#x3c; l; i++) {
    step = steps[i];
    if (&#x27;undefined&#x27; === typeof step.accepts)
      throw new Error(&#x27;You did not declare accepts for the step: &#x27; + step.name);
    if (&#x27;undefined&#x27; === typeof step.promises)
      throw new Error(&#x27;You did not declare promises for the step: &#x27; + step.name);

    if (i === 0)
      paramsToDate = paramsToDate.concat(step.accepts);

    missingParams = step.accepts.filter( function (param) {
      return paramsToDate.indexOf(param) === -1;
    });

    if (i &#x3e; 0 &#x26;&#x26; missingParams.length)
      throw new Error(&#x27;At step, &#x27; + step.name + &#x27;, you are trying to access the parameters: &#x27; +
        missingParams.join(&#x27;, &#x27;) + &#x27; . However, only the following parameters have been &#x27; +
        &#x27;promised from prior steps thus far: &#x27; + paramsToDate.join(&#x27;, &#x27;));

    paramsToDate = paramsToDate.concat(step.promises);

    if (&#x27;undefined&#x27; === typeof this.module[step.name]())
      // TODO Remove this Error, since invoking the arg to typeof (see line above)
      //      already throws an Error
      throw new Error(&#x27;No one defined the function for the following step: &#x27; + step.name + &#x27; in the module &#x27; + this.module.name);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

return submodule;
};

EveryModule.prototype.validateSequences = function () {
var seqs = this._stepSequences;
for (var seqName in seqs) {
  seqs[seqName].<span class="apidocCodeKeywordSpan">validateSteps</span>();
}
};

// Decorates the app with the routes required of the module
EveryModule.prototype.routeApp = function (router) {
if (this.init) this.init();
var routes = this._routes;
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.stripe" id="apidoc.module.everyauth.stripe">module everyauth.stripe</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.stripe._authCallbackDidErr" id="apidoc.element.everyauth.stripe._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.stripe.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stripe._fetchOAuthUser" id="apidoc.element.everyauth.stripe._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.stripe.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, authResponse)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, authResponse) {
  //var user = authResponse;
  var p = this.Promise();

  request.get({
    url: this.apiHost() + &#x27;/v1/account&#x27;,
    headers: {&#x27;Authorization&#x27;: &#x27;Bearer &#x27; + accessToken}
  }, function(err, res, body) {
    if(err){
      return p.fail(err);
    } else {
      if(parseInt(res.statusCode/100,10) !=2) {
        return p.fail({extra:{data:body, res: res}});
      }
      var oAuthUser = JSON.parse(body);
      p.fulfill(oAuthUser);
    }
  });
  return p;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stripe._handleAuthCallbackError" id="apidoc.element.everyauth.stripe._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.stripe.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  var parsedUrl = url.parse(req.url, true),
      errorDesc = parsedUrl.query.error + &#x22;; &#x22; + parsedUrl.query.error_description;
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: errorDesc
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stripe._moduleErrback" id="apidoc.element.everyauth.stripe._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.stripe.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var stripeResponse = err.extra.res,
        serverResponse = seqValues.res;
    serverResponse.writeHead(
        stripeResponse.statusCode,
        stripeResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stripe.landing" id="apidoc.element.everyauth.stripe.landing">
        function <span class="apidocSignatureSpan">everyauth.stripe.</span>landing
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">landing = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var everyauth = require(&#x27;everyauth&#x27;)
, connect = require(&#x27;connect&#x27;);

everyauth.stripe
.appId(&#x27;YOUR CLIENT ID HERE&#x27;)
.appSecret(&#x27;YOUR CLIENT SECRET HERE&#x27;)
.scope(&#x27;read_only&#x27;) // Defaults to read_only - can be set to &#x27;read_write&#x27;.  See https://stripe.com/docs/connect
/reference
.<span class="apidocCodeKeywordSpan">landing</span>(&#x27;login&#x27;) //Defaults to login - can be set to &#x27;register&#x27;.
See https://stripe.com/docs/connect/reference
.handleAuthCallbackError( function (req, res) {
  // If a user denies your app, Stripe will redirect the user to
  // /auth/facebook/callback?error=access_denied
  // This configurable route handler defines how you want to respond to
  // that.
  // If you do not configure this, everyauth renders a default fallback
  // view notifying the user that their authentication failed and why.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.stripe.scope" id="apidoc.element.everyauth.stripe.scope">
        function <span class="apidocSignatureSpan">everyauth.stripe.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.tripit" id="apidoc.module.everyauth.tripit">module everyauth.tripit</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.tripit._authCallbackDidErr" id="apidoc.element.everyauth.tripit._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.tripit.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.denied;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.tripit._convertErr" id="apidoc.element.everyauth.tripit._convertErr">
        function <span class="apidocSignatureSpan">everyauth.tripit.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
  return new Error(data.data.match(/&#x3c;error&#x3e;(.+)&#x3c;\/error&#x3e;/)[1]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.tripit._fetchOAuthUser" id="apidoc.element.everyauth.tripit._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.tripit.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var promise = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/v1/get/profile/id/&#x27; + params.user_id + &#x27;/format/json&#x27;,
      accessToken, accessTokenSecret, function (err, data) {
    if (err) {
      return promise.fail(err);
    }
    var oauthUser = JSON.parse(data).Profile;
    promise.fulfill(oauthUser);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.tripit._handleAuthCallbackError" id="apidoc.element.everyauth.tripit._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.tripit.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: &#x27;The user denied your request&#x27;
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.tripit._redirectToProviderAuth" id="apidoc.element.everyauth.tripit._redirectToProviderAuth">
        function <span class="apidocSignatureSpan">everyauth.tripit.</span>_redirectToProviderAuth
        <span class="apidocSignatureSpan">(res, token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_redirectToProviderAuth = function (res, token) {
  var redirectTo = &#x27;https://www.tripit.com&#x27; + this.authorizePath() + &#x27;?oauth_token=&#x27; + token;
  if (this.sendCallbackWithAuthorize()) {
    redirectTo += &#x27;&#x26;oauth_callback=&#x27; + this.myHostname() + this.callbackPath();
  }
  this.redirect(res, redirectTo);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.tumblr" id="apidoc.module.everyauth.tumblr">module everyauth.tumblr</a></h1>




    <h2>
        <a href="#apidoc.element.everyauth.tumblr._convertErr" id="apidoc.element.everyauth.tumblr._convertErr">
        function <span class="apidocSignatureSpan">everyauth.tumblr.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
  return data.data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.tumblr._fetchOAuthUser" id="apidoc.element.everyauth.tumblr._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.tumblr.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var promise = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/user/info&#x27;, accessToken, accessTokenSecret, function (err, data) {
    if (err) return promise.fail(err);
    var oauthUser = JSON.parse(data);
    promise.fulfill(oauthUser);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.twitter" id="apidoc.module.everyauth.twitter">module everyauth.twitter</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.twitter._authCallbackDidErr" id="apidoc.element.everyauth.twitter._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.twitter.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.denied;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.twitter._fetchOAuthUser" id="apidoc.element.everyauth.twitter._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.twitter.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var promise = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/1.1/users/show.json?user_id=&#x27; + params.user_id, accessToken, accessTokenSecret, function (err
, data, res) {
    if (err) {
      err.extra = {data: data, res: res};
      return promise.fail(err);
    }
    var oauthUser = JSON.parse(data);
    promise.fulfill(oauthUser);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.twitter._handleAuthCallbackError" id="apidoc.element.everyauth.twitter._handleAuthCallbackError">
        function <span class="apidocSignatureSpan">everyauth.twitter.</span>_handleAuthCallbackError
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthCallbackError = function (req, res) {
  if (res.render) {
    res.render(__dirname + &#x27;/../views/auth-fail.jade&#x27;, {
      errorDescription: &#x27;The user denied your request&#x27;
    });
  } else {
    // TODO Replace this with a nice fallback
    throw new Error(&#x22;You must configure handleAuthCallbackError if you are not using express&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.twitter._moduleErrback" id="apidoc.element.everyauth.twitter._moduleErrback">
        function <span class="apidocSignatureSpan">everyauth.twitter.</span>_moduleErrback
        <span class="apidocSignatureSpan">(err, seqValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_moduleErrback = function (err, seqValues) {
  if (err instanceof Error) {
    var next = seqValues.next;
    return next(err);
  } else if (err.extra) {
    var twitterResponse = err.extra.res
      , serverResponse = seqValues.res;
    serverResponse.writeHead(
        twitterResponse.statusCode
      , twitterResponse.headers);
    serverResponse.end(err.extra.data);
  } else if (err.statusCode) {
    var serverResponse = seqValues.res;
    serverResponse.writeHead(err.statusCode);
    serverResponse.end(err.data);
  } else {
    console.error(err);
    throw new Error(&#x27;Unsupported error type&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stepName = this.name;
var step = this;
function errorCallback (error) {
  // Ensure that seq.values are always passed back to moduleErrback
  if (step.errback) {
    step.errback(error, seq.values);
  } else if (_module._moduleErrback) {
    _module.<span class="apidocCodeKeywordSpan">_moduleErrback</span>(error, seq.values);
  } else {
    throw new Error(&#x27;Missing module or step errback&#x27;);
  }
}


if (this.debug) {
...</pre></li>
    </ul>






















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.utils" id="apidoc.module.everyauth.utils">module everyauth.utils</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.utils.clone" id="apidoc.element.everyauth.utils.clone">
        function <span class="apidocSignatureSpan">everyauth.utils.</span>clone
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clone(obj) {
  if (obj === undefined || obj === null)
    return obj
  if (Array.isArray(obj))
    return cloneArray(obj);
  if (obj.constructor == Object)
    return cloneObject(obj);
  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.cloneOnSubmodule.forEach( function (toClone) {
  submodule[toClone] = clone(self[toClone]);
});

var seqs = this._stepSequences
  , newSeqs = submodule._stepSequences = {};
for (var seqName in seqs) {
  newSeqs[seqName] = seqs[seqName].<span class="apidocCodeKeywordSpan">clone</span>(submodule);
}

var steps = this._steps
  , newSteps = submodule._steps = {};
for (var stepName in steps) {
  newSteps[stepName] = steps[stepName].clone(stepName, submodule);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.utils.extractHostname" id="apidoc.element.everyauth.utils.extractHostname">
        function <span class="apidocSignatureSpan">everyauth.utils.</span>extractHostname
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function extractHostname(req) {
  var headers = req.headers
    , protocol = (req.connection.server instanceof tls.Server ||
                 (req.headers[&#x27;x-forwarded-proto&#x27;] &#x26;&#x26; req.headers[&#x27;x-forwarded-proto&#x27;].slice(0,5) === &#x27;https&#x27;))
               ? &#x27;https://&#x27;
               : &#x27;http://&#x27;
    , host = headers.host;
  return protocol + host;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.utils.merge" id="apidoc.element.everyauth.utils.merge">
        function <span class="apidocSignatureSpan">everyauth.utils.</span>merge
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function merge() {
  var mergeInto = {};
  for (var i = 0, l = arguments.length, mergeFrom, k; i &#x3c; l; i++) {
    mergeFrom = arguments[i];
    for (k in mergeFrom) {
      mergeInto[k] = mergeFrom[k];
    }
  }
  return mergeInto;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.vimeo" id="apidoc.module.everyauth.vimeo">module everyauth.vimeo</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.vimeo._fetchOAuthUser" id="apidoc.element.everyauth.vimeo._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.vimeo.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var promise = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;?format=json&#x26;method=vimeo.people.getInfo&#x26;user_id=&#x27; + accessTokenSecret, accessToken, accessTokenSecret
, function (err, data) {
    if (err) return promise.fail(err);
    var oauthUser = JSON.parse(data);
    return promise.fulfill(oauthUser.person);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.vkontakte" id="apidoc.module.everyauth.vkontakte">module everyauth.vkontakte</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.vkontakte._authCallbackDidErr" id="apidoc.element.everyauth.vkontakte._authCallbackDidErr">
        function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_authCallbackDidErr
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_authCallbackDidErr = function (req) {
  var parsedUrl = url.parse(req.url, true);
  return parsedUrl.query &#x26;&#x26; !!parsedUrl.query.error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var str = token[&#x27;wsse:BinarySecurityToken&#x27;][&#x27;#&#x27;];
    var result = new Buffer(str, &#x27;base64&#x27;).toString(&#x27;ascii&#x27;);
  }
  else {
    return this.breakTo(&#x27;protocolNotImplementedErrorSteps&#x27;, this.tokenFormat());
  }

  if (this.<span class="apidocCodeKeywordSpan">_authCallbackDidErr</span>(req)) {
    return this.breakTo(&#x27;authCallbackErrorSteps&#x27;, req, res);
  }

  return result;
})

.parseToken( function (token) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.vkontakte._convertErr" id="apidoc.element.everyauth.vkontakte._convertErr">
        function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_convertErr
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertErr = function (data) {
  return new Error(JSON.parse(data).error.error_msg);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.vkontakte._fetchOAuthUser" id="apidoc.element.everyauth.vkontakte._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, http)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, http) {
  var promise = this.Promise();
  var params = this._fields &#x26;&#x26; this.fields();
  var fields = (params) ? &#x27;&#x26;fields=&#x27; + params : &#x27;&#x27;;
  this.oauth.get(this.apiHost() + &#x27;/method/getProfiles?uids=&#x27; + http.extra.user_id + fields, accessToken, function (err, data) {
    if (err) return promise.fail(err.error_message);
    var data = JSON.parse(data)
    if (data.error) return promise.fail(data.error.error_msg);
    var oauthUser = data.response[0];
    promise.fulfill(oauthUser);
  })
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.vkontakte.display" id="apidoc.element.everyauth.vkontakte.display">
        function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>display
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">display = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
everyauth.instagram
  .entryPath(&#x27;/auth/instagram&#x27;)
  .callbackPath(&#x27;/auth/instagram/callback&#x27;)
  .scope(&#x27;basic&#x27;) // Defaults to &#x27;basic&#x27;
                  // Can be set to a combination of: &#x27;basic&#x27;, &#x27;comments&#x27;, &#x27;relationships&#x27;, &#x27;likes
&#x27;
                  // For more details, see http://instagram.com/developer/auth/#scope
  .<span class="apidocCodeKeywordSpan">display</span>(undefined); // Defaults to undefined; Set to &#x27;touch&#x27; to see a mobile
 optimized version
                       // of the instagram auth page
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.vkontakte.fields" id="apidoc.element.everyauth.vkontakte.fields">
        function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>fields
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fields = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .scope(&#x27;email&#x27;)                        // Defaults to undefined
  .<span class="apidocCodeKeywordSpan">fields</span>(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults
 to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
everyauth.facebook.scope(); // undefined
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.vkontakte.scope" id="apidoc.element.everyauth.vkontakte.scope">
        function <span class="apidocSignatureSpan">everyauth.vkontakte.</span>scope
        <span class="apidocSignatureSpan">(setTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (setTo) {
  var k = &#x27;_&#x27; + property;
  if (arguments.length) {
    this[k] = setTo;
    return this;
  }
  // TODO this.everyauth is not yet available here in some contexts
  //      For example, when we set and try to access a scope in an auth module definition
  //      but if you look in index, everyauth is not assigned to the module until after it is
  //      required
  if (&#x27;undefined&#x27; === typeof this[k]) {
    var debugMsg = &#x27;WARNING: You are trying to access the attribute/method configured by `&#x27; +
                   property + &#x27;`, which you did not configure. Time to configure it.&#x27;;
    throw new Error(debugMsg);
  }
  return this[k];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can also configure more parameters (most are set to defaults) via
the same chainable API:

```javascript
everyauth.facebook
  .entryPath(&#x27;/auth/facebook&#x27;)
  .callbackPath(&#x27;/auth/facebook/callback&#x27;)
  .<span class="apidocCodeKeywordSpan">scope</span>(&#x27;email&#x27;)                        // Defaults to undefined
  .fields(&#x27;id,name,email,picture&#x27;)       // Controls the returned fields. Defaults to undefined
```

If you want to see what the current value of a
configured parameter is, you can do so via:

```javascript
...</pre></li>
    </ul>






















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.everyauth.yahoo" id="apidoc.module.everyauth.yahoo">module everyauth.yahoo</a></h1>


    <h2>
        <a href="#apidoc.element.everyauth.yahoo._fetchOAuthUser" id="apidoc.element.everyauth.yahoo._fetchOAuthUser">
        function <span class="apidocSignatureSpan">everyauth.yahoo.</span>_fetchOAuthUser
        <span class="apidocSignatureSpan">(accessToken, accessTokenSecret, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fetchOAuthUser = function (accessToken, accessTokenSecret, params) {
  var promise = this.Promise();
  this.oauth.get(this.apiHost() + &#x27;/user/&#x27; + params.xoauth_yahoo_guid + &#x27;/profile?format=json&#x27;, accessToken, accessTokenSecret,
function (err, data) {
    if (err) return promise.fail(err);
    var oauthUser = JSON.parse(data).profile;
    promise.fulfill(oauthUser);
  });
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.everyauth.yahoo.init" id="apidoc.element.everyauth.yahoo.init">
        function <span class="apidocSignatureSpan">everyauth.yahoo.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function init() {
  this._super = _super;
  fn.apply(this, arguments);
  delete this._super;

  // Do module compilation here, too
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var seqName in seqs) {
  seqs[seqName].validateSteps();
}
};

// Decorates the app with the routes required of the module
EveryModule.prototype.routeApp = function (router) {
if (this.init) this.<span class="apidocCodeKeywordSpan">init</span>();
var routes = this._routes;
var methods = [&#x27;get&#x27;, &#x27;post&#x27;];
for (var method in routes) {
  for (var routeAlias in routes[method]) {
    var middleware = this._middleware[routeAlias];
    if (middleware) continue;
    var path = this[routeAlias]();
...</pre></li>
    </ul>


























</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
